{"version":3,"file":"bundle.min.js","sources":["../node_modules/micro-conductor/src/index.js","../src/app-theme.js","../src/config.js","../node_modules/d3-color/src/define.js","../node_modules/d3-color/src/color.js","../src/dataset/genre.js","../node_modules/d3-array/src/ascending.js","../node_modules/d3-array/src/bisector.js","../node_modules/d3-array/src/bisect.js","../node_modules/d3-array/src/number.js","../node_modules/d3-array/src/ticks.js","../node_modules/d3-scale/src/init.js","../node_modules/d3-interpolate/node_modules/d3-color/src/define.js","../node_modules/d3-interpolate/node_modules/d3-color/src/color.js","../node_modules/d3-interpolate/src/constant.js","../node_modules/d3-interpolate/src/color.js","../node_modules/d3-interpolate/src/rgb.js","../node_modules/d3-interpolate/src/numberArray.js","../node_modules/d3-interpolate/src/array.js","../node_modules/d3-interpolate/src/date.js","../node_modules/d3-interpolate/src/number.js","../node_modules/d3-interpolate/src/object.js","../node_modules/d3-interpolate/src/string.js","../node_modules/d3-interpolate/src/value.js","../node_modules/d3-interpolate/src/round.js","../node_modules/d3-scale/src/number.js","../node_modules/d3-scale/src/continuous.js","../node_modules/d3-scale/src/constant.js","../node_modules/d3-format/src/formatDecimal.js","../node_modules/d3-format/src/exponent.js","../node_modules/d3-format/src/formatSpecifier.js","../node_modules/d3-format/src/formatPrefixAuto.js","../node_modules/d3-format/src/formatRounded.js","../node_modules/d3-format/src/formatTypes.js","../node_modules/d3-format/src/identity.js","../node_modules/d3-format/src/locale.js","../node_modules/d3-format/src/defaultLocale.js","../node_modules/d3-format/src/formatGroup.js","../node_modules/d3-format/src/formatNumerals.js","../node_modules/d3-format/src/formatTrim.js","../node_modules/d3-scale/src/tickFormat.js","../node_modules/d3-format/src/precisionPrefix.js","../node_modules/d3-format/src/precisionRound.js","../node_modules/d3-format/src/precisionFixed.js","../node_modules/d3-scale/src/linear.js","../node_modules/d3-time/src/interval.js","../node_modules/d3-time/src/millisecond.js","../node_modules/d3-time/src/second.js","../node_modules/d3-time/src/duration.js","../node_modules/d3-time/src/minute.js","../node_modules/d3-time/src/hour.js","../node_modules/d3-time/src/day.js","../node_modules/d3-time/src/week.js","../node_modules/d3-time/src/month.js","../node_modules/d3-time/src/year.js","../node_modules/d3-time/src/utcMinute.js","../node_modules/d3-time/src/utcHour.js","../node_modules/d3-time/src/utcDay.js","../node_modules/d3-time/src/utcWeek.js","../node_modules/d3-time/src/utcMonth.js","../node_modules/d3-time/src/utcYear.js","../node_modules/d3-time/src/ticks.js","../node_modules/d3-time-format/src/locale.js","../node_modules/d3-time-format/src/defaultLocale.js","../node_modules/d3-scale/src/time.js","../node_modules/d3-scale/src/nice.js","../node_modules/d3-scale/src/sequential.js","../src/dataset/color.js","../src/utils/date.js","../src/utils/string.js","../node_modules/htm/dist/htm.module.js","../src/lib/html/index.js","../src/stores/Collection.js","../src/stores/PointBuffer.js","../src/components/Plot.js","../src/utils/decorator.js","../src/components/PlotInteractive.js","../src/components/TimeAxisLabel.js","../node_modules/classnames/index.js","../src/components/YearNavigation.js","../src/components/InfoBox.js","../src/components/ExternalLinks.js","../src/components/Legend.js","../src/components/LegendInteractive.js","../src/components/ArtistLabelCollection.js","../src/containers/Timeline.js","../src/utils/number.js","../src/stores/Registry.js","../src/containers/TimelineInteractive.js","../src/app.js","../src/dataset/scrobble.js","../src/dataset/summary.js"],"sourcesContent":["function getPatternPart(key) {\n  if (key instanceof RegExp) {\n    return key.source;\n  }\n\n  if (key === null || key === undefined) {\n    return '.*';\n  }\n\n  return key;\n}\n\n// @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#Tagged_templates\nexport function parse(strings, ...keys) {\n  return keys.reduce(\n    (patternParts, key, index) => patternParts.concat(\n      `(${getPatternPart(key)})`,\n      strings[index + 1],\n    ),\n    [strings[0]],\n  ).join('');\n}\n\nexport default class Router {\n  constructor(routes, context) {\n    this.routes = routes || {};\n    this.context = context || this;\n    this.notFound = null;\n    this.navigate = this.navigate.bind(this);\n  }\n\n  // removes \"#\" from the beginning and \"/\"s from the end\n  static normalize(hash) {\n    return hash.replace(/^#|\\/*$/g, '');\n  }\n\n  start(toNavigate = true) {\n    window.addEventListener('hashchange', this.navigate);\n\n    if (toNavigate) {\n      this.navigate();\n    }\n  }\n\n  stop() {\n    window.removeEventListener('hashchange', this.navigate);\n  }\n\n  navigate() {\n    const normalizedHash = this.constructor.normalize(window.location.hash);\n\n    for (const route in this.routes) {\n      const matches = normalizedHash.match(new RegExp(`^${route}$`));\n\n      if (matches) {\n        return this.routes[route].apply(this.context, matches);\n      }\n    }\n\n    if (typeof this.notFound === 'function') {\n      return this.notFound.call(this.context, normalizedHash);\n    }\n  }\n}\n","// mimics \"app-theme.css\" for canvas context\nexport default {\n  black: '#000',\n  darkGreyBlue: '#283038',\n  darkGrey1: '#343434',\n  darkGrey2: '#484848',\n  darkGrey3: '#686868',\n  grey1: '#888888',\n  grey2: '#a8a8a8',\n  lightGrey1: '#c8c8c8',\n  lightGrey2: '#d8d8d8',\n  lightGrey3: '#f0f0f0',\n  lightGrey4: '#f8f8f8',\n  lightBlue: '#1d91c0',\n  white: '#fff',\n};\n","import cssColors from './app-theme';\n\nexport default {\n  debug: '__buildEnv__' !== 'production',\n\n  defaultDataYear: '2022',\n\n  dataUrls: {\n    yearList: 'data/years.json',\n    yearsBase: 'data/years',\n    artistsByGenres: 'data/artists-by-genres.json',\n  },\n\n  links: {\n    lastfm: {\n      url: 'https://www.last.fm/user/markhovskiy/',\n      text: 'markhovskiy',\n    },\n\n    github: {\n      url: 'https://github.com/music-stats/timeline/',\n      text: 'music-stats/timeline',\n    },\n\n    twitter: {\n      url: 'https://twitter.com/oleksmarkh/',\n      text: '@oleksmarkh',\n    },\n  },\n\n  timeline: {\n    zoomDeltaFactor: 0.01,\n    minTimeRange: 24 * 60 * 60 * 1000, // 1 day\n\n    plot: {\n      padding: 12,\n      backgroundColor: cssColors.darkGreyBlue,\n    },\n\n    point: {\n      size: 3,\n      maxMargin: 1,\n      selectedColor: cssColors.white,\n      colorValueFactors: {\n        other: {\n          saturation: 0.5,\n          lightness: 0.6,\n        },\n        genre: {\n          saturation: 1.1,\n          lightness: 1,\n        },\n        artistLabel: {\n          saturation: 1.4,\n          lightness: 1.6,\n        },\n        artist: {\n          saturation: 1.4,\n          lightness: 1.8,\n        },\n      },\n    },\n\n    labels: {\n      areaPadding: 4,\n      margin: 1,\n      highlightedHeight: 16, // not used for label styling, only for limiting plot Y-scale\n      highlightedColor: cssColors.white,\n    },\n\n    timeAxis: {\n      width: 2,\n      tickLabelCount: 40,\n      timeFullColor: cssColors.darkGrey2,\n      timeRangeColor: cssColors.darkGrey3,\n    },\n\n    legend: {\n      height: 150, // the longest genre label should fit\n    },\n\n    // grey\n    unknownGenreColorRange: ['#525252', '#bdbdbd'],\n  },\n\n  genreGroups: {\n    'Classical': {\n      // light grey\n      colorRange: ['#bdbdbd', '#f0f0f0'],\n\n      genres: [\n        'Classical',\n        'Tango',\n      ],\n    },\n\n    'Electronic, Pop': {\n      // brown\n      colorRange: ['#cc4c02', '#fec44f'],\n\n      genres: [\n        'Ambient',\n        'Darkwave',\n        'Dream Pop',\n        'Electronic',\n        'Indie Pop',\n        'Industrial',\n        'Pop',\n        'Singer-songwriter',\n        'Trip Hop',\n      ],\n    },\n\n    'Jazzy': {\n      // yellow\n      colorRange: ['#fec44f', '#fff7bc'],\n\n      genres: [\n        'Blues',\n        'Funk',\n        'Hip-hop',\n        'Jazz',\n        'Low Rock',\n        'Reggae',\n        'Rock And Roll',\n        'Rockabilly',\n        'Soul',\n      ],\n    },\n\n    'Folk': {\n      // green\n      colorRange: ['#238b45', '#a1d99b'],\n\n      genres: [\n        'Acoustic',\n        'Bluegrass',\n        'Dark Country',\n        'Dark Folk',\n        'Folk Metal',\n        'Folk Rock',\n        'Folk',\n        'Freak Folk',\n      ],\n    },\n\n    'Rock': {\n      // blue\n      colorRange: ['#2171b5', '#9ecae1'],\n\n      genres: [\n        'Alternative Rock',\n        'Classic Rock',\n        'Gothic Rock',\n        'Indie Rock',\n        'Industrial Rock',\n        'Instrumental Virtuoso',\n        'Pop Rock',\n        'Post-rock',\n        'Progressive Rock',\n        'Stoner Rock',\n      ],\n    },\n\n    'Metal': {\n      // violet\n      colorRange: ['#88419d', '#9ebcda'],\n\n      genres: [\n        'Black Metal',\n        'Death Metal',\n        'Deathcore',\n        'Doom Metal',\n        'Gothic Metal',\n        'Groove Metal',\n        'Heavy Metal',\n        'Industrial Metal',\n        'Melodic Black Metal',\n        'Melodic Death Metal',\n        'Metalcore',\n        'Nu Metal',\n        'Post-black',\n        'Power Metal',\n        'Progressive Death Metal',\n        'Progressive Metal',\n        'Sludge Metal',\n        'Symphonic Metal',\n        'Thrash Metal',\n      ],\n    },\n\n    'Punk': {\n      // pink\n      colorRange: ['#ce1256', '#c994c7'],\n\n      genres: [\n        'Grunge',\n        'Hardcore',\n        'Post-hardcore',\n        'Post-punk',\n        'Proto-punk',\n        'Punk Rock',\n        'Screamo',\n        'Ska Punk',\n        'Ska',\n      ],\n    },\n  },\n};\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","import * as d3Color from 'd3-color';\n\nimport config from '../config';\n\nexport function insertGenres(scrobbleList, artistsByGenres) {\n  const {genreGroups} = config;\n  const genreGroupsByGenres = {};\n  const genresByArtists = {};\n\n  for (const genreGroup in genreGroups) {\n    genreGroups[genreGroup].genres.forEach((genre) => genreGroupsByGenres[genre] = genreGroup);\n  }\n\n  for (const genre in artistsByGenres) {\n    artistsByGenres[genre].forEach((artistName) => genresByArtists[artistName] = genre);\n  }\n\n  return scrobbleList.map((scrobble) => {\n    const genre = genresByArtists[scrobble.artist.name];\n    const genreGroup = genreGroupsByGenres[genre];\n\n    return {\n      ...scrobble,\n      ...(genre && {\n        artist: {\n          ...scrobble.artist,\n          genreGroup, // e.g. 'Rock'\n          genre, // e.g. 'Classic Rock'\n        },\n      }),\n    };\n  });\n}\n\nexport function getGenreSortedList(scrobbleList) {\n  const {timeline: {point: {colorValueFactors}}, genreGroups} = config;\n  const genres = {};\n  const genreList = [];\n  const artistPlaycounts = {};\n\n  scrobbleList.forEach(({artist: {name, playcount, genreGroup, genre}}) => {\n    if (!genre) {\n      return;\n    }\n\n    let genreRecord = genres[genre];\n    if (!genreRecord) {\n      genreRecord = {\n        genreGroup,\n        artistCount: 0,\n        playcount: 0,\n      };\n      genres[genre] = genreRecord;\n    }\n\n    if (artistPlaycounts[name]) {\n      genreRecord.playcount = genreRecord.playcount - artistPlaycounts[name] + playcount;\n    } else {\n      genreRecord.artistCount += 1;\n      genreRecord.playcount += playcount;\n    }\n\n    artistPlaycounts[name] = playcount;\n  });\n\n  for (const genre in genres) {\n    const {artistCount, playcount, genreGroup} = genres[genre];\n    const genreGroupConfig = genreGroups[genreGroup];\n\n    if (!genreGroupConfig) {\n      console.warn(`genre not found in the config: ${genre}`);\n      continue;\n    }\n\n    const {colorRange: [baseColor]} = genreGroupConfig;\n    const color = d3Color.hsl(baseColor);\n    const highlightedColor = d3Color.hsl(baseColor);\n\n    color.s *= colorValueFactors.other.saturation;\n    color.l *= colorValueFactors.other.lightness;\n\n    highlightedColor.s *= colorValueFactors.genre.saturation;\n    highlightedColor.l *= colorValueFactors.genre.lightness;\n\n    [\n      color,\n      highlightedColor,\n    ].forEach((c) => {\n      if (c.s > 1) { c.s = 1; }\n      if (c.l > 1) { c.l = 1; }\n    });\n\n    genreList.push({\n      name: genre,\n      group: genreGroup,\n      artistCount,\n      playcount,\n      color,\n      highlightedColor,\n    });\n  }\n\n  return genreList.sort((a, b) => b.playcount - a.playcount);\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function(f) {\n  let delta = f;\n  let compare = f;\n\n  if (f.length === 1) {\n    delta = (d, x) => f(d) - x;\n    compare = ascendingComparator(f);\n  }\n\n  function left(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) < 0) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  function right(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) > 0) hi = mid;\n      else lo = mid + 1;\n    }\n    return lo;\n  }\n\n  function center(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction ascendingComparator(f) {\n  return (d, x) => ascending(f(d), x);\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    let r0 = Math.round(start / step), r1 = Math.round(stop / step);\n    if (r0 * step < start) ++r0;\n    if (r1 * step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) * step;\n  } else {\n    step = -step;\n    let r0 = Math.round(start * step), r1 = Math.round(stop * step);\n    if (r0 / step < start) ++r0;\n    if (r1 / step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"−\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = function(date) {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval.js\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","import interval from \"./interval.js\";\nimport {durationSecond} from \"./duration.js\";\n\nvar second = interval(function(date) {\n  date.setTime(date - date.getMilliseconds());\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","export const durationSecond = 1000;\nexport const durationMinute = durationSecond * 60;\nexport const durationHour = durationMinute * 60;\nexport const durationDay = durationHour * 24;\nexport const durationWeek = durationDay * 7;\nexport const durationMonth = durationDay * 30;\nexport const durationYear = durationDay * 365;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationSecond} from \"./duration.js\";\n\nvar minute = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval.js\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration.js\";\n\nvar hour = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nvar day = interval(\n  date => date.setHours(0, 0, 0, 0),\n  (date, step) => date.setDate(date.getDate() + step),\n  (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay,\n  date => date.getDate() - 1\n);\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval.js\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval.js\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval.js\";\nimport {durationMinute} from \"./duration.js\";\n\nvar utcMinute = interval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;\n","import interval from \"./interval.js\";\nimport {durationHour} from \"./duration.js\";\n\nvar utcHour = interval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nexport default utcHour;\nexport var utcHours = utcHour.range;\n","import interval from \"./interval.js\";\nimport {durationDay} from \"./duration.js\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval.js\";\nimport {durationWeek} from \"./duration.js\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval.js\";\n\nvar utcMonth = interval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;\n","import interval from \"./interval.js\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import {bisector, tickStep} from \"d3-array\";\nimport {durationDay, durationHour, durationMinute, durationMonth, durationSecond, durationWeek, durationYear} from \"./duration.js\";\nimport millisecond from \"./millisecond.js\";\nimport second from \"./second.js\";\nimport minute from \"./minute.js\";\nimport hour from \"./hour.js\";\nimport day from \"./day.js\";\nimport {sunday as week} from \"./week.js\";\nimport month from \"./month.js\";\nimport year from \"./year.js\";\nimport utcMinute from \"./utcMinute.js\";\nimport utcHour from \"./utcHour.js\";\nimport utcDay from \"./utcDay.js\";\nimport {utcSunday as utcWeek} from \"./utcWeek.js\";\nimport utcMonth from \"./utcMonth.js\";\nimport utcYear from \"./utcYear.js\";\n\nfunction ticker(year, month, week, day, hour, minute) {\n\n  const tickIntervals = [\n    [second,  1,      durationSecond],\n    [second,  5,  5 * durationSecond],\n    [second, 15, 15 * durationSecond],\n    [second, 30, 30 * durationSecond],\n    [minute,  1,      durationMinute],\n    [minute,  5,  5 * durationMinute],\n    [minute, 15, 15 * durationMinute],\n    [minute, 30, 30 * durationMinute],\n    [  hour,  1,      durationHour  ],\n    [  hour,  3,  3 * durationHour  ],\n    [  hour,  6,  6 * durationHour  ],\n    [  hour, 12, 12 * durationHour  ],\n    [   day,  1,      durationDay   ],\n    [   day,  2,  2 * durationDay   ],\n    [  week,  1,      durationWeek  ],\n    [ month,  1,      durationMonth ],\n    [ month,  3,  3 * durationMonth ],\n    [  year,  1,      durationYear  ]\n  ];\n\n  function ticks(start, stop, count) {\n    const reverse = stop < start;\n    if (reverse) [start, stop] = [stop, start];\n    const interval = count && typeof count.range === \"function\" ? count : tickInterval(start, stop, count);\n    const ticks = interval ? interval.range(start, +stop + 1) : []; // inclusive stop\n    return reverse ? ticks.reverse() : ticks;\n  }\n\n  function tickInterval(start, stop, count) {\n    const target = Math.abs(stop - start) / count;\n    const i = bisector(([,, step]) => step).right(tickIntervals, target);\n    if (i === tickIntervals.length) return year.every(tickStep(start / durationYear, stop / durationYear, count));\n    if (i === 0) return millisecond.every(Math.max(tickStep(start, stop, count), 1));\n    const [t, step] = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n    return t.every(step);\n  }\n\n  return [ticks, tickInterval];\n}\n\nconst [utcTicks, utcTickInterval] = ticker(utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute);\nconst [timeTicks, timeTickInterval] = ticker(year, month, week, day, hour, minute);\n\nexport {utcTicks, utcTickInterval, timeTicks, timeTickInterval};\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"g\": formatYearISO,\n    \"G\": formatFullYearISO,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"g\": formatUTCYearISO,\n    \"G\": formatUTCFullYearISO,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"g\": parseYear,\n    \"G\": parseFullYear,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  return new Map(names.map((name, i) => [name.toLowerCase(), i]));\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction dISO(d) {\n  var day = d.getDay();\n  return (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  d = dISO(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatYearISO(d, p) {\n  d = dISO(d);\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatFullYearISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction UTCdISO(d) {\n  var day = d.getUTCDay();\n  return (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  d = UTCdISO(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCYearISO(d, p) {\n  d = UTCdISO(d);\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCFullYearISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeTicks, timeTickInterval} from \"d3-time\";\nimport {timeFormat} from \"d3-time-format\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport nice from \"./nice.js\";\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format) {\n  var scale = continuous(),\n      invert = scale.invert,\n      domain = scale.domain;\n\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond\n        : minute(date) < date ? formatSecond\n        : hour(date) < date ? formatMinute\n        : day(date) < date ? formatHour\n        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n        : year(date) < date ? formatMonth\n        : formatYear)(date);\n  }\n\n  scale.invert = function(y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? domain(Array.from(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function(interval) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], interval == null ? 10 : interval);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function(interval) {\n    var d = domain();\n    if (!interval || typeof interval.range !== \"function\") interval = tickInterval(d[0], d[d.length - 1], interval == null ? 10 : interval);\n    return interval ? domain(nice(d, interval)) : scale;\n  };\n\n  scale.copy = function() {\n    return copy(scale, calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format));\n  };\n\n  return scale;\n}\n\nexport default function time() {\n  return initRange.apply(calendar(timeTicks, timeTickInterval, timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\n}\n","export default function nice(domain, interval) {\n  domain = domain.slice();\n\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}\n","import {interpolate, interpolateRound} from \"d3-interpolate\";\nimport {identity} from \"./continuous.js\";\nimport {initInterpolator} from \"./init.js\";\nimport {linearish} from \"./linear.js\";\nimport {loggish} from \"./log.js\";\nimport {symlogish} from \"./symlog.js\";\nimport {powish} from \"./pow.js\";\n\nfunction transformer() {\n  var x0 = 0,\n      x1 = 1,\n      t0,\n      t1,\n      k10,\n      transform,\n      interpolator = identity,\n      clamp = false,\n      unknown;\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : interpolator(k10 === 0 ? 0.5 : (x = (transform(x) - t0) * k10, clamp ? Math.max(0, Math.min(1, x)) : x));\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? ([x0, x1] = _, t0 = transform(x0 = +x0), t1 = transform(x1 = +x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0), scale) : [x0, x1];\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, scale) : clamp;\n  };\n\n  scale.interpolator = function(_) {\n    return arguments.length ? (interpolator = _, scale) : interpolator;\n  };\n\n  function range(interpolate) {\n    return function(_) {\n      var r0, r1;\n      return arguments.length ? ([r0, r1] = _, interpolator = interpolate(r0, r1), scale) : [interpolator(0), interpolator(1)];\n    };\n  }\n\n  scale.range = range(interpolate);\n\n  scale.rangeRound = range(interpolateRound);\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t) {\n    transform = t, t0 = t(x0), t1 = t(x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0);\n    return scale;\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .interpolator(source.interpolator())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport default function sequential() {\n  var scale = linearish(transformer()(identity));\n\n  scale.copy = function() {\n    return copy(scale, sequential());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialLog() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, sequentialLog()).base(scale.base());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSymlog() {\n  var scale = symlogish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialSymlog()).constant(scale.constant());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialPow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialPow()).exponent(scale.exponent());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSqrt() {\n  return sequentialPow.apply(null, arguments).exponent(0.5);\n}\n","import * as d3Scale from 'd3-scale';\nimport * as d3Color from 'd3-color';\n\nimport config from '../config';\n\nexport function insertColors(scrobbleList, maxAlbumPlaycount) {\n  const {timeline: {point: {colorValueFactors}, unknownGenreColorRange}, genreGroups} = config;\n  const createColorScale = (range) => d3Scale.scaleSequential()\n    .domain([1, maxAlbumPlaycount])\n    .range(range);\n  const unknownGenreColorScale = createColorScale(unknownGenreColorRange);\n  const genreGroupColorScales = {};\n\n  Object.entries(genreGroups).forEach(\n    ([genreGroup, {colorRange}]) => genreGroupColorScales[genreGroup] = createColorScale(colorRange),\n  );\n\n  return scrobbleList.map((scrobble) => {\n    const {artist: {genreGroup}, album: {playcount}} = scrobble;\n    const colorScale = genreGroupColorScales[genreGroup] || unknownGenreColorScale;\n    const baseColor = colorScale(playcount);\n\n    const color = d3Color.hsl(baseColor);\n    color.s *= colorValueFactors.other.saturation;\n    color.l *= colorValueFactors.other.lightness;\n\n    const highlightedGenreColor = d3Color.hsl(baseColor);\n    highlightedGenreColor.s *= colorValueFactors.genre.saturation;\n    highlightedGenreColor.l *= colorValueFactors.genre.lightness;\n\n    const highlightedArtistColor = d3Color.hsl(baseColor);\n    highlightedArtistColor.s *= colorValueFactors.artist.saturation;\n    highlightedArtistColor.l *= colorValueFactors.artist.lightness;\n\n    const artistLabelColor = d3Color.hsl(baseColor);\n    artistLabelColor.s *= colorValueFactors.artistLabel.saturation;\n    artistLabelColor.l *= colorValueFactors.artistLabel.lightness;\n\n    [\n      color,\n      highlightedGenreColor,\n      highlightedArtistColor,\n      artistLabelColor,\n    ].forEach((c) => {\n      if (c.s > 1) { c.s = 1; }\n      if (c.l > 1) { c.l = 1; }\n    });\n\n    return {\n      ...scrobble,\n      color,\n      highlightedGenreColor,\n      highlightedArtistColor,\n      artistLabelColor,\n    };\n  });\n}\n","const monthNameList = [\n         'Jan', 'Feb',\n  'Mar', 'Apr', 'May',\n  'Jun', 'Jul', 'Aug',\n  'Sep', 'Oct', 'Nov',\n  'Dec',\n];\n\nexport function dateTimeStringToTimestamp(dateTimeString) {\n  // The \"T\" is getting inserted between \"YYYY-MM-DD\" and \"HH:MM\"\n  // to avoid \"invalid date\" errors in mobile browsers.\n  // @see: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse\n  return Date.parse(dateTimeString.replace(' ', 'T'));\n}\n\nexport function dateTimeStringToDateString(dateTimeString) {\n  // \"YYYY-MM-DD\"\n  return dateTimeString.slice(0, 10);\n}\n\nexport function timestampToDateTimeString(timestamp) {\n  const date = new Date(timestamp);\n  const monthName = monthNameList[date.getMonth()];\n  const [day, hours, mins] = [\n    date.getDate(),\n    date.getHours(),\n    date.getMinutes(),\n  ].map((value) => value.toString().padStart(2, '0'));\n\n  return `${monthName} ${day} ${hours}:${mins}`;\n}\n","export function url(strings, ...keys) {\n  return fillTemplate((value) => encodeURIComponent(value).replace(/%20/g, '+'), strings, ...keys);\n}\n\n// @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#Tagged_templates\nfunction fillTemplate(transform, strings, ...keys) {\n  return keys.reduce(\n    (patternParts, key, index) => patternParts.concat(\n      transform ? transform(key) : String(key),\n      strings[index + 1],\n    ),\n    [strings[0]],\n  ).join('');\n}\n","var n=function(t,s,r,e){var u;s[0]=0;for(var h=1;h<s.length;h++){var p=s[h++],a=s[h]?(s[0]|=p?1:2,r[s[h++]]):s[++h];3===p?e[0]=a:4===p?e[1]=Object.assign(e[1]||{},a):5===p?(e[1]=e[1]||{})[s[++h]]=a:6===p?e[1][s[++h]]+=a+\"\":p?(u=t.apply(a,n(t,a,r,[\"\",null])),e.push(u),a[0]?s[0]|=2:(s[h-2]=0,s[h]=u)):e.push(a)}return e},t=new Map;export default function(s){var r=t.get(this);return r||(r=new Map,t.set(this,r)),(r=n(this,r.get(s)||(r.set(s,r=function(n){for(var t,s,r=1,e=\"\",u=\"\",h=[0],p=function(n){1===r&&(n||(e=e.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,\"\")))?h.push(0,n,e):3===r&&(n||e)?(h.push(3,n,e),r=2):2===r&&\"...\"===e&&n?h.push(4,n,0):2===r&&e&&!n?h.push(5,0,!0,e):r>=5&&((e||!n&&5===r)&&(h.push(r,0,e,s),r=6),n&&(h.push(r,n,0,s),r=6)),e=\"\"},a=0;a<n.length;a++){a&&(1===r&&p(),p(a));for(var l=0;l<n[a].length;l++)t=n[a][l],1===r?\"<\"===t?(p(),h=[h],r=3):e+=t:4===r?\"--\"===e&&\">\"===t?(r=1,e=\"\"):e=t+e[0]:u?t===u?u=\"\":e+=t:'\"'===t||\"'\"===t?u=t:\">\"===t?(p(),r=1):r&&(\"=\"===t?(r=5,s=e,e=\"\"):\"/\"===t&&(r<5||\">\"===n[a][l+1])?(p(),3===r&&(h=h[0]),r=h,(h=h[0]).push(2,0,r),r=0):\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t?(p(),r=2):e+=t),3===r&&\"!--\"===e&&(r=4,h=h[0])}return p(),h}(s)),r),arguments,[])).length>1?r:r[0]}\n","// @see: https://github.com/developit/htm#other-uses\n\nimport htm from 'htm';\nimport vhtml from 'vhtml';\n\nexport default htm.bind(vhtml);\n","export default class Collection {\n  constructor(list = []) {\n    this.list = list;\n    this.firstVisibleIndex = 0;\n    this.lastVisibleIndex = this.list.length - 1;\n  }\n\n  reset() {\n    this.list = [];\n    this.firstVisibleIndex = 0;\n    this.lastVisibleIndex = 0;\n  }\n\n  setVisibleIndexRange(firstVisibleIndex, lastVisibleIndex) {\n    this.firstVisibleIndex = firstVisibleIndex;\n    this.lastVisibleIndex = lastVisibleIndex;\n  }\n\n  push(...items) {\n    return this.list.push(...items);\n  }\n\n  getAll() {\n    return this.list;\n  }\n\n  getFirst() {\n    return this.list[0];\n  }\n\n  getLast() {\n    return this.list[this.list.length - 1];\n  }\n\n  getFirstVisible() {\n    return this.list[this.firstVisibleIndex];\n  }\n\n  getLastVisible() {\n    return this.list[this.lastVisibleIndex];\n  }\n\n  forEachVisible(callback) {\n    for (let i = this.firstVisibleIndex; i <= this.lastVisibleIndex; i += 1) {\n      callback(this.list[i]);\n    }\n  }\n\n  findFirst(filter) {\n    return this.list.find(filter);\n  }\n\n  findLast(filter) {\n    for (let i = this.list.length - 1; i >= 0; i -= 1) {\n      const item = this.list[i];\n\n      if (filter(item)) {\n        return item;\n      }\n    }\n\n    return undefined;\n  }\n\n  getAdjacentVisible(index, shift, filter = () => true) {\n    const stepCondition = shift > 0\n      ? () => index < this.lastVisibleIndex\n      : () => index > this.firstVisibleIndex;\n\n    while (stepCondition()) {\n      index += shift;\n      const adjacentItem = this.list[index];\n\n      if (adjacentItem && filter(adjacentItem)) {\n        return adjacentItem;\n      }\n    }\n\n    return undefined;\n  }\n}\n","export default class PointBuffer {\n  constructor(tolerance) {\n    this.tolerance = tolerance;\n    this.buffer = {};\n  }\n\n  reset() {\n    this.buffer = {};\n  }\n\n  forEachPoint(callback) {\n    for (const yi in this.buffer) {\n      const yiBuffer = this.buffer[yi];\n\n      for (const xj in yiBuffer) {\n        callback(xj, yi, yiBuffer[xj]);\n      }\n    }\n  }\n\n  putPoint({x, y, ...point}) {\n    // y-coord is the first lookup index\n    // because in \".getPoint()\" it's faster to locate \"buffer[y]\" entries (rows)\n    // since there are as many rows as the largest artist playcount value,\n    // which is generally less then it would have been columns (x-coords spread)\n    if (!this.buffer[y]) {\n      this.buffer[y] = {};\n    }\n\n    this.buffer[y][x] = point;\n  }\n\n  getPoint(x, y) {\n    const yBuffer = this.buffer[y];\n\n    return yBuffer\n      ? yBuffer[x]\n      : undefined;\n  }\n\n  getPointWithTolerance(x, y) {\n    const xFrom = x - this.tolerance;\n    const xTo = x + this.tolerance;\n    const yFrom = y - this.tolerance;\n    const yTo = y + this.tolerance;\n\n    for (let yi = yFrom; yi <= yTo; yi += 1) {\n      const yiBuffer = this.buffer[yi];\n\n      if (yiBuffer) {\n        for (let xj = xFrom; xj <= xTo; xj += 1) {\n          const point = yiBuffer[xj];\n\n          if (point) {\n            return point;\n          }\n        }\n      }\n    }\n\n    return undefined;\n  }\n}\n","import html from '../lib/html';\nimport config from '../config';\n\nimport './Plot.css';\n\nexport default class Plot {\n  constructor(props) {\n    this.props = props;\n    this.dimensions = null;\n    this.element = null;\n    this.ctx = null;\n  }\n\n  initializeElement() {\n    this.element = document.getElementById('plot');\n  }\n\n  getDimensions() {\n    return this.dimensions;\n  }\n\n  scale() {\n    const {timeline: {plot: {padding}, legend: {height: legendHeight}}} = config;\n    const dpr = window.devicePixelRatio;\n    const width = window.innerWidth;\n    const height = window.innerHeight - (legendHeight + padding);\n\n    this.dimensions = [width, height];\n\n    Object.assign(\n      this.element,\n      {\n        width: width * dpr,\n        height: height * dpr,\n      },\n    );\n\n    Object.assign(\n      this.element.style,\n      {\n        width: `${width}px`,\n        height: `${height}px`,\n      },\n    );\n\n    this.ctx = this.element.getContext('2d', {alpha: false});\n    this.ctx.scale(dpr, dpr);\n  }\n\n  drawBackground() {\n    const {timeline: {plot: {backgroundColor}}} = config;\n    const [width, height] = this.dimensions;\n\n    this.ctx.fillStyle = backgroundColor;\n    this.ctx.fillRect(0, 0, width, height);\n  }\n\n  drawTimeAxis(leftX, rightX, leftTimeX, rightTimeX) {\n    const {timeline: {plot: {padding}, timeAxis: {width, timeFullColor, timeRangeColor}}} = config;\n    const height = this.dimensions[1];\n    const y = height - padding;\n\n    this.ctx.lineWidth = width;\n\n    this.ctx.strokeStyle = timeFullColor;\n    this.ctx.beginPath();\n    this.ctx.moveTo(leftX, y);\n    this.ctx.lineTo(rightX, y);\n    this.ctx.stroke();\n\n    this.ctx.strokeStyle = timeRangeColor;\n    this.ctx.beginPath();\n    this.ctx.moveTo(leftTimeX, y);\n    this.ctx.lineTo(rightTimeX, y);\n    this.ctx.stroke();\n  }\n\n  drawPoint(x, y, color) {\n    const {timeline: {point: {size: pointSize}}} = config;\n    const {pointHalfSize} = this.props;\n\n    this.ctx.fillStyle = color;\n    this.ctx.fillRect(\n      x - pointHalfSize,\n      y - pointHalfSize,\n      pointSize,\n      pointSize,\n    );\n  }\n\n  afterRender() {\n    this.initializeElement();\n  }\n\n  render() {\n    return html`\n      <canvas\n        id=\"plot\"\n        class=\"Plot\"\n      />\n    `;\n  }\n}\n","export function createProxyMethod(decorator, decorated) {\n  return (method) => (decorator[method] = (...args) => decorated[method].apply(decorated, args));\n}\n","import {createProxyMethod} from '../utils/decorator';\n\nexport default class PlotInteractive {\n  constructor(props, plot) {\n    this.props = props;\n    this.plot = plot;\n\n    [\n      'getDimensions',\n      'scale',\n      'drawBackground',\n      'drawTimeAxis',\n      'drawPoint',\n      'render',\n    ].forEach(createProxyMethod(this, this.plot));\n  }\n\n  subscribe() {\n    const {onMouseDown, onMouseUp, onMouseOut, onMouseMove, onWheel} = this.props;\n    const {element} = this.plot;\n\n    element.addEventListener('mousedown', onMouseDown);\n    element.addEventListener('mouseup', onMouseUp);\n    element.addEventListener('mouseout', onMouseOut);\n    element.addEventListener('mousemove', onMouseMove);\n    element.addEventListener('wheel', onWheel);\n  }\n\n  unsubscribe() {\n    const {onMouseDown, onMouseUp, onMouseOut, onMouseMove, onWheel} = this.props;\n    const {element} = this.plot;\n\n    element.removeEventListener('mousedown', onMouseDown);\n    element.removeEventListener('mouseup', onMouseUp);\n    element.removeEventListener('mouseout', onMouseOut);\n    element.removeEventListener('mousemove', onMouseMove);\n    element.removeEventListener('wheel', onWheel);\n  }\n\n  afterRender() {\n    this.plot.afterRender();\n    this.subscribe();\n  }\n}\n","import html from '../lib/html';\nimport config from '../config';\n\nimport './TimeAxisLabel.css';\n\nexport default class TimeAxisLabel {\n  constructor(props) {\n    this.props = props;\n    this.element = null;\n  }\n\n  initializeElement() {\n    const {\n      timeline: {\n        plot: {padding: plotPadding},\n        timeAxis: {width: timeAxisWidth},\n        legend: {height: legendHeight},\n      },\n    } = config;\n    const {id, isMostTop} = this.props;\n    const height = plotPadding - timeAxisWidth / 2;\n\n    this.element = document.getElementById(id);\n\n    Object.assign(\n      this.element.style,\n      {\n        top: `calc(100% - ${(height + legendHeight + plotPadding)}px)`,\n        lineHeight: `${height}px`,\n      },\n    );\n\n    if (isMostTop) {\n      this.element.classList.add('TimeAxisLabel--most-top');\n    }\n  }\n\n  clear() {\n    this.element.innerText = '';\n  }\n\n  renderText(x, text, areaWidth) {\n    const {timeline: {point: {size: padding}}} = config;\n\n    this.element.innerText = text;\n\n    // text must be rendered (added to DOM) before element dimensions are measured\n    const halfWidth = Math.ceil(this.element.offsetWidth / 2);\n\n    const [left, right] = (() => {\n      // stick to left\n      if (x - halfWidth < padding) {\n        return [`${padding}px`, 'auto'];\n      }\n\n      // stick to right\n      if (x + halfWidth > areaWidth - padding) {\n        return ['auto', `${padding}px`];\n      }\n\n      // center under \"x\"\n      return [`${x - halfWidth}px`, 'auto'];\n    })();\n\n    Object.assign(\n      this.element.style,\n      {\n        left,\n        right,\n      },\n    );\n  }\n\n  afterRender() {\n    this.initializeElement();\n  }\n\n  render() {\n    const {id} = this.props;\n\n    return html`\n      <aside\n        id=${id}\n        class=\"TimeAxisLabel\"\n      />\n    `;\n  }\n}\n","/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import classNames from 'classnames';\nimport html from '../lib/html';\n\nimport './YearNavigation.css';\n\nexport default class YearNavigation {\n  constructor(props) {\n    this.props = props;\n  }\n\n  renderYearLink(year) {\n    const {currentYear} = this.props;\n\n    return html`\n      <a\n        class=${classNames(\n          'YearNavigation__year-link',\n          {\n            'YearNavigation__year-link--current': currentYear === year,\n          },\n        )}\n        href=\"#${year}\"\n      >\n        ${year}\n      </a>\n    `;\n  }\n\n  render() {\n    const {yearList} = this.props;\n\n    return html`\n      <nav\n        class=\"YearNavigation list-box list-box--with-bg\"\n      >\n        ${yearList.map(this.renderYearLink, this)}\n      </nav>\n    `;\n  }\n}\n","import html from '../lib/html';\n\nimport config from '../config';\nimport {dateTimeStringToDateString} from '../utils/date';\nimport {url} from '../utils/string';\n\nimport './InfoBox.css';\n\nexport default class InfoBox {\n  constructor(props) {\n    this.props = props;\n\n    this.introMessageElementList = null;\n    this.scrobbleInfoElementList = null;\n\n    this.artistNameElement = null;\n    this.albumNameElement = null;\n    this.trackNameElement = null;\n  }\n\n  initializeElements() {\n    this.introMessageElementList = document.querySelectorAll('.InfoBox__field--intro-message');\n    this.scrobbleInfoElementList = document.querySelectorAll('.InfoBox__field--scrobble-info');\n\n    this.artistNameElement = document.getElementById('info-box-field-artist-name');\n    this.albumNameElement = document.getElementById('info-box-field-album-name');\n    this.trackNameElement = document.getElementById('info-box-field-track-name');\n  }\n\n  showIntroMessage() {\n    this.introMessageElementList.forEach((element) => element.style.display = 'block');\n    this.scrobbleInfoElementList.forEach((element) => element.style.display = 'none');\n  }\n\n  hideIntroMessage() {\n    this.introMessageElementList.forEach((element) => element.style.display = 'none');\n  }\n\n  getLastfmLinks() {\n    const {links} = config;\n    const {dates, summary} = this.props;\n\n    const baseUrl = `${links.lastfm.url}library`;\n    const fromDateString = dateTimeStringToDateString(dates.firstScrobbleDate);\n    const toDateString = dateTimeStringToDateString(dates.lastScrobbleDate);\n    const queryString = `from=${fromDateString}&to=${toDateString}`;\n\n    return {\n      scrobbleListLink: html`\n        <a href=\"${baseUrl}?${queryString}\">${summary.scrobbleCount}</a>\n      `,\n      artistListLink: html`\n        <a href=\"${baseUrl}/artists?${queryString}\">${summary.artistCount}</a>\n      `,\n      albumListLink: html`\n        <a href=\"${baseUrl}/albums?${queryString}\">${summary.albumCount}</a>\n      `,\n      trackListLink: html`\n        <a href=\"${baseUrl}/tracks?${queryString}\">${summary.trackCount}</a>\n      `,\n    };\n  }\n\n  renderScrobbleInfo({artist, album, track}, totals) {\n    const artistUrl = url`https://www.last.fm/music/${artist.name}`;\n    const albumUrl = url`https://www.last.fm/music/${artist.name}/${album.name}`;\n    const trackUrl = url`https://www.last.fm/music/${artist.name}/_/${track.name}`;\n\n    this.artistNameElement.style.display = 'block';\n    this.artistNameElement.innerHTML = html`\n      <span>\n        <a href=${artistUrl}>${artist.name}</a> <small>(${artist.playcount}/${totals.artist})</small>\n      </span>\n    `;\n\n    this.albumNameElement.style.display = album.name\n      ? 'block'\n      : 'none';\n    this.albumNameElement.innerHTML = album.name\n      ? html`\n        <span>\n          <a href=${albumUrl}>${album.name}</a> <small>(${album.playcount}/${totals.album})</small>\n        </span>\n      `\n      : '';\n\n    this.trackNameElement.style.display = 'block';\n    this.trackNameElement.innerHTML = html`\n      <span>\n        <a href=${trackUrl}>${track.name}</a> <small>(${track.playcount}/${totals.track})</small>\n      </span>\n    `;\n  }\n\n  afterRender() {\n    this.initializeElements();\n  }\n\n  render() {\n    const {summary} = this.props;\n    const {\n      scrobbleListLink,\n      artistListLink,\n      albumListLink,\n      trackListLink,\n    } = this.getLastfmLinks();\n\n    return html`\n      <aside\n        class=\"InfoBox list-box list-box--with-rows list-box--with-bg\"\n      >\n        <p\n          class=\"InfoBox__field--intro-message list-box__field\"\n        >\n          ${scrobbleListLink} scrobbles (${summary.scrobblePerDayCount} per day)\n        </p>\n\n        <p\n          class=\"InfoBox__field--intro-message list-box__field\"\n        >\n          ${artistListLink} artists, ${albumListLink} albums, ${trackListLink} tracks\n        </p>\n\n        <p\n          id=\"info-box-field-artist-name\"\n          class=\"InfoBox__field--scrobble-info list-box__field\"\n        />\n\n        <p\n          id=\"info-box-field-album-name\"\n          class=\"InfoBox__field--scrobble-info list-box__field\"\n        />\n\n        <p\n          id=\"info-box-field-track-name\"\n          class=\"InfoBox__field--scrobble-info list-box__field\"\n        />\n      </aside>\n    `;\n  }\n}\n","import html from '../lib/html';\nimport config from '../config';\n\nimport './ExternalLinks.css';\n\nexport default class ExternalLinks {\n  render() {\n    const {links: {github, twitter}} = config;\n\n    return html`\n      <aside\n        class=\"ExternalLinks list-box list-box--with-rows list-box--with-bg\"\n      >\n        <p\n          class=\"ExternalLinks__field list-box__field\"\n        >\n          <a\n            class=\"ExternalLinks__link\"\n            href=${twitter.url}\n          >\n            ${twitter.text}\n          </a>\n        </p>\n\n        <p\n          class=\"ExternalLinks__field list-box__field\"\n        >\n          <a\n            class=\"ExternalLinks__link\"\n            href=${github.url}\n          >\n            ${github.text}\n          </a>\n        </p>\n\n        <p\n          class=\"ExternalLinks__field list-box__field\"\n        >\n          <a\n            class=\"ExternalLinks__link ExternalLinks__link--grid\"\n            href=\"https://supportukrainenow.org/\"\n          >\n            <span>#StandWithUkraine<//>\n\n            <img\n              class=\"ExternalLinks__flag\"\n              src=\"flag-ua-1x1.svg\" alt=\"Flag of Ukraine\"\n            />\n          </a>\n        </p>\n      </aside>\n    `;\n  }\n}\n","import * as d3Scale from 'd3-scale';\nimport html from '../lib/html';\n\nimport config from '../config';\nimport {getGenreSortedList} from '../dataset/genre';\n\nimport './Legend.css';\n\nexport default class Legend {\n  constructor(props) {\n    this.props = props;\n    this.element = null;\n    this.genreElementCollection = [];\n    this.genreList = getGenreSortedList(props.scrobbleList);\n    this.heightScale = this.getHeightScale();\n  }\n\n  initializeElements() {\n    this.element = document.getElementById('legend');\n    this.genreElementCollection = this.element.getElementsByClassName('Legend__genre');\n  }\n\n  getHeightScale() {\n    const {timeline: {legend: {height}}} = config;\n    const maxPlaycount = Math.max(...this.genreList.map(({playcount}) => playcount));\n\n    return d3Scale.scaleLinear()\n      .domain([0, maxPlaycount])\n      .range([0, height]);\n  }\n\n  afterRender() {\n    this.initializeElements();\n    requestAnimationFrame(this.setGenreElementsHeight.bind(this));\n  }\n\n  setGenreElementsHeight() {\n    for (let i = 0; i < this.genreElementCollection.length; i += 1) {\n      const genreElement = this.genreElementCollection[i];\n      const {playcount} = this.genreList[i];\n      const height = Math.max(this.heightScale(playcount), 1);\n\n      genreElement.style.height = `${height}px`;\n    }\n  }\n\n  renderGenre({name, artistCount, playcount, color}) {\n    const {scrobbleList} = this.props;\n    const title = [\n      `${artistCount} artist${artistCount > 1 ? 's' : ''}`,\n      `${playcount} scrobble${playcount > 1 ? 's' : ''} (${(100 * playcount / scrobbleList.length).toFixed(1)}%)`,\n    ].join(', ');\n\n    return html`\n      <section\n        class=\"Legend__genre\"\n        style=\"background-color: ${color}\"\n        title=${title}\n      >\n        <span\n          class=\"Legend__genre-caption\"\n        >\n          ${name}\n        </span>\n      </section>\n    `;\n  }\n\n  render() {\n    return html`\n      <nav\n        id=\"legend\"\n        class=\"Legend\"\n      >\n        ${this.genreList.map(this.renderGenre, this)}\n      </nav>\n    `;\n  }\n}\n","import {createProxyMethod} from '../utils/decorator';\n\nexport default class LegendInteractive {\n  constructor(props, legend) {\n    this.props = props;\n    this.legend = legend;\n    this.highlightedGenreIndex = null;\n    this.eventListeners = {};\n\n    createProxyMethod(this, this.legend)('render');\n  }\n\n  subscribe() {\n    const {onGenreMouseEnter} = this.props;\n    const {genreElementCollection, genreList} = this.legend;\n\n    for (let i = 0; i < genreElementCollection.length; i += 1) {\n      const genreElement = genreElementCollection[i];\n      const {name} = genreList[i];\n      const onMouseEnter = () => onGenreMouseEnter(name);\n\n      this.eventListeners[name] = onMouseEnter;\n      genreElement.addEventListener('mouseenter', onMouseEnter);\n    }\n  }\n\n  unsubscribe() {\n    const {genreElementCollection, genreList} = this.legend;\n\n    for (let i = 0; i < genreElementCollection.length; i += 1) {\n      const genreElement = genreElementCollection[i];\n      const {name} = genreList[i];\n\n      genreElement.removeEventListener('mouseenter', this.eventListeners[name]);\n    }\n  }\n\n  highlightGenre(genre) {\n    const {genreElementCollection, genreList} = this.legend;\n    const genreIndex = genreList.findIndex(({name}) => name === genre);\n    const genreElement = genreElementCollection[genreIndex];\n    const {highlightedColor} = genreList[genreIndex];\n\n    genreElement.classList.add('Legend__genre--highlighted');\n    genreElement.style.backgroundColor = highlightedColor;\n\n    this.highlightedGenreIndex = genreIndex;\n  }\n\n  removeGenreHighlight() {\n    if (this.highlightedGenreIndex !== null) {\n      const {genreElementCollection, genreList} = this.legend;\n      const genreElement = genreElementCollection[this.highlightedGenreIndex];\n      const {color} = genreList[this.highlightedGenreIndex];\n\n      genreElement.classList.remove('Legend__genre--highlighted');\n      genreElement.style.backgroundColor = color;\n\n      this.highlightedGenreIndex = null;\n    }\n  }\n\n  afterRender() {\n    this.legend.afterRender();\n    this.subscribe();\n  }\n}\n","import html from '../lib/html';\nimport config from '../config';\n\nimport './ArtistLabelCollection.css';\n\nexport default class ArtistLabelCollection {\n  constructor() {\n    this.element = null;\n    this.highlightedLabelElement = null;\n    this.bboxList = [];\n  }\n\n  initializeElements() {\n    this.element = document.getElementById('artist-labels');\n  }\n\n  removeAllLabels() {\n    this.element.innerHTML = '';\n    this.highlightedLabelElement = null;\n    this.bboxList = [];\n  }\n\n  getLabelMinX(x, width, areaWidth) {\n    const {timeline: {labels: {areaPadding}}} = config;\n    const halfWidth = Math.ceil(width / 2);\n\n    // stick to left\n    if (x - halfWidth < areaPadding) {\n      return areaPadding;\n    }\n\n    // stick to right\n    if (x + halfWidth > areaWidth - areaPadding) {\n      return areaWidth - areaPadding - width;\n    }\n\n    // center at \"x\"\n    return x - halfWidth;\n  }\n\n  getLabelMinY(minX, maxX, y, height) {\n    const {timeline: {point: {size: pointSize}, labels: {margin}}} = config;\n\n    // filtering out bounding boxes that don't collide by X\n    const bboxListVertical = this.bboxList\n      .filter((bbox) => !(\n        minX > bbox.maxX + margin ||\n        maxX < bbox.minX - margin\n      ))\n      .sort((a, b) => b.minY - a.minY);\n\n    let maxY = y - pointSize;\n    let minY = maxY - height;\n\n    // checking if each bbox collides by Y and shifting up by its height when it does\n    for (const bbox of bboxListVertical) {\n      if (!(\n        maxY < bbox.minY - margin ||\n        minY > bbox.maxY + margin\n      )) {\n        maxY = bbox.minY - margin;\n        minY = maxY - height;\n      }\n    }\n\n    return minY;\n  }\n\n  renderLabel({x, y, text, scrobble: {artistLabelColor}}, areaWidth, isHighlighted = false) {\n    const {timeline: {labels: {highlightedColor}}} = config;\n    const labelElement = document.createElement('span');\n    const color = isHighlighted\n      ? highlightedColor\n      : artistLabelColor;\n\n    labelElement.classList.add('ArtistLabelCollection__label');\n    labelElement.innerText = text;\n\n    if (isHighlighted) {\n      if (this.highlightedLabelElement) {\n        this.highlightedLabelElement.classList.remove('ArtistLabelCollection__label--highlighted');\n      }\n\n      labelElement.classList.add('ArtistLabelCollection__label--highlighted');\n      this.highlightedLabelElement = labelElement;\n    }\n\n    this.element.appendChild(labelElement);\n\n    // text must be rendered (added to DOM) before element dimensions are measured\n    const {offsetWidth, offsetHeight} = labelElement;\n\n    const minX = this.getLabelMinX(x, offsetWidth, areaWidth);\n    const maxX = minX + offsetWidth;\n    const minY = this.getLabelMinY(minX, maxX, y, offsetHeight);\n    const maxY = minY + offsetHeight;\n\n    this.bboxList.push({\n      minX,\n      minY,\n      maxX,\n      maxY,\n    });\n\n    Object.assign(\n      labelElement.style,\n      {\n        top: `${minY}px`,\n        left: `${minX}px`,\n        color,\n      },\n    );\n  }\n\n  afterRender() {\n    this.initializeElements();\n  }\n\n  render() {\n    const {timeline: {plot: {padding: plotPadding}, legend: {height: legendHeight}}} = config;\n\n    return html`\n      <aside\n        id=\"artist-labels\"\n        class=\"ArtistLabelCollection\"\n        style=\"bottom: ${legendHeight + plotPadding}px\"\n      />\n    `;\n  }\n}\n","import * as d3Scale from 'd3-scale';\nimport html from '../lib/html';\n\nimport config from '../config';\n\nimport Collection from '../stores/Collection';\nimport PointBuffer from '../stores/PointBuffer';\n\nimport Plot from '../components/Plot';\nimport PlotInteractive from '../components/PlotInteractive';\nimport TimeAxisLabel from '../components/TimeAxisLabel';\nimport YearNavigation from '../components/YearNavigation';\nimport InfoBox from '../components/InfoBox';\nimport ExternalLinks from '../components/ExternalLinks';\nimport Legend from '../components/Legend';\nimport LegendInteractive from '../components/LegendInteractive';\nimport ArtistLabelCollection from '../components/ArtistLabelCollection';\n\nexport default class Timeline {\n  constructor(props) {\n    const {timeline: {point: {size: scrobbleSize}}} = config;\n    const {scrobbleList} = props;\n\n    this.props = props;\n    this.children = {};\n\n    this.scrobbleHalfSize = Math.ceil(scrobbleSize / 2);\n\n    this.scrobbleCollection = new Collection(scrobbleList);\n    this.pointBuffer = new PointBuffer(this.scrobbleHalfSize);\n\n    // to be initialized after render, since it relies on plot dimensions\n    this.plotScales = {};\n  }\n\n  initializeChildrenComponents() {\n    const {timeline: {timeAxis: {tickLabelCount}}} = config;\n    const {\n      summary,\n      yearList,\n      scrobbleList,\n      onPlotMouseDown,\n      onPlotMouseUp,\n      onPlotMouseOut,\n      onPlotMouseMove,\n      onPlotWheel,\n      onLegendGenreMouseEnter,\n    } = this.props;\n\n    this.children.plot = new PlotInteractive(\n      {\n        onMouseDown: onPlotMouseDown,\n        onMouseUp: onPlotMouseUp,\n        onMouseOut: onPlotMouseOut,\n        onMouseMove: onPlotMouseMove,\n        onWheel: onPlotWheel,\n      },\n      new Plot({\n        pointHalfSize: this.scrobbleHalfSize,\n      }),\n    );\n\n    this.children.yearNavigation = new YearNavigation({\n      currentYear: document.location.hash.slice(1),\n      yearList,\n    });\n\n    this.children.infoBox = new InfoBox({\n      dates: {\n        firstScrobbleDate: this.scrobbleCollection.getFirst().date,\n        lastScrobbleDate: this.scrobbleCollection.getLast().date,\n      },\n      summary,\n    });\n\n    this.children.externalLinks = new ExternalLinks();\n\n    this.children.selectedScrobbleTimeLabel = new TimeAxisLabel({\n      id: 'selected-scrobble-time-label',\n      isMostTop: true,\n    });\n\n    for (let index = 0; index < tickLabelCount; index += 1) {\n      this.children[`timeTickLabel${index}`] = new TimeAxisLabel({\n        id: `time-tick-label--${index}`,\n      });\n    }\n\n    this.children.legend = new LegendInteractive(\n      {\n        onGenreMouseEnter: onLegendGenreMouseEnter,\n      },\n      new Legend({\n        scrobbleList,\n      }),\n    );\n\n    this.children.artistLabelCollection = new ArtistLabelCollection();\n  }\n\n  getPlotScales() {\n    const {\n      timeline: {\n        plot: {padding: plotPadding},\n        point: {size: scrobbleSize, maxMargin: scrobbleMaxMargin},\n        timeAxis: {width: timeAxisWidth},\n        labels: {areaPadding: labelAreaPadding, highlightedHeight: highlightedLabelHeight},\n      },\n    } = config;\n\n    const {summary} = this.props;\n    const {plot} = this.children;\n    const [width, height] = plot.getDimensions();\n\n    // plot height calculation is ensuring equal vertical gaps between points\n    const plotBottom = height - plotPadding - timeAxisWidth / 2 - scrobbleSize;\n    const plotMaxHeight = plotBottom - labelAreaPadding - highlightedLabelHeight - scrobbleSize;\n    let scrobbleMargin = scrobbleMaxMargin;\n    let plotHeight = plotMaxHeight;\n    while (scrobbleMargin >= 0) {\n      const plotHeightNext = (summary.maxArtistPlaycount - 1) * (scrobbleSize + scrobbleMargin);\n\n      if (plotHeightNext > plotMaxHeight) {\n        scrobbleMargin -= 1;\n      } else {\n        plotHeight = plotHeightNext;\n        break;\n      }\n    }\n    const plotTop = plotBottom - plotHeight;\n    const plotLeft = plotPadding;\n    const plotRight = width - plotPadding;\n\n    const fullTimeRangeScale = d3Scale.scaleTime()\n      .domain([\n        this.scrobbleCollection.getFirst().timestamp,\n        this.scrobbleCollection.getLast().timestamp,\n      ])\n      .rangeRound([plotLeft, plotRight]);\n\n    const timeRangeScale = d3Scale.scaleTime()\n      .domain([\n        this.scrobbleCollection.getFirstVisible().timestamp,\n        this.scrobbleCollection.getLastVisible().timestamp,\n      ])\n      .rangeRound([plotLeft, plotRight]);\n\n    const artistPlaycountScale = d3Scale.scaleLinear()\n      .domain([1, summary.maxArtistPlaycount])\n      .rangeRound([plotBottom, plotTop]);\n\n    return {\n      timeAxis: fullTimeRangeScale,\n      x: timeRangeScale,\n      y: artistPlaycountScale,\n    };\n  }\n\n  createScrobblePoint(scrobble) {\n    const {timestamp, artist} = scrobble;\n\n    return {\n      x: this.plotScales.x(timestamp),\n      y: this.plotScales.y(artist.playcount),\n      scrobble,\n    };\n  }\n\n  draw() {\n    const {timeline: {timeAxis: {tickLabelCount}}} = config;\n    const {onScrobblePointCreate} = this.props;\n    const {timeAxis: fullTimeRangeScale, x: timeRangeScale} = this.plotScales;\n    const {plot} = this.children;\n    const plotWidth = plot.getDimensions()[0];\n\n    const [leftDate, rightDate] = timeRangeScale.domain();\n    const [leftX, rightX] = timeRangeScale.range();\n    const leftTimeX = fullTimeRangeScale(leftDate);\n    const rightTimeX = fullTimeRangeScale(rightDate);\n\n    const tickList = timeRangeScale.ticks(plotWidth > 600 ? 12 : 4);\n    const tickFormat = timeRangeScale.tickFormat();\n\n    plot.drawBackground();\n\n    this.scrobbleCollection.forEachVisible((scrobble) => {\n      const point = this.createScrobblePoint(scrobble);\n\n      // Points with same coords are getting overridden in the buffer and drawn outside of this loop.\n      // This allows to avoid flickering during zooming, because newer points always win.\n      this.pointBuffer.putPoint(point);\n\n      // However, the \"onScrobblePointCreate()\" callback is called on every point,\n      // regardless if it remains in the buffer.\n      // This allows to store them elsewhere for accessing on user interaction\n      // (e.g. highlighting all points with a given artist).\n      onScrobblePointCreate(point);\n    });\n\n    this.pointBuffer.forEachPoint((x, y, {scrobble: {color}}) => plot.drawPoint(x, y, color));\n\n    plot.drawTimeAxis(leftX, rightX, leftTimeX, rightTimeX);\n\n    tickList.forEach((tick, index) => {\n      this.children[`timeTickLabel${index}`].renderText(timeRangeScale(tick), tickFormat(tick), plotWidth);\n    });\n\n    for (let index = tickList.length; index < tickLabelCount; index += 1) {\n      this.children[`timeTickLabel${index}`].clear();\n    }\n  }\n\n  // things needed for the first render\n  beforeRender() {\n    this.initializeChildrenComponents();\n  }\n\n  // things to initialize after the first render\n  afterRender() {\n    const {plot} = this.children;\n\n    Object.values(this.children).forEach((child) => {\n      if (typeof child.afterRender === 'function') {\n        child.afterRender();\n      }\n    });\n\n    plot.scale();\n    this.plotScales = this.getPlotScales();\n  }\n\n  render() {\n    return html`\n      <main>\n        ${Object.values(this.children).map((child) => child.render())}\n      </main>\n    `;\n  }\n}\n","export function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n","export default class Registry {\n  constructor(getKey) {\n    this.getKey = getKey;\n    this.registry = {};\n  }\n\n  reset() {\n    this.registry = {};\n  }\n\n  putItem(item) {\n    const key = this.getKey(item);\n\n    if (!key) {\n      return;\n    }\n\n    if (!this.registry[key]) {\n      this.registry[key] = [];\n    }\n\n    this.registry[key].push(item);\n  }\n\n  getItemList(key) {\n    return this.registry[key] || [];\n  }\n\n  filter(filter) {\n    const registry = {};\n\n    for (const key in this.registry) {\n      const itemList = this.registry[key];\n\n      if (filter(itemList)) {\n        registry[key] = itemList;\n      }\n    }\n\n    return registry;\n  }\n}\n","import * as d3Scale from 'd3-scale';\n\nimport config from '../config';\nimport {createProxyMethod} from '../utils/decorator';\nimport {clamp} from '../utils/number';\nimport {timestampToDateTimeString} from '../utils/date';\n\nimport Collection from '../stores/Collection';\nimport Registry from '../stores/Registry';\n\nexport default class TimelineInteractive {\n  constructor(props, timeline) {\n    this.props = props;\n    this.timeline = timeline;\n\n    this.selectedScrobble = null;\n    this.pointCollectionHighlighted = new Collection();\n    this.genrePointRegistry = new Registry(({scrobble: {artist: {genre}}}) => genre);\n    this.artistPointRegistry = new Registry(({scrobble: {artist: {name}}}) => name);\n    this.isPlotMouseDown = false;\n    this.plotMouseX = null;\n\n    Object.assign(\n      this.timeline.props,\n      {\n        onScrobblePointCreate: this.handleScrobblePointCreate.bind(this),\n        onPlotMouseDown: this.handlePlotMouseDown.bind(this),\n        onPlotMouseUp: this.handlePlotMouseUpOrOut.bind(this),\n        onPlotMouseOut: this.handlePlotMouseUpOrOut.bind(this),\n        onPlotMouseMove: this.handlePlotMouseMove.bind(this),\n        onPlotWheel: this.handlePlotWheel.bind(this),\n        onLegendGenreMouseEnter: this.handleLegendGenreMouseEnter.bind(this),\n      },\n    );\n\n    [\n      'draw',\n      'beforeRender',\n      'render',\n    ].forEach(createProxyMethod(this, this.timeline));\n\n    this.handleWindowResize = this.handleWindowResize.bind(this);\n    this.handleDocumentKeydown = this.handleDocumentKeydown.bind(this);\n  }\n\n  subscribe() {\n    window.addEventListener('resize', this.handleWindowResize);\n    document.addEventListener('keydown', this.handleDocumentKeydown);\n  }\n\n  unsubscribe() {\n    Object.values(this.timeline.children).forEach((child) => {\n      if (typeof child.unsubscribe === 'function') {\n        child.unsubscribe();\n      }\n    });\n\n    window.removeEventListener('resize', this.handleWindowResize);\n    document.removeEventListener('keydown', this.handleDocumentKeydown);\n  }\n\n  resetScales() {\n    const {plot} = this.timeline.children;\n\n    plot.scale();\n    this.timeline.plotScales = this.timeline.getPlotScales();\n  }\n\n  resetState() {\n    const {pointBuffer} = this.timeline;\n\n    pointBuffer.reset();\n    this.genrePointRegistry.reset();\n    this.artistPointRegistry.reset();\n    this.pointCollectionHighlighted.reset();\n    this.selectedScrobble = null;\n  }\n\n  resetUi() {\n    const {infoBox, selectedScrobbleTimeLabel, legend, artistLabelCollection} = this.timeline.children;\n\n    infoBox.showIntroMessage();\n    selectedScrobbleTimeLabel.clear();\n    legend.removeGenreHighlight();\n    artistLabelCollection.removeAllLabels();\n  }\n\n  highlightGenre(genre, artistNameToSkip = null) {\n    const {plot} = this.timeline.children;\n    const lastPoints = {};\n\n    this.genrePointRegistry.getItemList(genre).forEach((point) => {\n      const {x, y, scrobble: {artist: {name: artistName}, highlightedGenreColor}} = point;\n\n      if (artistName !== artistNameToSkip) {\n        this.pointCollectionHighlighted.push({x, y});\n        lastPoints[artistName] = point;\n        plot.drawPoint(x, y, highlightedGenreColor);\n      }\n    });\n\n    return lastPoints;\n  }\n\n  highlightArtist({index, artist, track}) {\n    const {timeline: {point: {selectedColor: selectedTrackColor}}} = config;\n    const {plot, selectedScrobbleTimeLabel} = this.timeline.children;\n    const [plotWidth] = plot.getDimensions();\n    const sameTrackPointList = [];\n    let lastPoint = null;\n\n    this.artistPointRegistry.getItemList(artist.name).forEach((point) => {\n      const {\n        x,\n        y,\n        scrobble: {\n          index: scrobbleGlobalIndex,\n          timestamp,\n          track: {name},\n          highlightedArtistColor,\n        },\n      } = point;\n\n      this.pointCollectionHighlighted.push({x, y});\n      lastPoint = point;\n\n      // skipping same track scrobbles, those will be rendered after the main loop (to appear on top)\n      if (name === track.name) {\n        sameTrackPointList.push({x, y});\n      } else {\n        plot.drawPoint(x, y, highlightedArtistColor);\n      }\n\n      if (scrobbleGlobalIndex === index) {\n        selectedScrobbleTimeLabel.renderText(x, timestampToDateTimeString(timestamp), plotWidth);\n      }\n    });\n\n    sameTrackPointList.forEach(({x, y}) => plot.drawPoint(x, y, selectedTrackColor));\n\n    return lastPoint;\n  }\n\n  removePointsHighlight() {\n    const {pointBuffer} = this.timeline;\n    const {plot} = this.timeline.children;\n\n    this.pointCollectionHighlighted.getAll().forEach(\n      ({x, y}) => plot.drawPoint(x, y, pointBuffer.getPoint(x, y).scrobble.color),\n    );\n    this.pointCollectionHighlighted.reset();\n  }\n\n  selectGenre(genre) {\n    const {legend} = this.timeline.children;\n\n    // clean old\n    this.selectedScrobble = null;\n    this.removePointsHighlight();\n    this.resetUi();\n\n    // show new\n    this.renderArtistsLabels(this.highlightGenre(genre));\n    legend.highlightGenre(genre);\n  }\n\n  selectScrobble(scrobble) {\n    const {summary} = this.props;\n    const {plot, infoBox, legend, artistLabelCollection} = this.timeline.children;\n    const [plotWidth] = plot.getDimensions();\n    const {artist} = scrobble;\n    const isNewArtist = !(this.selectedScrobble && this.selectedScrobble.artist.name === artist.name);\n    let otherArtistsLastScrobblePoints = {};\n\n    this.selectedScrobble = scrobble;\n    this.removePointsHighlight();\n    infoBox.hideIntroMessage();\n\n    // there's no need to re-render genre-related labels if selected artist didn't change\n    if (isNewArtist) {\n      legend.removeGenreHighlight();\n      artistLabelCollection.removeAllLabels();\n    }\n\n    if (artist.genre) {\n      otherArtistsLastScrobblePoints = this.highlightGenre(artist.genre, artist.name);\n\n      if (isNewArtist) {\n        legend.highlightGenre(artist.genre);\n      }\n    }\n\n    // artist scrobbles are rendered on top of genre scrobbles\n    const artistLastScrobblePoint = this.highlightArtist(scrobble);\n\n    // artist label is inserted before other artists labels\n    if (isNewArtist) {\n      artistLabelCollection.renderLabel({text: artist.name, ...artistLastScrobblePoint}, plotWidth, true);\n      this.renderArtistsLabels(otherArtistsLastScrobblePoints);\n    }\n\n    infoBox.renderScrobbleInfo(scrobble, summary.getScrobbleTotals(scrobble));\n  }\n\n  selectVerticallyAdjacentScrobble(shift) {\n    const {scrobbleCollection} = this.timeline;\n\n    if (this.selectedScrobble) {\n      const adjacentScrobble = scrobbleCollection.getAdjacentVisible(this.selectedScrobble.index, shift);\n\n      if (adjacentScrobble) {\n        this.selectScrobble(adjacentScrobble);\n      }\n    }\n  }\n\n  selectHorizontallyAdjacentScrobble(shift) {\n    const {scrobbleCollection} = this.timeline;\n\n    if (this.selectedScrobble) {\n      const filter = ({artist: {playcount}}) => playcount === this.selectedScrobble.artist.playcount;\n      const adjacentScrobble = scrobbleCollection.getAdjacentVisible(this.selectedScrobble.index, shift, filter);\n\n      if (adjacentScrobble) {\n        this.selectScrobble(adjacentScrobble);\n      }\n    }\n  }\n\n  selectScrobbleUnderMouse(event) {\n    const {pointBuffer} = this.timeline;\n    const {offsetX: x, offsetY: y} = event;\n    const point = pointBuffer.getPointWithTolerance(x, y);\n\n    if (point && point.scrobble !== this.selectedScrobble) {\n      this.selectScrobble(point.scrobble);\n    }\n  }\n\n  panPlot(event) {\n    const {scrobbleCollection, plotScales: {x: timeRangeScale}} = this.timeline;\n    const {offsetX: x} = event;\n    const {timestamp: minTimestamp} = scrobbleCollection.getFirst();\n    const {timestamp: maxTimestamp} = scrobbleCollection.getLast();\n    const [leftTimestamp, rightTimestamp] = timeRangeScale.domain().map((date) => Date.parse(date));\n\n    if (rightTimestamp - leftTimestamp >= maxTimestamp - minTimestamp) {\n      return;\n    }\n\n    let timestampDiff = timeRangeScale.invert(this.plotMouseX) - timeRangeScale.invert(x);\n\n    if (!timestampDiff) {\n      return;\n    }\n\n    if (rightTimestamp + timestampDiff > maxTimestamp) {\n      timestampDiff = maxTimestamp - rightTimestamp;\n    } else if (leftTimestamp + timestampDiff < minTimestamp) {\n      timestampDiff = minTimestamp - leftTimestamp;\n    }\n\n    if (timestampDiff) {\n      this.updatePlotTimeRange(\n        leftTimestamp + timestampDiff,\n        rightTimestamp + timestampDiff,\n      );\n    }\n  }\n\n  zoomPlot(event) {\n    const {timeline: {zoomDeltaFactor, minTimeRange, plot: {padding: plotPadding}}} = config;\n    const {scrobbleCollection, plotScales: {x: timeRangeScale}} = this.timeline;\n    const {plot} = this.timeline.children;\n    const {offsetX, deltaY} = event;\n    const timeRangeZoomed = timeRangeScale.domain();\n\n    const [plotWidth] = plot.getDimensions();\n    const plotWidthPadded = plotWidth - 2 * plotPadding;\n\n    const timeScale = d3Scale.scaleLinear()\n      .domain([0, plotWidthPadded])\n      .rangeRound(timeRangeZoomed);\n\n    const xTimestamp = timeScale(clamp(offsetX - plotPadding, ...timeScale.domain()));\n    const zoomFactor = 1 - deltaY * zoomDeltaFactor;\n    const leftTimeDiff = (xTimestamp - timeRangeZoomed[0]) / zoomFactor;\n    const rightTimeDiff = (timeRangeZoomed[1] - xTimestamp) / zoomFactor;\n\n    if (leftTimeDiff + rightTimeDiff >= minTimeRange) {\n      this.updatePlotTimeRange(\n        Math.max(\n          xTimestamp - leftTimeDiff,\n          scrobbleCollection.getFirst().timestamp,\n        ),\n        Math.min(\n          xTimestamp + rightTimeDiff,\n          scrobbleCollection.getLast().timestamp,\n        ),\n      );\n    }\n  }\n\n  updatePlotTimeRange(leftTimestamp, rightTimestamp) {\n    const {scrobbleCollection, plotScales: {x: timeRangeScale}} = this.timeline;\n    const {index: leftIndex} = scrobbleCollection.findFirst(({timestamp}) => timestamp >= leftTimestamp);\n    const {index: rightIndex} = scrobbleCollection.findLast(({timestamp}) => timestamp <= rightTimestamp);\n\n    timeRangeScale.domain([\n      leftTimestamp,\n      rightTimestamp,\n    ]);\n\n    scrobbleCollection.setVisibleIndexRange(\n      leftIndex,\n      rightIndex,\n    );\n\n    this.resetState();\n    this.draw();\n    this.resetUi();\n  }\n\n  handleScrobblePointCreate(point) {\n    this.genrePointRegistry.putItem(point);\n    this.artistPointRegistry.putItem(point);\n  }\n\n  handleWindowResize() {\n    // A timeout handle is used for throttling and dealing with mobile device rotation.\n    // On some mobile browsers, the \"resize\" event is triggered before window dimensions are changed.\n    clearTimeout(this.windowResizeTimeoutHandle);\n\n    this.windowResizeTimeoutHandle = setTimeout(\n      () => {\n        this.resetScales();\n        this.resetState();\n        this.draw();\n        this.resetUi();\n      },\n      100,\n    );\n  }\n\n  handleDocumentKeydown(event) {\n    switch (event.key) {\n      case 'Escape': return this.handleEscKeydown();\n      case 'ArrowDown': return this.selectVerticallyAdjacentScrobble(-1);\n      case 'ArrowUp': return this.selectVerticallyAdjacentScrobble(1);\n      case 'ArrowLeft': return this.selectHorizontallyAdjacentScrobble(-1);\n      case 'ArrowRight': return this.selectHorizontallyAdjacentScrobble(1);\n    }\n  }\n\n  handleEscKeydown() {\n    this.selectedScrobble = null;\n    this.removePointsHighlight();\n    this.resetUi();\n  }\n\n  handlePlotMouseDown(event) {\n    const {button} = event;\n\n    // main button (usually the left button)\n    if (button === 0) {\n      this.isPlotMouseDown = true;\n    }\n  }\n\n  handlePlotMouseUpOrOut() {\n    this.isPlotMouseDown = false;\n  }\n\n  handlePlotMouseMove(event) {\n    const {offsetX} = event;\n\n    if (this.isPlotMouseDown) {\n      this.panPlot(event);\n    } else {\n      this.selectScrobbleUnderMouse(event);\n    }\n\n    this.plotMouseX = offsetX;\n  }\n\n  handlePlotWheel(event) {\n    event.preventDefault();\n    this.zoomPlot(event);\n  }\n\n  handleLegendGenreMouseEnter(genre) {\n    this.selectGenre(genre);\n  }\n\n  afterRender() {\n    this.timeline.afterRender();\n    this.subscribe();\n  }\n\n  renderArtistsLabels(points) {\n    const {plot, artistLabelCollection} = this.timeline.children;\n    const [plotWidth] = plot.getDimensions();\n\n    // points are sorted by Y coord (i.e. artist total playcount),\n    // so labels are also sorted and are getting placed closer to their points\n    Object.entries(points)\n      .map(([text, point]) => ({text, ...point}))\n      .sort((a, b) => b.y - a.y)\n      .forEach((point) => artistLabelCollection.renderLabel(point, plotWidth, false));\n  }\n}\n","import Router, {parse} from 'micro-conductor';\n\nimport config from './config';\n\nimport getSummary from './dataset/summary';\nimport {insertGenres} from './dataset/genre';\nimport {insertColors} from './dataset/color';\nimport {uncompress} from './dataset/scrobble';\n\nimport {dateTimeStringToTimestamp} from './utils/date';\nimport {url} from './utils/string';\n\nimport Timeline from './containers/Timeline';\nimport TimelineInteractive from './containers/TimelineInteractive';\n\nimport './app.css';\nimport './app-theme.css';\n\nconst dataCache = {};\nlet currentTimeline = null;\n\nfunction retrieveAll(urlList) {\n  return Promise.all(urlList.map(retrieve));\n}\n\nfunction retrieve(url) {\n  if (dataCache[url]) {\n    return Promise.resolve(dataCache[url]);\n  }\n\n  return fetch(url)\n    .then((response) => response.json())\n    .then((data) => dataCache[url] = data);\n}\n\nfunction transform([yearList, scrobbleListOriginal, artistsByGenres]) {\n  const scrobbleList = scrobbleListOriginal.map((compressedScrobble, index) => ({\n    ...uncompress(compressedScrobble),\n    index,\n    timestamp: dateTimeStringToTimestamp(compressedScrobble[0]),\n  }));\n  const summary = getSummary(scrobbleList);\n\n  return {\n    yearList,\n    summary,\n    scrobbleList: insertColors(\n      insertGenres(scrobbleList, artistsByGenres),\n      summary.maxAlbumPlaycount,\n    ),\n  };\n}\n\nfunction render(props) {\n  const timeline = new TimelineInteractive(props, new Timeline(props));\n\n  if (currentTimeline) {\n    currentTimeline.unsubscribe();\n  }\n\n  timeline.beforeRender();\n  document.body.innerHTML = timeline.render();\n  timeline.afterRender();\n  timeline.draw();\n\n  currentTimeline = timeline;\n\n  return timeline;\n}\n\nfunction logMissingGenreArtists(timeline) {\n  if (!config.debug) {\n    return;\n  }\n\n  Object.entries(\n    timeline.artistPointRegistry\n      .filter((itemList) => !('genre' in itemList[0].scrobble.artist)),\n  )\n    .filter((entry) => entry[1].length > 1)\n    .sort((a, b) => b[1].length - a[1].length)\n    .map(([artistName, artistScrobbleList]) => console.log(\n      artistScrobbleList.length,\n      artistName,\n      url`https://www.last.fm/music/${artistName}`,\n    ));\n}\n\nfunction createTimeline(year) {\n  retrieveAll([\n    config.dataUrls.yearList,\n    `${config.dataUrls.yearsBase}/${year}.json`,\n    config.dataUrls.artistsByGenres,\n  ])\n    .then(transform)\n    .then(render)\n    .then(logMissingGenreArtists);\n}\n\nconst router = new Router({\n  '': () => document.location.hash = config.defaultDataYear,\n  'all': createTimeline,\n  [parse`${/\\d{4}/}`]: createTimeline,\n});\n\nrouter.start();\n","export function uncompress([\n  date,\n  trackName,\n  trackPlaycount,\n  albumName,\n  albumPlaycount,\n  artistName,\n  artistPlaycount,\n]) {\n  return {\n    date,\n    track: {\n      name: trackName,\n      playcount: trackPlaycount,\n    },\n    album: {\n      name: albumName,\n      playcount: albumPlaycount,\n    },\n    artist: {\n      name: artistName,\n      playcount: artistPlaycount,\n    },\n  };\n}\n","export default function getSummary(scrobbleList) {\n  const registry = {};\n\n  scrobbleList.forEach(({artist, album, track}) => {\n    if (!registry[artist.name]) {\n      // The same track can appear on different albums, so track playcount values are not nested into albums.\n      // It matches aggregation logic in \"music-stats/scripts/src/ETL/transformers/aggregate.ts\".\n      registry[artist.name] = {\n        albums: {},\n        tracks: {},\n      };\n    }\n\n    registry[artist.name].playcount = artist.playcount;\n\n    // album name could be empty\n    if (album.name) {\n      registry[artist.name].albums[album.name] = album.playcount;\n    }\n\n    registry[artist.name].tracks[track.name] = track.playcount;\n  });\n\n  const artistCount = Object.keys(registry).length;\n  let albumCount = 0;\n  let trackCount = 0;\n  let maxArtistPlaycount = 0;\n  let maxAlbumPlaycount = 0;\n\n  for (const artistName in registry) {\n    const {playcount, albums, tracks} = registry[artistName];\n\n    albumCount += Object.keys(albums).length;\n    trackCount += Object.keys(tracks).length;\n\n    if (playcount > maxArtistPlaycount) {\n      maxArtistPlaycount = playcount;\n    }\n\n    for (const albumName in albums) {\n      const albumPlaycount = albums[albumName];\n\n      if (albumPlaycount > maxAlbumPlaycount) {\n        maxAlbumPlaycount = albumPlaycount;\n      }\n    }\n  }\n\n  const scrobbleCount = scrobbleList.length;\n  const msInDay = 24 * 60 * 60 * 1000;\n  const dayCount = Math.ceil((scrobbleList[scrobbleList.length - 1].timestamp - scrobbleList[0].timestamp) / msInDay);\n  const scrobblePerDayCount = Math.round(10 * scrobbleCount / dayCount) / 10;\n\n  return {\n    artistCount,\n    albumCount,\n    trackCount,\n    maxArtistPlaycount,\n    maxAlbumPlaycount,\n    scrobbleCount,\n    scrobblePerDayCount,\n\n    getScrobbleTotals: ({artist, album, track}) => {\n      const {playcount, albums, tracks} = registry[artist.name];\n\n      return {\n        artist: playcount,\n        album: albums[album.name],\n        track: tracks[track.name],\n      };\n    },\n  };\n}\n"],"names":["getPatternPart","key","RegExp","source","Router","routes","context","_classCallCheck","this","notFound","navigate","bind","toNavigate","window","addEventListener","removeEventListener","normalizedHash","constructor","normalize","location","hash","route","matches","match","concat","apply","call","value","replace","cssColors","config","debug","defaultDataYear","dataUrls","yearList","yearsBase","artistsByGenres","links","lastfm","url","text","github","twitter","timeline","zoomDeltaFactor","minTimeRange","plot","padding","backgroundColor","point","size","maxMargin","selectedColor","colorValueFactors","other","saturation","lightness","genre","artistLabel","artist","labels","areaPadding","margin","highlightedHeight","highlightedColor","timeAxis","width","tickLabelCount","timeFullColor","timeRangeColor","legend","height","unknownGenreColorRange","genreGroups","Classical","colorRange","genres","Jazzy","Folk","Rock","Metal","Punk","define$1","factory","prototype","extend","parent","definition","Object","create","Color","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","format","m","l","trim","toLowerCase","exec","length","parseInt","rgbn","Rgb","rgba","hsla","hasOwnProperty","NaN","n","r","g","b","a","rgbConvert","o","opacity","rgb_formatHex","hex","rgb_formatRgb","isNaN","Math","max","min","round","toString","h","s","Hsl","hslConvert","hsl","arguments","hsl2rgb","m1","m2","insertGenres","scrobbleList","genreGroupsByGenres","genresByArtists","_loop","genreGroup","forEach","_loop2","artistName","map","scrobble","name","_objectSpread","ascending","bisector","f","delta","compare","left","x","lo","hi","mid","d","ascendingComparator","center","i","right","define","copy","channels","assign","displayable","formatHsl","brighter","k","pow","darker","bisectRight","bisect","e10","sqrt","e5","e2","tickIncrement","start","stop","count","step","power","floor","log","LN10","error","tickStep","step0","abs","step1","initRange","domain","range","initInterpolator","interpolator","constant","gamma","y","nogamma","t","exponential","linear","rgbGamma","end","colorRgb","numberArray","c","slice","genericArray","nb","na","Array","date$1","Date","setTime","interpolateNumber","object","_typeof","reA","reB","string","bi","am","bm","bs","lastIndex","q","index","push","number","one","zero","join","interpolate","date","ArrayBuffer","isView","DataView","isArray","valueOf","interpolateRound","unit","identity","bimap","d0","d1","r0","r1","polymap","j","reverse","target","clamp","unknown","transformer","transform","untransform","piecewise","output","input","interpolateValue","rescale","clamper","scale","invert","_","from","rangeRound","u","continuous","formatDecimalParts","p","toExponential","indexOf","coefficient","exponent","prefixExponent","re","formatSpecifier","specifier","Error","FormatSpecifier","fill","align","sign","symbol","comma","precision","type","undefined","formatRounded","formatTypes","toFixed","toLocaleString","e","toPrecision","X","toUpperCase","locale","formatPrefix","prefixes","formatLocale$1","grouping","thousands","group","Number","substring","currencyPrefix","currency","currencySuffix","decimal","numerals","formatNumerals","String","percent","minus","nan","newFormat","prefix","test","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","out","i1","i0","formatTrim","charCodeAt","Infinity","tickFormat","precisionPrefix","precisionRound","precisionFixed","linearish","ticks","isFinite","nice","prestep","maxIter","ceil","formatLocale","t0","t1","newInterval","floori","offseti","field","interval","offset","previous","filter","every","millisecond","millisecond$1","second","getMilliseconds","getUTCSeconds","utcSecond","minute","getSeconds","durationSecond","getMinutes","timeMinute","hour","durationMinute","getHours","timeHour","day","setHours","setDate","getDate","getTimezoneOffset","durationHour","timeDay","weekday","getDay","durationDay","sunday","monday","thursday","month","setMonth","getMonth","getFullYear","timeMonth","year","setFullYear","timeYear","utcMinute","setUTCSeconds","getUTCMinutes","utcMinute$1","utcHour","setUTCMinutes","getUTCHours","utcHour$1","utcDay","setUTCHours","setUTCDate","getUTCDate","utcDay$1","utcWeekday","getUTCDay","utcSunday","utcMonday","utcThursday","utcMonth","setUTCMonth","getUTCMonth","getUTCFullYear","utcMonth$1","utcYear","setUTCFullYear","utcYear$1","ticker","week","tickIntervals","tickInterval","_ref2","_slicedToArray","_tickIntervals","_ref","_ticker2","utcWeek","_ticker4","timeTicks","timeTickInterval","localDate","H","M","S","L","utcDate","UTC","newDate","timeFormat","pads","numberRe","percentRe","requoteRe","pad","requote","formatRe","names","formatLookup","Map","parseWeekdayNumberSunday","w","parseWeekdayNumberMonday","parseWeekNumberSunday","U","parseWeekNumberISO","V","parseWeekNumberMonday","W","parseFullYear","parseYear","parseZone","Z","parseQuarter","parseMonthNumber","parseDayOfMonth","parseDayOfYear","parseHour24","parseMinutes","parseSeconds","parseMilliseconds","parseMicroseconds","parseLiteralPercent","parseUnixTimestamp","Q","parseUnixTimestampSeconds","formatDayOfMonth","formatHour24","formatHour12","formatDayOfYear","formatMilliseconds","formatMicroseconds","formatMonthNumber","formatMinutes","formatSeconds","formatWeekdayNumberMonday","formatWeekNumberSunday","timeSunday","dISO","timeThursday","formatWeekNumberISO","formatWeekdayNumberSunday","formatWeekNumberMonday","timeMonday","formatYear","formatYearISO","formatFullYear","formatFullYearISO","formatZone","z","formatUTCDayOfMonth","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","getUTCMilliseconds","formatUTCMicroseconds","formatUTCMonthNumber","formatUTCMinutes","formatUTCSeconds","formatUTCWeekdayNumberMonday","dow","formatUTCWeekNumberSunday","UTCdISO","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCYearISO","formatUTCFullYear","formatUTCFullYearISO","formatUTCZone","formatLiteralPercent","formatUnixTimestamp","formatUnixTimestampSeconds","calendar","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatWeek","formatMonth","x0","x1","time","timeWeek","timeSecond","k10","_ref4","sequential","insertColors","maxAlbumPlaycount","_config$timeline","createColorScale","d3Scale","unknownGenreColorScale","genreGroupColorScales","entries","playcount","album","baseColor","d3Color","highlightedGenreColor","highlightedArtistColor","artistLabelColor","locale_dateTime","dateTime","locale_date","locale_time","locale_periods","periods","locale_weekdays","days","locale_shortWeekdays","shortDays","locale_months","months","locale_shortMonths","shortMonths","periodRe","periodLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","formatShortWeekday","A","formatWeekday","formatShortMonth","B","G","I","formatPeriod","formatQuarter","Y","utcFormats","formatUTCShortWeekday","formatUTCWeekday","formatUTCShortMonth","formatUTCMonth","formatUTCPeriod","formatUTCQuarter","parses","get","parseSpecifier","charAt","newParse","parse","utcFormat","utcParse","defaultLocale","monthNameList","dateTimeStringToDateString","dateTimeString","strings","_len","keys","_key","fillTemplate","encodeURIComponent","_len2","_key2","reduce","patternParts","html","set","Collection","list","firstVisibleIndex","lastVisibleIndex","_this$list","callback","find","item","shift","stepCondition","_this","adjacentItem","PointBuffer","tolerance","buffer","yi","yiBuffer","xj","_objectWithoutProperties","_excluded","yBuffer","xFrom","xTo","yFrom","yTo","Plot","props","dimensions","element","ctx","document","getElementById","legendHeight","dpr","devicePixelRatio","innerWidth","innerHeight","style","getContext","alpha","_this$dimensions","fillStyle","fillRect","leftX","rightX","leftTimeX","rightTimeX","_config$timeline2","_config$timeline2$tim","lineWidth","strokeStyle","beginPath","moveTo","lineTo","stroke","pointSize","pointHalfSize","initializeElement","_templateObject","_taggedTemplateLiteral","createProxyMethod","decorator","decorated","method","args","PlotInteractive","_this$props","onMouseDown","onMouseUp","onMouseOut","onMouseMove","onWheel","_this$props2","afterRender","subscribe","TimeAxisLabel","plotPadding","timeAxisWidth","id","isMostTop","top","lineHeight","classList","add","innerText","areaWidth","halfWidth","offsetWidth","hasOwn","classNames","classes","arg","argType","inner","module","exports","default","YearNavigation","currentYear","renderYearLink","InfoBox","introMessageElementList","scrobbleInfoElementList","artistNameElement","albumNameElement","trackNameElement","querySelectorAll","display","dates","summary","baseUrl","fromDateString","firstScrobbleDate","toDateString","lastScrobbleDate","queryString","scrobbleListLink","scrobbleCount","artistListLink","artistCount","albumListLink","albumCount","trackListLink","trackCount","totals","track","artistUrl","albumUrl","trackUrl","innerHTML","_templateObject8","_templateObject9","_templateObject10","initializeElements","_this$getLastfmLinks","getLastfmLinks","_templateObject11","scrobblePerDayCount","ExternalLinks","Legend","genreElementCollection","genreList","artistPlaycounts","_ref$artist","genreRecord","genreGroupConfig","console","warn","sort","getGenreSortedList","heightScale","getHeightScale","getElementsByClassName","maxPlaycount","_toConsumableArray","requestAnimationFrame","setGenreElementsHeight","genreElement","title","_templateObject2","renderGenre","LegendInteractive","highlightedGenreIndex","eventListeners","onGenreMouseEnter","_this$legend","onMouseEnter","_this$legend2","_this$legend3","genreIndex","findIndex","_this$legend4","remove","ArtistLabelCollection","highlightedLabelElement","bboxList","minX","maxX","_step","bboxListVertical","bbox","minY","maxY","_iterator","_createForOfIteratorHelper","done","err","isHighlighted","labelElement","createElement","appendChild","offsetHeight","getLabelMinX","getLabelMinY","Timeline","scrobbleSize","children","scrobbleHalfSize","scrobbleCollection","pointBuffer","plotScales","onPlotMouseDown","onPlotMouseUp","onPlotMouseOut","onPlotMouseMove","onPlotWheel","onLegendGenreMouseEnter","yearNavigation","infoBox","getFirst","getLast","externalLinks","selectedScrobbleTimeLabel","artistLabelCollection","scrobbleMargin","_config$timeline$poin","scrobbleMaxMargin","_config$timeline$labe","labelAreaPadding","highlightedLabelHeight","_plot$getDimensions2","getDimensions","plotBottom","plotMaxHeight","plotHeight","plotHeightNext","maxArtistPlaycount","plotTop","plotLeft","plotRight","timestamp","getFirstVisible","getLastVisible","onScrobblePointCreate","_this$plotScales","fullTimeRangeScale","timeRangeScale","plotWidth","_timeRangeScale$domai2","leftDate","rightDate","_timeRangeScale$range2","tickList","drawBackground","forEachVisible","createScrobblePoint","putPoint","forEachPoint","drawPoint","drawTimeAxis","tick","renderText","clear","initializeChildrenComponents","values","child","getPlotScales","render","Registry","getKey","registry","itemList","TimelineInteractive","selectedScrobble","pointCollectionHighlighted","genrePointRegistry","artistPointRegistry","isPlotMouseDown","plotMouseX","handleScrobblePointCreate","handlePlotMouseDown","handlePlotMouseUpOrOut","handlePlotMouseMove","handlePlotWheel","handleLegendGenreMouseEnter","handleWindowResize","handleDocumentKeydown","unsubscribe","reset","_this$timeline$childr","showIntroMessage","removeGenreHighlight","removeAllLabels","artistNameToSkip","lastPoints","getItemList","_point$scrobble","_ref3","_this2","selectedTrackColor","_this$timeline$childr2","sameTrackPointList","lastPoint","scrobbleGlobalIndex","_point$scrobble2","monthName","_map2","padStart","hours","mins","timestampToDateTimeString","getAll","_ref5","getPoint","removePointsHighlight","resetUi","renderArtistsLabels","highlightGenre","_this$timeline$childr3","isNewArtist","otherArtistsLastScrobblePoints","hideIntroMessage","artistLastScrobblePoint","highlightArtist","renderLabel","renderScrobbleInfo","getScrobbleTotals","adjacentScrobble","getAdjacentVisible","selectScrobble","_this3","_ref6","event","offsetX","offsetY","getPointWithTolerance","_this$timeline","minTimestamp","maxTimestamp","_timeRangeScale$domai","leftTimestamp","rightTimestamp","timestampDiff","updatePlotTimeRange","_this$timeline2","deltaY","timeRangeZoomed","plotWidthPadded","timeScale","xTimestamp","zoomFactor","leftTimeDiff","rightTimeDiff","_this$timeline3","leftIndex","findFirst","_ref7","rightIndex","findLast","_ref8","setVisibleIndexRange","resetState","draw","putItem","_this4","clearTimeout","windowResizeTimeoutHandle","setTimeout","resetScales","handleEscKeydown","selectVerticallyAdjacentScrobble","selectHorizontallyAdjacentScrobble","button","panPlot","selectScrobbleUnderMouse","preventDefault","zoomPlot","selectGenre","points","_this$timeline$childr4","_ref9","_ref10","dataCache","currentTimeline","retrieve","Promise","resolve","fetch","then","response","json","data","scrobbleListOriginal","compressedScrobble","uncompress","albums","tracks","albumName","albumPlaycount","dayCount","_registry$artist$name","getSummary","beforeRender","body","logMissingGenreArtists","createTimeline","urlList","all","_defineProperty"],"mappings":"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"}
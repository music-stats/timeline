"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function s(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function d(e){return e instanceof RegExp?e.source:null==e?".*":e}var m=function(){function e(t,n){r(this,e),this.routes=t||{},this.context=n||this,this.notFound=null,this.navigate=this.navigate.bind(this)}return o(e,[{key:"start",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];window.addEventListener("hashchange",this.navigate),e&&this.navigate()}},{key:"stop",value:function(){window.removeEventListener("hashchange",this.navigate)}},{key:"navigate",value:function(){var e=this.constructor.normalize(window.location.hash);for(var t in this.routes){var n=e.match(new RegExp("^".concat(t,"$")));if(n)return this.routes[t].apply(this.context,n)}if("function"==typeof this.notFound)return this.notFound.call(this.context,e)}}],[{key:"normalize",value:function(e){return e.replace(/^#|\/*$/g,"")}}]),e}(),b="#fff",p={debug:!1,defaultDataYear:"2023",dataUrls:{yearList:"data/years.json",yearsBase:"data/years",artistsByGenres:"data/artists-by-genres.json"},links:{lastfm:{url:"https://www.last.fm/user/markhovskiy/",text:"markhovskiy"},github:{url:"https://github.com/music-stats/timeline/",text:"music-stats/timeline"}},timeline:{zoomDeltaFactor:.01,minTimeRange:864e5,plot:{padding:12,backgroundColor:"#283038"},point:{size:3,maxMargin:1,selectedColor:b,colorValueFactors:{other:{saturation:.5,lightness:.6},genre:{saturation:1.1,lightness:1},artistLabel:{saturation:1.4,lightness:1.6},artist:{saturation:1.4,lightness:1.8}}},labels:{areaPadding:4,margin:1,highlightedHeight:16,highlightedColor:b},timeAxis:{width:2,tickLabelCount:40,timeFullColor:"#484848",timeRangeColor:"#686868"},legend:{height:150},unknownGenreColorRange:["#525252","#bdbdbd"]},genreGroups:{Classical:{colorRange:["#bdbdbd","#f0f0f0"],genres:["Classical","Tango"]},"Electronic, Pop":{colorRange:["#cc4c02","#fec44f"],genres:["Ambient","Darkwave","Dream Pop","Electronic","Indie Pop","Industrial","Pop","Singer-songwriter","Trip Hop"]},Jazzy:{colorRange:["#fec44f","#fff7bc"],genres:["Blues","Funk","Hip-hop","Jazz","Low Rock","Reggae","Rock And Roll","Rockabilly","Soul"]},Folk:{colorRange:["#238b45","#a1d99b"],genres:["Acoustic","Bluegrass","Dark Country","Dark Folk","Folk Metal","Folk Rock","Folk","Freak Folk","Ukrainian Retro"]},Rock:{colorRange:["#2171b5","#9ecae1"],genres:["Alternative Rock","Classic Rock","Gothic Rock","Indie Rock","Industrial Rock","Instrumental Virtuoso","Pop Rock","Post-rock","Progressive Rock","Stoner Rock"]},Metal:{colorRange:["#88419d","#9ebcda"],genres:["Black Metal","Death Metal","Deathcore","Doom Metal","Gothic Metal","Groove Metal","Heavy Metal","Industrial Metal","Melodic Black Metal","Melodic Death Metal","Metalcore","Nu Metal","Post-black","Power Metal","Progressive Death Metal","Progressive Metal","Sludge Metal","Symphonic Metal","Thrash Metal"]},Punk:{colorRange:["#ce1256","#c994c7"],genres:["Grunge","Hardcore","Post-hardcore","Post-punk","Proto-punk","Punk Rock","Screamo","Ska Punk","Ska"]}}};function v(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function y(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function w(){}var k=.7,x=1/k,M="\\s*([+-]?\\d+)\\s*",L="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",C="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",S=/^#([0-9a-f]{3,8})$/,E=new RegExp("^rgb\\(".concat(M,",").concat(M,",").concat(M,"\\)$")),T=new RegExp("^rgb\\(".concat(C,",").concat(C,",").concat(C,"\\)$")),D=new RegExp("^rgba\\(".concat(M,",").concat(M,",").concat(M,",").concat(L,"\\)$")),P=new RegExp("^rgba\\(".concat(C,",").concat(C,",").concat(C,",").concat(L,"\\)$")),A=new RegExp("^hsl\\(".concat(L,",").concat(C,",").concat(C,"\\)$")),N=new RegExp("^hsla\\(".concat(L,",").concat(C,",").concat(C,",").concat(L,"\\)$")),R={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function U(){return this.rgb().formatHex()}function H(){return this.rgb().formatRgb()}function j(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=S.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?F(t):3===n?new _(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?O(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?O(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=E.exec(e))?new _(t[1],t[2],t[3],1):(t=T.exec(e))?new _(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=D.exec(e))?O(t[1],t[2],t[3],t[4]):(t=P.exec(e))?O(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=A.exec(e))?q(t[1],t[2]/100,t[3]/100,1):(t=N.exec(e))?q(t[1],t[2]/100,t[3]/100,t[4]):R.hasOwnProperty(e)?F(R[e]):"transparent"===e?new _(NaN,NaN,NaN,0):null}function F(e){return new _(e>>16&255,e>>8&255,255&e,1)}function O(e,t,n,r){return r<=0&&(e=t=n=NaN),new _(e,t,n,r)}function I(e){return e instanceof w||(e=j(e)),e?new _((e=e.rgb()).r,e.g,e.b,e.opacity):new _}function _(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function z(){return"#".concat(V(this.r)).concat(V(this.g)).concat(V(this.b))}function Y(){var e=G(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(B(this.r),", ").concat(B(this.g),", ").concat(B(this.b)).concat(1===e?")":", ".concat(e,")"))}function G(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function B(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function V(e){return((e=B(e))<16?"0":"")+e.toString(16)}function q(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new X(e,t,n,r)}function W(e){if(e instanceof X)return new X(e.h,e.s,e.l,e.opacity);if(e instanceof w||(e=j(e)),!e)return new X;if(e instanceof X)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,l=o-i,s=(o+i)/2;return l?(a=t===o?(n-r)/l+6*(n<r):n===o?(r-t)/l+2:(t-n)/l+4,l/=s<.5?o+i:2-o-i,a*=60):l=s>0&&s<1?0:a,new X(a,l,s,e.opacity)}function $(e,t,n,r){return 1===arguments.length?W(e):new X(e,t,n,null==r?1:r)}function X(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Z(e){return(e=(e||0)%360)<0?e+360:e}function J(e){return Math.max(0,Math.min(1,e||0))}function K(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Q(e,n){var r=p.genreGroups,i={},o={},a=function(e){r[e].genres.forEach((function(t){return i[t]=e}))};for(var l in r)a(l);var s=function(e){n[e].forEach((function(t){return o[t]=e}))};for(var u in n)s(u);return e.map((function(e){var n=o[e.artist.name],r=i[n];return t(t({},e),n&&{artist:t(t({},e.artist),{},{genreGroup:r,genre:n})})}))}function ee(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function te(e){var t=e,n=e;function r(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r}return 1===e.length&&(t=function(t,n){return e(t)-n},n=function(e){return function(t,n){return ee(e(t),n)}}(e)),{left:r,center:function(e,n,i,o){null==i&&(i=0),null==o&&(o=e.length);var a=r(e,n,i,o-1);return a>i&&t(e[a-1],n)>-t(e[a],n)?a-1:a},right:function(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;n(e[o],t)>0?i=o:r=o+1}return r}}}v(w,j,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:U,formatHex:U,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return W(this).formatHsl()},formatRgb:H,toString:H}),v(_,(function(e,t,n,r){return 1===arguments.length?I(e):new _(e,t,n,null==r?1:r)}),y(w,{brighter:function(e){return e=null==e?x:Math.pow(x,e),new _(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?k:Math.pow(k,e),new _(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new _(B(this.r),B(this.g),B(this.b),G(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:z,formatHex:z,formatHex8:function(){return"#".concat(V(this.r)).concat(V(this.g)).concat(V(this.b)).concat(V(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:Y,toString:Y})),v(X,$,y(w,{brighter:function(e){return e=null==e?x:Math.pow(x,e),new X(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?k:Math.pow(k,e),new X(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new _(K(e>=240?e-240:e+120,i,r),K(e,i,r),K(e<120?e+240:e-120,i,r),this.opacity)},clamp:function(){return new X(Z(this.h),J(this.s),J(this.l),G(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=G(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(Z(this.h),", ").concat(100*J(this.s),"%, ").concat(100*J(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));var ne=te(ee).right;te((function(e){return null===e?NaN:+e})).center;var re=ne,ie=Math.sqrt(50),oe=Math.sqrt(10),ae=Math.sqrt(2);function le(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=ie?10:o>=oe?5:o>=ae?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=ie?10:o>=oe?5:o>=ae?2:1)}function se(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=ie?i*=10:o>=oe?i*=5:o>=ae&&(i*=2),t<e?-i:i}function ue(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function ce(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}function he(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function fe(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ge(){}var de=.7,me=1/de,be="\\s*([+-]?\\d+)\\s*",pe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ve="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ye=/^#([0-9a-f]{3,8})$/,we=new RegExp("^rgb\\("+[be,be,be]+"\\)$"),ke=new RegExp("^rgb\\("+[ve,ve,ve]+"\\)$"),xe=new RegExp("^rgba\\("+[be,be,be,pe]+"\\)$"),Me=new RegExp("^rgba\\("+[ve,ve,ve,pe]+"\\)$"),Le=new RegExp("^hsl\\("+[pe,ve,ve]+"\\)$"),Ce=new RegExp("^hsla\\("+[pe,ve,ve,pe]+"\\)$"),Se={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ee(){return this.rgb().formatHex()}function Te(){return this.rgb().formatRgb()}function De(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ye.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Pe(t):3===n?new Ue(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Ae(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Ae(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=we.exec(e))?new Ue(t[1],t[2],t[3],1):(t=ke.exec(e))?new Ue(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=xe.exec(e))?Ae(t[1],t[2],t[3],t[4]):(t=Me.exec(e))?Ae(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Le.exec(e))?Oe(t[1],t[2]/100,t[3]/100,1):(t=Ce.exec(e))?Oe(t[1],t[2]/100,t[3]/100,t[4]):Se.hasOwnProperty(e)?Pe(Se[e]):"transparent"===e?new Ue(NaN,NaN,NaN,0):null}function Pe(e){return new Ue(e>>16&255,e>>8&255,255&e,1)}function Ae(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ue(e,t,n,r)}function Ne(e){return e instanceof ge||(e=De(e)),e?new Ue((e=e.rgb()).r,e.g,e.b,e.opacity):new Ue}function Re(e,t,n,r){return 1===arguments.length?Ne(e):new Ue(e,t,n,null==r?1:r)}function Ue(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function He(){return"#"+Fe(this.r)+Fe(this.g)+Fe(this.b)}function je(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Fe(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Oe(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new _e(e,t,n,r)}function Ie(e){if(e instanceof _e)return new _e(e.h,e.s,e.l,e.opacity);if(e instanceof ge||(e=De(e)),!e)return new _e;if(e instanceof _e)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,l=o-i,s=(o+i)/2;return l?(a=t===o?(n-r)/l+6*(n<r):n===o?(r-t)/l+2:(t-n)/l+4,l/=s<.5?o+i:2-o-i,a*=60):l=s>0&&s<1?0:a,new _e(a,l,s,e.opacity)}function _e(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function ze(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}he(ge,De,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Ee,formatHex:Ee,formatHsl:function(){return Ie(this).formatHsl()},formatRgb:Te,toString:Te}),he(Ue,Re,fe(ge,{brighter:function(e){return e=null==e?me:Math.pow(me,e),new Ue(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?de:Math.pow(de,e),new Ue(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:He,formatHex:He,formatRgb:je,toString:je})),he(_e,(function(e,t,n,r){return 1===arguments.length?Ie(e):new _e(e,t,n,null==r?1:r)}),fe(ge,{brighter:function(e){return e=null==e?me:Math.pow(me,e),new _e(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?de:Math.pow(de,e),new _e(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ue(ze(e>=240?e-240:e+120,i,r),ze(e,i,r),ze(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Ye=function(e){return function(){return e}};function Ge(e){return 1==(e=+e)?Be:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Ye(isNaN(t)?n:t)}}function Be(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Ye(isNaN(e)?t:e)}var Ve=function e(t){var n=Ge(t);function r(e,t){var r=n((e=Re(e)).r,(t=Re(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=Be(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function qe(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function We(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=et(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function $e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Xe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ze(e,t){var r,i={},o={};for(r in null!==e&&"object"===n(e)||(e={}),null!==t&&"object"===n(t)||(t={}),t)r in e?i[r]=et(e[r],t[r]):o[r]=t[r];return function(e){for(r in i)o[r]=i[r](e);return o}}var Je=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ke=new RegExp(Je.source,"g");function Qe(e,t){var n,r,i,o=Je.lastIndex=Ke.lastIndex=0,a=-1,l=[],s=[];for(e+="",t+="";(n=Je.exec(e))&&(r=Ke.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),l[a]?l[a]+=i:l[++a]=i),(n=n[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,s.push({i:a,x:Xe(n,r)})),o=Ke.lastIndex;return o<t.length&&(i=t.slice(o),l[a]?l[a]+=i:l[++a]=i),l.length<2?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)l[(n=s[r]).i]=n.x(e);return l.join("")})}function et(e,t){var r,i,o=n(t);return null==t||"boolean"===o?Ye(t):("number"===o?Xe:"string"===o?(r=De(t))?(t=r,Ve):Qe:t instanceof De?Ve:t instanceof Date?$e:(i=t,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(t)?We:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Ze:Xe:qe))(e,t)}function tt(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function nt(e){return+e}var rt=[0,1];function it(e){return e}function ot(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function at(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=ot(i,r),o=n(a,o)):(r=ot(r,i),o=n(o,a)),function(e){return o(r(e))}}function lt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=ot(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=re(e,t,1,r)-1;return o[n](i[n](t))}}function st(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ut(){var e,t,n,r,i,o,a=rt,l=rt,s=et,u=it;function c(){var e=Math.min(a.length,l.length);return u!==it&&(u=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(a[0],a[e-1])),r=e>2?lt:at,i=o=null,h}function h(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),l,s)))(e(u(t)))}return h.invert=function(n){return u(t((o||(o=r(l,a.map(e),Xe)))(n)))},h.domain=function(e){return arguments.length?(a=Array.from(e,nt),c()):a.slice()},h.range=function(e){return arguments.length?(l=Array.from(e),c()):l.slice()},h.rangeRound=function(e){return l=Array.from(e),s=tt,c()},h.clamp=function(e){return arguments.length?(u=!!e||it,c()):u!==it},h.interpolate=function(e){return arguments.length?(s=e,c()):s},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,c()}}function ct(){return ut()(it,it)}function ht(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ft(e){return(e=ht(Math.abs(e)))?e[1]:NaN}var gt,dt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mt(e){if(!(t=dt.exec(e)))throw new Error("invalid format: "+e);var t;return new bt({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function bt(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function pt(e,t){var n=ht(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}mt.prototype=bt.prototype,bt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var vt={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return pt(100*e,t)},r:pt,s:function(e,t){var n=ht(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(gt=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ht(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function yt(e){return e}var wt,kt,xt,Mt=Array.prototype.map,Lt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ct(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?yt:(t=Mt.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,l=t[0],s=0;i>0&&l>0&&(s+l+1>r&&(l=Math.max(1,r-s)),o.push(e.substring(i-=l,i+l)),!((s+=l+1)>r));)l=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",l=void 0===e.numerals?yt:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Mt.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",u=void 0===e.minus?"−":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=mt(e)).fill,n=e.align,h=e.sign,f=e.symbol,g=e.zero,d=e.width,m=e.comma,b=e.precision,p=e.trim,v=e.type;"n"===v?(m=!0,v="g"):vt[v]||(void 0===b&&(b=12),p=!0,v="g"),(g||"0"===t&&"="===n)&&(g=!0,t="0",n="=");var y="$"===f?i:"#"===f&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",w="$"===f?o:/[%p]/.test(v)?s:"",k=vt[v],x=/[defgprs%]/.test(v);function M(e){var i,o,s,f=y,M=w;if("c"===v)M=k(e)+M,e="";else{var L=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:k(Math.abs(e),b),p&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),L&&0==+e&&"+"!==h&&(L=!1),f=(L?"("===h?h:u:"-"===h||"("===h?"":h)+f,M=("s"===v?Lt[8+gt/3]:"")+M+(L&&"("===h?")":""),x)for(i=-1,o=e.length;++i<o;)if(48>(s=e.charCodeAt(i))||s>57){M=(46===s?a+e.slice(i+1):e.slice(i))+M,e=e.slice(0,i);break}}m&&!g&&(e=r(e,1/0));var C=f.length+e.length+M.length,S=C<d?new Array(d-C+1).join(t):"";switch(m&&g&&(e=r(S+e,S.length?d-M.length:1/0),S=""),n){case"<":e=f+e+M+S;break;case"=":e=f+S+e+M;break;case"^":e=S.slice(0,C=S.length>>1)+f+e+M+S.slice(C);break;default:e=S+f+e+M}return l(e)}return b=void 0===b?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b)),M.toString=function(){return e+""},M}return{format:h,formatPrefix:function(e,t){var n=h(((e=mt(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(ft(t)/3))),i=Math.pow(10,-r),o=Lt[8+r/3];return function(e){return n(i*e)+o}}}}function St(e,t,n,r){var i,o=se(e,t,n);switch((r=mt(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ft(t)/3)))-ft(Math.abs(e)))}(o,a))||(r.precision=i),xt(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ft(t)-ft(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-ft(Math.abs(e)))}(o))||(r.precision=i-2*("%"===r.type))}return kt(r)}function Et(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var r,i,o,a,l=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=le(e,t,n))||!isFinite(a))return[];if(a>0){var s=Math.round(e/a),u=Math.round(t/a);for(s*a<e&&++s,u*a>t&&--u,o=new Array(i=u-s+1);++l<i;)o[l]=(s+l)*a}else{a=-a;var c=Math.round(e*a),h=Math.round(t*a);for(c/a<e&&++c,h/a>t&&--h,o=new Array(i=h-c+1);++l<i;)o[l]=(c+l)/a}return r&&o.reverse(),o}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return St(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,l=o.length-1,s=o[a],u=o[l],c=10;for(u<s&&(i=s,s=u,u=i,i=a,a=l,l=i);c-- >0;){if((i=le(s,u,n))===r)return o[a]=s,o[l]=u,t(o);if(i>0)s=Math.floor(s/i)*i,u=Math.ceil(u/i)*i;else{if(!(i<0))break;s=Math.ceil(s*i)/i,u=Math.floor(u*i)/i}r=i}return e},e}function Tt(){var e=ct();return e.copy=function(){return st(e,Tt())},ue.apply(e,arguments),Et(e)}wt=Ct({thousands:",",grouping:[3],currency:["$",""]}),kt=wt.format,xt=wt.formatPrefix;var Dt=new Date,Pt=new Date;function At(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,o){var a,l=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return l;do{l.push(a=new Date(+n)),t(n,o),e(n)}while(a<n&&n<r);return l},i.filter=function(n){return At((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return Dt.setTime(+t),Pt.setTime(+r),e(Dt),e(Pt),Math.floor(n(Dt,Pt))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}var Nt=At((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));Nt.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?At((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):Nt:null};var Rt=Nt;Nt.range;var Ut=1e3,Ht=6e4,jt=36e5,Ft=864e5,Ot=6048e5,It=2592e6,_t=31536e6,zt=At((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*Ut)}),(function(e,t){return(t-e)/Ut}),(function(e){return e.getUTCSeconds()})),Yt=zt;zt.range;var Gt=At((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ut)}),(function(e,t){e.setTime(+e+t*Ht)}),(function(e,t){return(t-e)/Ht}),(function(e){return e.getMinutes()})),Bt=Gt;Gt.range;var Vt=At((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ut-e.getMinutes()*Ht)}),(function(e,t){e.setTime(+e+t*jt)}),(function(e,t){return(t-e)/jt}),(function(e){return e.getHours()})),qt=Vt;Vt.range;var Wt=At((function(e){return e.setHours(0,0,0,0)}),(function(e,t){return e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ht)/Ft}),(function(e){return e.getDate()-1})),$t=Wt;function Xt(e){return At((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ht)/Ot}))}Wt.range;var Zt=Xt(0),Jt=Xt(1),Kt=Xt(2),Qt=Xt(3),en=Xt(4),tn=Xt(5),nn=Xt(6);Zt.range,Jt.range,Kt.range,Qt.range,en.range,tn.range,nn.range;var rn=At((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})),on=rn;rn.range;var an=At((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));an.every=function(e){return isFinite(e=Math.floor(e))&&e>0?At((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var ln=an;an.range;var sn=At((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*Ht)}),(function(e,t){return(t-e)/Ht}),(function(e){return e.getUTCMinutes()})),un=sn;sn.range;var cn=At((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*jt)}),(function(e,t){return(t-e)/jt}),(function(e){return e.getUTCHours()})),hn=cn;cn.range;var fn=At((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/Ft}),(function(e){return e.getUTCDate()-1})),gn=fn;function dn(e){return At((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/Ot}))}fn.range;var mn=dn(0),bn=dn(1),pn=dn(2),vn=dn(3),yn=dn(4),wn=dn(5),kn=dn(6);mn.range,bn.range,pn.range,vn.range,yn.range,wn.range,kn.range;var xn=At((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})),Mn=xn;xn.range;var Ln=At((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));Ln.every=function(e){return isFinite(e=Math.floor(e))&&e>0?At((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var Cn=Ln;function Sn(e,t,n,r,i,o){var a=[[Yt,1,Ut],[Yt,5,5e3],[Yt,15,15e3],[Yt,30,3e4],[o,1,Ht],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,jt],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,Ft],[r,2,1728e5],[n,1,Ot],[t,1,It],[t,3,7776e6],[e,1,_t]];function l(t,n,r){var i=Math.abs(n-t)/r,o=te((function(e){return u(e,3)[2]})).right(a,i);if(o===a.length)return e.every(se(t/_t,n/_t,r));if(0===o)return Rt.every(Math.max(se(t,n,r),1));var l=u(a[i/a[o-1][2]<a[o][2]/i?o-1:o],2),s=l[0],c=l[1];return s.every(c)}return[function(e,t,n){var r=t<e;if(r){var i=[t,e];e=i[0],t=i[1]}var o=n&&"function"==typeof n.range?n:l(e,t,n),a=o?o.range(e,+t+1):[];return r?a.reverse():a},l]}Ln.range;var En=u(Sn(Cn,Mn,mn,gn,hn,un),2);En[0],En[1];var Tn=u(Sn(ln,on,Zt,$t,qt,Bt),2),Dn=Tn[0],Pn=Tn[1];function An(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Nn(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Rn(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var Un,Hn,jn={"-":"",_:" ",0:"0"},Fn=/^\s*\d+/,On=/^%/,In=/[\\^$*+?|[\]().{}]/g;function _n(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function zn(e){return e.replace(In,"\\$&")}function Yn(e){return new RegExp("^(?:"+e.map(zn).join("|")+")","i")}function Gn(e){return new Map(e.map((function(e,t){return[e.toLowerCase(),t]})))}function Bn(e,t,n){var r=Fn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Vn(e,t,n){var r=Fn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function qn(e,t,n){var r=Fn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Wn(e,t,n){var r=Fn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function $n(e,t,n){var r=Fn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Xn(e,t,n){var r=Fn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Zn(e,t,n){var r=Fn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Jn(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Kn(e,t,n){var r=Fn.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Qn(e,t,n){var r=Fn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function er(e,t,n){var r=Fn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function tr(e,t,n){var r=Fn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function nr(e,t,n){var r=Fn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function rr(e,t,n){var r=Fn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ir(e,t,n){var r=Fn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function or(e,t,n){var r=Fn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function ar(e,t,n){var r=Fn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function lr(e,t,n){var r=On.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function sr(e,t,n){var r=Fn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function ur(e,t,n){var r=Fn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function cr(e,t){return _n(e.getDate(),t,2)}function hr(e,t){return _n(e.getHours(),t,2)}function fr(e,t){return _n(e.getHours()%12||12,t,2)}function gr(e,t){return _n(1+$t.count(ln(e),e),t,3)}function dr(e,t){return _n(e.getMilliseconds(),t,3)}function mr(e,t){return dr(e,t)+"000"}function br(e,t){return _n(e.getMonth()+1,t,2)}function pr(e,t){return _n(e.getMinutes(),t,2)}function vr(e,t){return _n(e.getSeconds(),t,2)}function yr(e){var t=e.getDay();return 0===t?7:t}function wr(e,t){return _n(Zt.count(ln(e)-1,e),t,2)}function kr(e){var t=e.getDay();return t>=4||0===t?en(e):en.ceil(e)}function xr(e,t){return e=kr(e),_n(en.count(ln(e),e)+(4===ln(e).getDay()),t,2)}function Mr(e){return e.getDay()}function Lr(e,t){return _n(Jt.count(ln(e)-1,e),t,2)}function Cr(e,t){return _n(e.getFullYear()%100,t,2)}function Sr(e,t){return _n((e=kr(e)).getFullYear()%100,t,2)}function Er(e,t){return _n(e.getFullYear()%1e4,t,4)}function Tr(e,t){var n=e.getDay();return _n((e=n>=4||0===n?en(e):en.ceil(e)).getFullYear()%1e4,t,4)}function Dr(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+_n(t/60|0,"0",2)+_n(t%60,"0",2)}function Pr(e,t){return _n(e.getUTCDate(),t,2)}function Ar(e,t){return _n(e.getUTCHours(),t,2)}function Nr(e,t){return _n(e.getUTCHours()%12||12,t,2)}function Rr(e,t){return _n(1+gn.count(Cn(e),e),t,3)}function Ur(e,t){return _n(e.getUTCMilliseconds(),t,3)}function Hr(e,t){return Ur(e,t)+"000"}function jr(e,t){return _n(e.getUTCMonth()+1,t,2)}function Fr(e,t){return _n(e.getUTCMinutes(),t,2)}function Or(e,t){return _n(e.getUTCSeconds(),t,2)}function Ir(e){var t=e.getUTCDay();return 0===t?7:t}function _r(e,t){return _n(mn.count(Cn(e)-1,e),t,2)}function zr(e){var t=e.getUTCDay();return t>=4||0===t?yn(e):yn.ceil(e)}function Yr(e,t){return e=zr(e),_n(yn.count(Cn(e),e)+(4===Cn(e).getUTCDay()),t,2)}function Gr(e){return e.getUTCDay()}function Br(e,t){return _n(bn.count(Cn(e)-1,e),t,2)}function Vr(e,t){return _n(e.getUTCFullYear()%100,t,2)}function qr(e,t){return _n((e=zr(e)).getUTCFullYear()%100,t,2)}function Wr(e,t){return _n(e.getUTCFullYear()%1e4,t,4)}function $r(e,t){var n=e.getUTCDay();return _n((e=n>=4||0===n?yn(e):yn.ceil(e)).getUTCFullYear()%1e4,t,4)}function Xr(){return"+0000"}function Zr(){return"%"}function Jr(e){return+e}function Kr(e){return Math.floor(+e/1e3)}function Qr(e){return new Date(e)}function ei(e){return e instanceof Date?+e:+new Date(+e)}function ti(e,t,n,r,i,o,a,l,s,u){var c=ct(),h=c.invert,f=c.domain,g=u(".%L"),d=u(":%S"),m=u("%I:%M"),b=u("%I %p"),p=u("%a %d"),v=u("%b %d"),y=u("%B"),w=u("%Y");function k(e){return(s(e)<e?g:l(e)<e?d:a(e)<e?m:o(e)<e?b:r(e)<e?i(e)<e?p:v:n(e)<e?y:w)(e)}return c.invert=function(e){return new Date(h(e))},c.domain=function(e){return arguments.length?f(Array.from(e,ei)):f().map(Qr)},c.ticks=function(t){var n=f();return e(n[0],n[n.length-1],null==t?10:t)},c.tickFormat=function(e,t){return null==t?k:u(t)},c.nice=function(e){var n=f();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?f(function(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}(n,e)):c},c.copy=function(){return st(c,ti(e,t,n,r,i,o,a,l,s,u))},c}function ni(){return ue.apply(ti(Dn,Pn,ln,on,Zt,$t,qt,Bt,Yt,Hn).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ri(){var e,t,n,r,i,o=0,a=1,l=it,s=!1;function c(t){return null==t||isNaN(t=+t)?i:l(0===n?.5:(t=(r(t)-e)*n,s?Math.max(0,Math.min(1,t)):t))}function h(e){return function(t){var n,r,i;return arguments.length?(r=(n=u(t,2))[0],i=n[1],l=e(r,i),c):[l(0),l(1)]}}return c.domain=function(i){var l;return arguments.length?(l=u(i,2),o=l[0],a=l[1],e=r(o=+o),t=r(a=+a),n=e===t?0:1/(t-e),c):[o,a]},c.clamp=function(e){return arguments.length?(s=!!e,c):s},c.interpolator=function(e){return arguments.length?(l=e,c):l},c.range=h(et),c.rangeRound=h(tt),c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(o),t=i(a),n=e===t?0:1/(t-e),c}}function ii(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function oi(){var e=Et(ri()(it));return e.copy=function(){return ii(e,oi())},ce.apply(e,arguments)}function ai(e,n){var r=p.timeline,i=r.point.colorValueFactors,o=r.unknownGenreColorRange,a=p.genreGroups,l=function(e){return oi().domain([1,n]).range(e)},s=l(o),c={};return Object.entries(a).forEach((function(e){var t=u(e,2),n=t[0],r=t[1].colorRange;return c[n]=l(r)})),e.map((function(e){var n=e.artist.genreGroup,r=e.album.playcount,o=(c[n]||s)(r),a=$(o);a.s*=i.other.saturation,a.l*=i.other.lightness;var l=$(o);l.s*=i.genre.saturation,l.l*=i.genre.lightness;var u=$(o);u.s*=i.artist.saturation,u.l*=i.artist.lightness;var h=$(o);return h.s*=i.artistLabel.saturation,h.l*=i.artistLabel.lightness,[a,l,u,h].forEach((function(e){e.s>1&&(e.s=1),e.l>1&&(e.l=1)})),t(t({},e),{},{color:a,highlightedGenreColor:l,highlightedArtistColor:u,artistLabelColor:h})}))}!function(e){Un=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,l=e.months,s=e.shortMonths,u=Yn(i),c=Gn(i),h=Yn(o),f=Gn(o),g=Yn(a),d=Gn(a),m=Yn(l),b=Gn(l),p=Yn(s),v=Gn(s),y={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return s[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:null,d:cr,e:cr,f:mr,g:Sr,G:Tr,H:hr,I:fr,j:gr,L:dr,m:br,M:pr,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Jr,s:Kr,S:vr,u:yr,U:wr,V:xr,w:Mr,W:Lr,x:null,X:null,y:Cr,Y:Er,Z:Dr,"%":Zr},w={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return s[e.getUTCMonth()]},B:function(e){return l[e.getUTCMonth()]},c:null,d:Pr,e:Pr,f:Hr,g:qr,G:$r,H:Ar,I:Nr,j:Rr,L:Ur,m:jr,M:Fr,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Jr,s:Kr,S:Or,u:Ir,U:_r,V:Yr,w:Gr,W:Br,x:null,X:null,y:Vr,Y:Wr,Z:Xr,"%":Zr},k={a:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=b.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return L(e,t,n,r)},d:er,e:er,f:ar,g:Zn,G:Xn,H:nr,I:nr,j:tr,L:or,m:Qn,M:rr,p:function(e,t,n){var r=u.exec(t.slice(n));return r?(e.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:Kn,Q:sr,s:ur,S:ir,u:Vn,U:qn,V:Wn,w:Bn,W:$n,x:function(e,t,r){return L(e,n,t,r)},X:function(e,t,n){return L(e,r,t,n)},y:Zn,Y:Xn,Z:Jn,"%":lr};function x(e,t){return function(n){var r,i,o,a=[],l=-1,s=0,u=e.length;for(n instanceof Date||(n=new Date(+n));++l<u;)37===e.charCodeAt(l)&&(a.push(e.slice(s,l)),null!=(i=jn[r=e.charAt(++l)])?r=e.charAt(++l):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),s=l+1);return a.push(e.slice(s,l)),a.join("")}}function M(e,t){return function(n){var r,i,o=Rn(1900,void 0,1);if(L(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Nn(Rn(o.y,0,1))).getUTCDay(),r=i>4||0===i?bn.ceil(r):bn(r),r=gn.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=An(Rn(o.y,0,1))).getDay(),r=i>4||0===i?Jt.ceil(r):Jt(r),r=$t.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Nn(Rn(o.y,0,1)).getUTCDay():An(Rn(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Nn(o)):An(o)}}function L(e,t,n,r){for(var i,o,a=0,l=t.length,s=n.length;a<l;){if(r>=s)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=k[i in jn?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return y.x=x(n,y),y.X=x(r,y),y.c=x(t,y),w.x=x(n,w),w.X=x(r,w),w.c=x(t,w),{format:function(e){var t=x(e+="",y);return t.toString=function(){return e},t},parse:function(e){var t=M(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=x(e+="",w);return t.toString=function(){return e},t},utcParse:function(e){var t=M(e+="",!0);return t.toString=function(){return e},t}}}(e),Hn=Un.format,Un.parse,Un.utcFormat,Un.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var li=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function si(e){return e.slice(0,10)}function ui(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ci.apply(void 0,[function(e){return encodeURIComponent(e).replace(/%20/g,"+")},e].concat(n))}function ci(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return r.reduce((function(n,r,i){return n.concat(e?e(r):String(r),t[i+1])}),[t[0]]).join("")}var hi=function e(t,n,r,i){var o;n[0]=0;for(var a=1;a<n.length;a++){var l=n[a++],s=n[a]?(n[0]|=l?1:2,r[n[a++]]):n[++a];3===l?i[0]=s:4===l?i[1]=Object.assign(i[1]||{},s):5===l?(i[1]=i[1]||{})[n[++a]]=s:6===l?i[1][n[++a]]+=s+"":l?(o=t.apply(s,e(t,s,r,["",null])),i.push(o),s[0]?n[0]|=2:(n[a-2]=0,n[a]=o)):i.push(s)}return i},fi=new Map;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var gi={};({get exports(){return gi},set exports(e){gi=e}}).exports=function(){var e=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],t=function(e){return String(e).replace(/[&<>"']/g,(function(e){return"&"+n[e]+";"}))},n={"&":"amp","<":"lt",">":"gt",'"':"quot","'":"apos"},r="dangerouslySetInnerHTML",i={className:"class",htmlFor:"for"},o={};function a(n,a){var l=[],s="";a=a||{};for(var u=arguments.length;u-- >2;)l.push(arguments[u]);if("function"==typeof n)return a.children=l.reverse(),n(a);if(n){if(s+="<"+n,a)for(var c in a)!1!==a[c]&&null!=a[c]&&c!==r&&(s+=" "+(i[c]?i[c]:t(c))+'="'+t(a[c])+'"');s+=">"}if(-1===e.indexOf(n)){if(a[r])s+=a[r].__html;else for(;l.length;){var h=l.pop();if(h)if(h.pop)for(var f=h.length;f--;)l.push(h[f]);else s+=!0===o[h]?h:t(h)}s+=n?"</"+n+">":""}return o[s]=!0,s}return a}();var di,mi=function(e){var t=fi.get(this);return t||(t=new Map,fi.set(this,t)),(t=hi(this,t.get(e)||(t.set(e,t=function(e){for(var t,n,r=1,i="",o="",a=[0],l=function(e){1===r&&(e||(i=i.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?a.push(0,e,i):3===r&&(e||i)?(a.push(3,e,i),r=2):2===r&&"..."===i&&e?a.push(4,e,0):2===r&&i&&!e?a.push(5,0,!0,i):r>=5&&((i||!e&&5===r)&&(a.push(r,0,i,n),r=6),e&&(a.push(r,e,0,n),r=6)),i=""},s=0;s<e.length;s++){s&&(1===r&&l(),l(s));for(var u=0;u<e[s].length;u++)t=e[s][u],1===r?"<"===t?(l(),a=[a],r=3):i+=t:4===r?"--"===i&&">"===t?(r=1,i=""):i=t+i[0]:o?t===o?o="":i+=t:'"'===t||"'"===t?o=t:">"===t?(l(),r=1):r&&("="===t?(r=5,n=i,i=""):"/"===t&&(r<5||">"===e[s][u+1])?(l(),3===r&&(a=a[0]),r=a,(a=a[0]).push(2,0,r),r=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(l(),r=2):i+=t),3===r&&"!--"===i&&(r=4,a=a[0])}return l(),a}(e)),t),arguments,[])).length>1?t:t[0]}.bind(gi),bi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r(this,e),this.list=t,this.firstVisibleIndex=0,this.lastVisibleIndex=this.list.length-1}return o(e,[{key:"reset",value:function(){this.list=[],this.firstVisibleIndex=0,this.lastVisibleIndex=0}},{key:"setVisibleIndexRange",value:function(e,t){this.firstVisibleIndex=e,this.lastVisibleIndex=t}},{key:"push",value:function(){var e;return(e=this.list).push.apply(e,arguments)}},{key:"getAll",value:function(){return this.list}},{key:"getFirst",value:function(){return this.list[0]}},{key:"getLast",value:function(){return this.list[this.list.length-1]}},{key:"getFirstVisible",value:function(){return this.list[this.firstVisibleIndex]}},{key:"getLastVisible",value:function(){return this.list[this.lastVisibleIndex]}},{key:"forEachVisible",value:function(e){for(var t=this.firstVisibleIndex;t<=this.lastVisibleIndex;t+=1)e(this.list[t])}},{key:"findFirst",value:function(e){return this.list.find(e)}},{key:"findLast",value:function(e){for(var t=this.list.length-1;t>=0;t-=1){var n=this.list[t];if(e(n))return n}}},{key:"getAdjacentVisible",value:function(e,t){for(var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},i=t>0?function(){return e<n.lastVisibleIndex}:function(){return e>n.firstVisibleIndex};i();){e+=t;var o=this.list[e];if(o&&r(o))return o}}}]),e}(),pi=["x","y"],vi=function(){function e(t){r(this,e),this.tolerance=t,this.buffer={}}return o(e,[{key:"reset",value:function(){this.buffer={}}},{key:"forEachPoint",value:function(e){for(var t in this.buffer){var n=this.buffer[t];for(var r in n)e(r,t,n[r])}}},{key:"putPoint",value:function(e){var t=e.x,n=e.y,r=l(e,pi);this.buffer[n]||(this.buffer[n]={}),this.buffer[n][t]=r}},{key:"getPoint",value:function(e,t){var n=this.buffer[t];return n?n[e]:void 0}},{key:"getPointWithTolerance",value:function(e,t){for(var n=e-this.tolerance,r=e+this.tolerance,i=t-this.tolerance,o=t+this.tolerance,a=i;a<=o;a+=1){var l=this.buffer[a];if(l)for(var s=n;s<=r;s+=1){var u=l[s];if(u)return u}}}}]),e}(),yi=function(){function e(t){r(this,e),this.props=t,this.dimensions=null,this.element=null,this.ctx=null}return o(e,[{key:"initializeElement",value:function(){this.element=document.getElementById("plot")}},{key:"getDimensions",value:function(){return this.dimensions}},{key:"scale",value:function(){var e=p.timeline,t=e.plot.padding,n=e.legend.height,r=window.devicePixelRatio,i=window.innerWidth,o=window.innerHeight-(n+t);this.dimensions=[i,o],Object.assign(this.element,{width:i*r,height:o*r}),Object.assign(this.element.style,{width:"".concat(i,"px"),height:"".concat(o,"px")}),this.ctx=this.element.getContext("2d",{alpha:!1}),this.ctx.scale(r,r)}},{key:"drawBackground",value:function(){var e=p.timeline.plot.backgroundColor,t=u(this.dimensions,2),n=t[0],r=t[1];this.ctx.fillStyle=e,this.ctx.fillRect(0,0,n,r)}},{key:"drawTimeAxis",value:function(e,t,n,r){var i=p.timeline,o=i.plot.padding,a=i.timeAxis,l=a.width,s=a.timeFullColor,u=a.timeRangeColor,c=this.dimensions[1]-o;this.ctx.lineWidth=l,this.ctx.strokeStyle=s,this.ctx.beginPath(),this.ctx.moveTo(e,c),this.ctx.lineTo(t,c),this.ctx.stroke(),this.ctx.strokeStyle=u,this.ctx.beginPath(),this.ctx.moveTo(n,c),this.ctx.lineTo(r,c),this.ctx.stroke()}},{key:"drawPoint",value:function(e,t,n){var r=p.timeline.point.size,i=this.props.pointHalfSize;this.ctx.fillStyle=n,this.ctx.fillRect(e-i,t-i,r,r)}},{key:"afterRender",value:function(){this.initializeElement()}},{key:"render",value:function(){return mi(di||(di=s(['\n      <canvas\n        id="plot"\n        class="Plot"\n      />\n    '])))}}]),e}();function wi(e,t){return function(n){return e[n]=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t[n].apply(t,r)}}}var ki,xi,Mi=function(){function e(t,n){r(this,e),this.props=t,this.plot=n,["getDimensions","scale","drawBackground","drawTimeAxis","drawPoint","render"].forEach(wi(this,this.plot))}return o(e,[{key:"subscribe",value:function(){var e=this.props,t=e.onMouseDown,n=e.onMouseUp,r=e.onMouseOut,i=e.onMouseMove,o=e.onWheel,a=this.plot.element;a.addEventListener("mousedown",t),a.addEventListener("mouseup",n),a.addEventListener("mouseout",r),a.addEventListener("mousemove",i),a.addEventListener("wheel",o)}},{key:"unsubscribe",value:function(){var e=this.props,t=e.onMouseDown,n=e.onMouseUp,r=e.onMouseOut,i=e.onMouseMove,o=e.onWheel,a=this.plot.element;a.removeEventListener("mousedown",t),a.removeEventListener("mouseup",n),a.removeEventListener("mouseout",r),a.removeEventListener("mousemove",i),a.removeEventListener("wheel",o)}},{key:"afterRender",value:function(){this.plot.afterRender(),this.subscribe()}}]),e}(),Li=function(){function e(t){r(this,e),this.props=t,this.element=null}return o(e,[{key:"initializeElement",value:function(){var e=p.timeline,t=e.plot.padding,n=e.timeAxis.width,r=e.legend.height,i=this.props,o=i.id,a=i.isMostTop,l=t-n/2;this.element=document.getElementById(o),Object.assign(this.element.style,{top:"calc(100% - ".concat(l+r+t,"px)"),lineHeight:"".concat(l,"px")}),a&&this.element.classList.add("TimeAxisLabel--most-top")}},{key:"clear",value:function(){this.element.innerText=""}},{key:"renderText",value:function(e,t,n){var r=p.timeline.point.size;this.element.innerText=t;var i=Math.ceil(this.element.offsetWidth/2),o=u(e-i<r?["".concat(r,"px"),"auto"]:e+i>n-r?["auto","".concat(r,"px")]:["".concat(e-i,"px"),"auto"],2),a=o[0],l=o[1];Object.assign(this.element.style,{left:a,right:l})}},{key:"afterRender",value:function(){this.initializeElement()}},{key:"render",value:function(){var e=this.props.id;return mi(ki||(ki=s(["\n      <aside\n        id=",'\n        class="TimeAxisLabel"\n      />\n    '])),e)}}]),e}(),Ci={};xi={get exports(){return Ci},set exports(e){Ci=e}},function(){var e={}.hasOwnProperty;function t(){for(var r=[],i=0;i<arguments.length;i++){var o=arguments[i];if(o){var a=n(o);if("string"===a||"number"===a)r.push(o);else if(Array.isArray(o)){if(o.length){var l=t.apply(null,o);l&&r.push(l)}}else if("object"===a){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){r.push(o.toString());continue}for(var s in o)e.call(o,s)&&o[s]&&r.push(s)}}}return r.join(" ")}xi.exports?(t.default=t,xi.exports=t):window.classNames=t}();var Si,Ei,Ti,Di,Pi,Ai,Ni,Ri,Ui,Hi,ji,Fi,Oi,Ii,_i,zi,Yi,Gi,Bi=Ci,Vi=function(){function e(t){r(this,e),this.props=t}return o(e,[{key:"renderYearLink",value:function(e){var t=this.props.currentYear;return mi(Si||(Si=s(["\n      <a\n        class=",'\n        href="#','"\n      >\n        ',"\n      </a>\n    "])),Bi("YearNavigation__year-link",{"YearNavigation__year-link--current":t===e}),e,e)}},{key:"render",value:function(){var e=this.props.yearList;return mi(Ei||(Ei=s(['\n      <nav\n        class="YearNavigation list-box list-box--with-bg"\n      >\n        ',"\n      </nav>\n    "])),e.map(this.renderYearLink,this))}}]),e}(),qi=function(){function e(t){r(this,e),this.props=t,this.introMessageElementList=null,this.scrobbleInfoElementList=null,this.artistNameElement=null,this.albumNameElement=null,this.trackNameElement=null}return o(e,[{key:"initializeElements",value:function(){this.introMessageElementList=document.querySelectorAll(".InfoBox__field--intro-message"),this.scrobbleInfoElementList=document.querySelectorAll(".InfoBox__field--scrobble-info"),this.artistNameElement=document.getElementById("info-box-field-artist-name"),this.albumNameElement=document.getElementById("info-box-field-album-name"),this.trackNameElement=document.getElementById("info-box-field-track-name")}},{key:"showIntroMessage",value:function(){this.introMessageElementList.forEach((function(e){return e.style.display="block"})),this.scrobbleInfoElementList.forEach((function(e){return e.style.display="none"}))}},{key:"hideIntroMessage",value:function(){this.introMessageElementList.forEach((function(e){return e.style.display="none"}))}},{key:"getLastfmLinks",value:function(){var e=p.links,t=this.props,n=t.dates,r=t.summary,i="".concat(e.lastfm.url,"library"),o=si(n.firstScrobbleDate),a=si(n.lastScrobbleDate),l="from=".concat(o,"&to=").concat(a);return{scrobbleListLink:mi(Ti||(Ti=s(['\n        <a href="',"?",'">',"</a>\n      "])),i,l,r.scrobbleCount),artistListLink:mi(Di||(Di=s(['\n        <a href="',"/artists?",'">',"</a>\n      "])),i,l,r.artistCount),albumListLink:mi(Pi||(Pi=s(['\n        <a href="',"/albums?",'">',"</a>\n      "])),i,l,r.albumCount),trackListLink:mi(Ai||(Ai=s(['\n        <a href="',"/tracks?",'">',"</a>\n      "])),i,l,r.trackCount)}}},{key:"renderScrobbleInfo",value:function(e,t){var n=e.artist,r=e.album,i=e.track,o=ui(Ni||(Ni=s(["https://www.last.fm/music/",""])),n.name),a=ui(Ri||(Ri=s(["https://www.last.fm/music/","/",""])),n.name,r.name),l=ui(Ui||(Ui=s(["https://www.last.fm/music/","/_/",""])),n.name,i.name);this.artistNameElement.style.display="block",this.artistNameElement.innerHTML=mi(Hi||(Hi=s(["\n      <span>\n        <a href=",">","</a> <small>(","/",")</small>\n      </span>\n    "])),o,n.name,n.playcount,t.artist),this.albumNameElement.style.display=r.name?"block":"none",this.albumNameElement.innerHTML=r.name?mi(ji||(ji=s(["\n        <span>\n          <a href=",">","</a> <small>(","/",")</small>\n        </span>\n      "])),a,r.name,r.playcount,t.album):"",this.trackNameElement.style.display="block",this.trackNameElement.innerHTML=mi(Fi||(Fi=s(["\n      <span>\n        <a href=",">","</a> <small>(","/",")</small>\n      </span>\n    "])),l,i.name,i.playcount,t.track)}},{key:"afterRender",value:function(){this.initializeElements()}},{key:"render",value:function(){var e=this.props.summary,t=this.getLastfmLinks(),n=t.scrobbleListLink,r=t.artistListLink,i=t.albumListLink,o=t.trackListLink;return mi(Oi||(Oi=s(['\n      <aside\n        class="InfoBox list-box list-box--with-rows list-box--with-bg"\n      >\n        <p\n          class="InfoBox__field--intro-message list-box__field"\n        >\n          '," scrobbles (",' per day)\n        </p>\n\n        <p\n          class="InfoBox__field--intro-message list-box__field"\n        >\n          '," artists, "," albums, ",' tracks\n        </p>\n\n        <p\n          id="info-box-field-artist-name"\n          class="InfoBox__field--scrobble-info list-box__field"\n        />\n\n        <p\n          id="info-box-field-album-name"\n          class="InfoBox__field--scrobble-info list-box__field"\n        />\n\n        <p\n          id="info-box-field-track-name"\n          class="InfoBox__field--scrobble-info list-box__field"\n        />\n      </aside>\n    '])),n,e.scrobblePerDayCount,r,i,o)}}]),e}(),Wi=function(){function e(){r(this,e)}return o(e,[{key:"render",value:function(){var e=p.links;return mi(Ii||(Ii=s(['\n      <aside\n        class="ExternalLinks list-box list-box--with-rows list-box--with-bg"\n      >\n        <p\n          class="ExternalLinks__field list-box__field"\n        >\n          <a\n            class="ExternalLinks__link"\n            href=',"\n          >\n            ",'\n          </a>\n        </p>\n\n        <p\n          class="ExternalLinks__field list-box__field"\n        >\n          <a\n            class="ExternalLinks__link ExternalLinks__link--grid"\n            href="https://savelife.in.ua/en/"\n          >\n            <span>Come Back Alive<//>\n\n            <img\n              class="ExternalLinks__flag"\n              src="flag-ua-1x1.svg" alt="Flag of Ukraine"\n            />\n          </a>\n        </p>\n      </aside>\n    '])),e.github.url,e.github.text)}}]),e}(),$i=function(){function e(t){r(this,e),this.props=t,this.element=null,this.genreElementCollection=[],this.genreList=function(e){var t=p.timeline.point.colorValueFactors,n=p.genreGroups,r={},i=[],o={};for(var a in e.forEach((function(e){var t=e.artist,n=t.name,i=t.playcount,a=t.genreGroup,l=t.genre;if(l){var s=r[l];s||(s={genreGroup:a,artistCount:0,playcount:0},r[l]=s),o[n]?s.playcount=s.playcount-o[n]+i:(s.artistCount+=1,s.playcount+=i),o[n]=i}})),r){var l=r[a],s=l.artistCount,c=l.playcount,h=l.genreGroup,f=n[h];if(f){var g=u(f.colorRange,1)[0],d=$(g),m=$(g);d.s*=t.other.saturation,d.l*=t.other.lightness,m.s*=t.genre.saturation,m.l*=t.genre.lightness,[d,m].forEach((function(e){e.s>1&&(e.s=1),e.l>1&&(e.l=1)})),i.push({name:a,group:h,artistCount:s,playcount:c,color:d,highlightedColor:m})}else console.warn("genre not found in the config: ".concat(a))}return i.sort((function(e,t){return t.playcount-e.playcount}))}(t.scrobbleList),this.heightScale=this.getHeightScale()}return o(e,[{key:"initializeElements",value:function(){this.element=document.getElementById("legend"),this.genreElementCollection=this.element.getElementsByClassName("Legend__genre")}},{key:"getHeightScale",value:function(){var e=p.timeline.legend.height,t=Math.max.apply(Math,c(this.genreList.map((function(e){return e.playcount}))));return Tt().domain([0,t]).range([0,e])}},{key:"afterRender",value:function(){this.initializeElements(),requestAnimationFrame(this.setGenreElementsHeight.bind(this))}},{key:"setGenreElementsHeight",value:function(){for(var e=0;e<this.genreElementCollection.length;e+=1){var t=this.genreElementCollection[e],n=this.genreList[e].playcount,r=Math.max(this.heightScale(n),1);t.style.height="".concat(r,"px")}}},{key:"renderGenre",value:function(e){var t=e.name,n=e.artistCount,r=e.playcount,i=e.color,o=this.props.scrobbleList,a=["".concat(n," artist").concat(n>1?"s":""),"".concat(r," scrobble").concat(r>1?"s":""," (").concat((100*r/o.length).toFixed(1),"%)")].join(", ");return mi(_i||(_i=s(['\n      <section\n        class="Legend__genre"\n        style="background-color: ','"\n        title=','\n      >\n        <span\n          class="Legend__genre-caption"\n        >\n          ',"\n        </span>\n      </section>\n    "])),i,a,t)}},{key:"render",value:function(){return mi(zi||(zi=s(['\n      <nav\n        id="legend"\n        class="Legend"\n      >\n        ',"\n      </nav>\n    "])),this.genreList.map(this.renderGenre,this))}}]),e}(),Xi=function(){function e(t,n){r(this,e),this.props=t,this.legend=n,this.highlightedGenreIndex=null,this.eventListeners={},wi(this,this.legend)("render")}return o(e,[{key:"subscribe",value:function(){for(var e=this,t=this.props.onGenreMouseEnter,n=this.legend,r=n.genreElementCollection,i=n.genreList,o=function(n){var o=r[n],a=i[n].name,l=function(){return t(a)};e.eventListeners[a]=l,o.addEventListener("mouseenter",l)},a=0;a<r.length;a+=1)o(a)}},{key:"unsubscribe",value:function(){for(var e=this.legend,t=e.genreElementCollection,n=e.genreList,r=0;r<t.length;r+=1){var i=t[r],o=n[r].name;i.removeEventListener("mouseenter",this.eventListeners[o])}}},{key:"highlightGenre",value:function(e){var t=this.legend,n=t.genreElementCollection,r=t.genreList,i=r.findIndex((function(t){return t.name===e})),o=n[i],a=r[i].highlightedColor;o.classList.add("Legend__genre--highlighted"),o.style.backgroundColor=a,this.highlightedGenreIndex=i}},{key:"removeGenreHighlight",value:function(){if(null!==this.highlightedGenreIndex){var e=this.legend,t=e.genreElementCollection,n=e.genreList,r=t[this.highlightedGenreIndex],i=n[this.highlightedGenreIndex].color;r.classList.remove("Legend__genre--highlighted"),r.style.backgroundColor=i,this.highlightedGenreIndex=null}}},{key:"afterRender",value:function(){this.legend.afterRender(),this.subscribe()}}]),e}(),Zi=function(){function e(){r(this,e),this.element=null,this.highlightedLabelElement=null,this.bboxList=[]}return o(e,[{key:"initializeElements",value:function(){this.element=document.getElementById("artist-labels")}},{key:"removeAllLabels",value:function(){this.element.innerHTML="",this.highlightedLabelElement=null,this.bboxList=[]}},{key:"getLabelMinX",value:function(e,t,n){var r=p.timeline.labels.areaPadding,i=Math.ceil(t/2);return e-i<r?r:e+i>n-r?n-r-t:e-i}},{key:"getLabelMinY",value:function(e,t,n,r){var i,o=p.timeline,a=o.point.size,l=o.labels.margin,s=this.bboxList.filter((function(n){return!(e>n.maxX+l||t<n.minX-l)})).sort((function(e,t){return t.minY-e.minY})),u=n-a,c=u-r,f=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}(s);try{for(f.s();!(i=f.n()).done;){var g=i.value;u<g.minY-l||c>g.maxY+l||(c=(u=g.minY-l)-r)}}catch(e){f.e(e)}finally{f.f()}return c}},{key:"renderLabel",value:function(e,t){var n=e.x,r=e.y,i=e.text,o=e.scrobble.artistLabelColor,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=p.timeline.labels.highlightedColor,s=document.createElement("span"),u=a?l:o;s.classList.add("ArtistLabelCollection__label"),s.innerText=i,a&&(this.highlightedLabelElement&&this.highlightedLabelElement.classList.remove("ArtistLabelCollection__label--highlighted"),s.classList.add("ArtistLabelCollection__label--highlighted"),this.highlightedLabelElement=s),this.element.appendChild(s);var c=s.offsetWidth,h=s.offsetHeight,f=this.getLabelMinX(n,c,t),g=f+c,d=this.getLabelMinY(f,g,r,h),m=d+h;this.bboxList.push({minX:f,minY:d,maxX:g,maxY:m}),Object.assign(s.style,{top:"".concat(d,"px"),left:"".concat(f,"px"),color:u})}},{key:"afterRender",value:function(){this.initializeElements()}},{key:"render",value:function(){var e=p.timeline,t=e.plot.padding,n=e.legend.height;return mi(Yi||(Yi=s(['\n      <aside\n        id="artist-labels"\n        class="ArtistLabelCollection"\n        style="bottom: ','px"\n      />\n    '])),n+t)}}]),e}(),Ji=function(){function e(t){r(this,e);var n=p.timeline.point.size,i=t.scrobbleList;this.props=t,this.children={},this.scrobbleHalfSize=Math.ceil(n/2),this.scrobbleCollection=new bi(i),this.pointBuffer=new vi(this.scrobbleHalfSize),this.plotScales={}}return o(e,[{key:"initializeChildrenComponents",value:function(){var e=p.timeline.timeAxis.tickLabelCount,t=this.props,n=t.summary,r=t.yearList,i=t.scrobbleList,o=t.onPlotMouseDown,a=t.onPlotMouseUp,l=t.onPlotMouseOut,s=t.onPlotMouseMove,u=t.onPlotWheel,c=t.onLegendGenreMouseEnter;this.children.plot=new Mi({onMouseDown:o,onMouseUp:a,onMouseOut:l,onMouseMove:s,onWheel:u},new yi({pointHalfSize:this.scrobbleHalfSize})),this.children.yearNavigation=new Vi({currentYear:document.location.hash.slice(1),yearList:r}),this.children.infoBox=new qi({dates:{firstScrobbleDate:this.scrobbleCollection.getFirst().date,lastScrobbleDate:this.scrobbleCollection.getLast().date},summary:n}),this.children.externalLinks=new Wi,this.children.selectedScrobbleTimeLabel=new Li({id:"selected-scrobble-time-label",isMostTop:!0});for(var h=0;h<e;h+=1)this.children["timeTickLabel".concat(h)]=new Li({id:"time-tick-label--".concat(h)});this.children.legend=new Xi({onGenreMouseEnter:c},new $i({scrobbleList:i})),this.children.artistLabelCollection=new Zi}},{key:"getPlotScales",value:function(){for(var e=p.timeline,t=e.plot.padding,n=e.point,r=n.size,i=n.maxMargin,o=e.timeAxis.width,a=e.labels,l=a.areaPadding,s=a.highlightedHeight,c=this.props.summary,h=u(this.children.plot.getDimensions(),2),f=h[0],g=h[1]-t-o/2-r,d=g-l-s-r,m=i,b=d;m>=0;){var v=(c.maxArtistPlaycount-1)*(r+m);if(!(v>d)){b=v;break}m-=1}var y=g-b,w=t,k=f-t;return{timeAxis:ni().domain([this.scrobbleCollection.getFirst().timestamp,this.scrobbleCollection.getLast().timestamp]).rangeRound([w,k]),x:ni().domain([this.scrobbleCollection.getFirstVisible().timestamp,this.scrobbleCollection.getLastVisible().timestamp]).rangeRound([w,k]),y:Tt().domain([1,c.maxArtistPlaycount]).rangeRound([g,y])}}},{key:"createScrobblePoint",value:function(e){var t=e.timestamp,n=e.artist;return{x:this.plotScales.x(t),y:this.plotScales.y(n.playcount),scrobble:e}}},{key:"draw",value:function(){var e=this,t=p.timeline.timeAxis.tickLabelCount,n=this.props.onScrobblePointCreate,r=this.plotScales,i=r.timeAxis,o=r.x,a=this.children.plot,l=a.getDimensions()[0],s=u(o.domain(),2),c=s[0],h=s[1],f=u(o.range(),2),g=f[0],d=f[1],m=i(c),b=i(h),v=o.ticks(l>600?12:4),y=o.tickFormat();a.drawBackground(),this.scrobbleCollection.forEachVisible((function(t){var r=e.createScrobblePoint(t);e.pointBuffer.putPoint(r),n(r)})),this.pointBuffer.forEachPoint((function(e,t,n){var r=n.scrobble.color;return a.drawPoint(e,t,r)})),a.drawTimeAxis(g,d,m,b),v.forEach((function(t,n){e.children["timeTickLabel".concat(n)].renderText(o(t),y(t),l)}));for(var w=v.length;w<t;w+=1)this.children["timeTickLabel".concat(w)].clear()}},{key:"beforeRender",value:function(){this.initializeChildrenComponents()}},{key:"afterRender",value:function(){var e=this.children.plot;Object.values(this.children).forEach((function(e){"function"==typeof e.afterRender&&e.afterRender()})),e.scale(),this.plotScales=this.getPlotScales()}},{key:"render",value:function(){return mi(Gi||(Gi=s(["\n      <main>\n        ","\n      </main>\n    "])),Object.values(this.children).map((function(e){return e.render()})))}}]),e}();function Ki(e,t,n){return Math.min(Math.max(e,t),n)}var Qi,eo=function(){function e(t){r(this,e),this.getKey=t,this.registry={}}return o(e,[{key:"reset",value:function(){this.registry={}}},{key:"putItem",value:function(e){var t=this.getKey(e);t&&(this.registry[t]||(this.registry[t]=[]),this.registry[t].push(e))}},{key:"getItemList",value:function(e){return this.registry[e]||[]}},{key:"filter",value:function(e){var t={};for(var n in this.registry){var r=this.registry[n];e(r)&&(t[n]=r)}return t}}]),e}(),to=function(){function e(t,n){r(this,e),this.props=t,this.timeline=n,this.selectedScrobble=null,this.pointCollectionHighlighted=new bi,this.genrePointRegistry=new eo((function(e){return e.scrobble.artist.genre})),this.artistPointRegistry=new eo((function(e){return e.scrobble.artist.name})),this.isPlotMouseDown=!1,this.plotMouseX=null,Object.assign(this.timeline.props,{onScrobblePointCreate:this.handleScrobblePointCreate.bind(this),onPlotMouseDown:this.handlePlotMouseDown.bind(this),onPlotMouseUp:this.handlePlotMouseUpOrOut.bind(this),onPlotMouseOut:this.handlePlotMouseUpOrOut.bind(this),onPlotMouseMove:this.handlePlotMouseMove.bind(this),onPlotWheel:this.handlePlotWheel.bind(this),onLegendGenreMouseEnter:this.handleLegendGenreMouseEnter.bind(this)}),["draw","beforeRender","render"].forEach(wi(this,this.timeline)),this.handleWindowResize=this.handleWindowResize.bind(this),this.handleDocumentKeydown=this.handleDocumentKeydown.bind(this)}return o(e,[{key:"subscribe",value:function(){window.addEventListener("resize",this.handleWindowResize),document.addEventListener("keydown",this.handleDocumentKeydown)}},{key:"unsubscribe",value:function(){Object.values(this.timeline.children).forEach((function(e){"function"==typeof e.unsubscribe&&e.unsubscribe()})),window.removeEventListener("resize",this.handleWindowResize),document.removeEventListener("keydown",this.handleDocumentKeydown)}},{key:"resetScales",value:function(){this.timeline.children.plot.scale(),this.timeline.plotScales=this.timeline.getPlotScales()}},{key:"resetState",value:function(){this.timeline.pointBuffer.reset(),this.genrePointRegistry.reset(),this.artistPointRegistry.reset(),this.pointCollectionHighlighted.reset(),this.selectedScrobble=null}},{key:"resetUi",value:function(){var e=this.timeline.children,t=e.infoBox,n=e.selectedScrobbleTimeLabel,r=e.legend,i=e.artistLabelCollection;t.showIntroMessage(),n.clear(),r.removeGenreHighlight(),i.removeAllLabels()}},{key:"highlightGenre",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.timeline.children.plot,i={};return this.genrePointRegistry.getItemList(e).forEach((function(e){var o=e.x,a=e.y,l=e.scrobble,s=l.artist.name,u=l.highlightedGenreColor;s!==n&&(t.pointCollectionHighlighted.push({x:o,y:a}),i[s]=e,r.drawPoint(o,a,u))})),i}},{key:"highlightArtist",value:function(e){var t=this,n=e.index,r=e.artist,i=e.track,o=p.timeline.point.selectedColor,a=this.timeline.children,l=a.plot,s=a.selectedScrobbleTimeLabel,c=u(l.getDimensions(),1)[0],h=[],f=null;return this.artistPointRegistry.getItemList(r.name).forEach((function(e){var r=e.x,o=e.y,a=e.scrobble,g=a.index,d=a.timestamp,m=a.track.name,b=a.highlightedArtistColor;t.pointCollectionHighlighted.push({x:r,y:o}),f=e,m===i.name?h.push({x:r,y:o}):l.drawPoint(r,o,b),g===n&&s.renderText(r,function(e){var t=new Date(e),n=li[t.getMonth()],r=u([t.getDate(),t.getHours(),t.getMinutes()].map((function(e){return e.toString().padStart(2,"0")})),3),i=r[0],o=r[1],a=r[2];return"".concat(n," ").concat(i," ").concat(o,":").concat(a)}(d),c)})),h.forEach((function(e){var t=e.x,n=e.y;return l.drawPoint(t,n,o)})),f}},{key:"removePointsHighlight",value:function(){var e=this.timeline.pointBuffer,t=this.timeline.children.plot;this.pointCollectionHighlighted.getAll().forEach((function(n){var r=n.x,i=n.y;return t.drawPoint(r,i,e.getPoint(r,i).scrobble.color)})),this.pointCollectionHighlighted.reset()}},{key:"selectGenre",value:function(e){var t=this.timeline.children.legend;this.selectedScrobble=null,this.removePointsHighlight(),this.resetUi(),this.renderArtistsLabels(this.highlightGenre(e)),t.highlightGenre(e)}},{key:"selectScrobble",value:function(e){var n=this.props.summary,r=this.timeline.children,i=r.plot,o=r.infoBox,a=r.legend,l=r.artistLabelCollection,s=u(i.getDimensions(),1)[0],c=e.artist,h=!(this.selectedScrobble&&this.selectedScrobble.artist.name===c.name),f={};this.selectedScrobble=e,this.removePointsHighlight(),o.hideIntroMessage(),h&&(a.removeGenreHighlight(),l.removeAllLabels()),c.genre&&(f=this.highlightGenre(c.genre,c.name),h&&a.highlightGenre(c.genre));var g=this.highlightArtist(e);h&&(l.renderLabel(t({text:c.name},g),s,!0),this.renderArtistsLabels(f)),o.renderScrobbleInfo(e,n.getScrobbleTotals(e))}},{key:"selectVerticallyAdjacentScrobble",value:function(e){var t=this.timeline.scrobbleCollection;if(this.selectedScrobble){var n=t.getAdjacentVisible(this.selectedScrobble.index,e);n&&this.selectScrobble(n)}}},{key:"selectHorizontallyAdjacentScrobble",value:function(e){var t=this,n=this.timeline.scrobbleCollection;if(this.selectedScrobble){var r=n.getAdjacentVisible(this.selectedScrobble.index,e,(function(e){return e.artist.playcount===t.selectedScrobble.artist.playcount}));r&&this.selectScrobble(r)}}},{key:"selectScrobbleUnderMouse",value:function(e){var t=this.timeline.pointBuffer,n=e.offsetX,r=e.offsetY,i=t.getPointWithTolerance(n,r);i&&i.scrobble!==this.selectedScrobble&&this.selectScrobble(i.scrobble)}},{key:"panPlot",value:function(e){var t=this.timeline,n=t.scrobbleCollection,r=t.plotScales.x,i=e.offsetX,o=n.getFirst().timestamp,a=n.getLast().timestamp,l=r.domain().map((function(e){return Date.parse(e)})),s=u(l,2),c=s[0],h=s[1];if(!(h-c>=a-o)){var f=r.invert(this.plotMouseX)-r.invert(i);f&&(h+f>a?f=a-h:c+f<o&&(f=o-c),f&&this.updatePlotTimeRange(c+f,h+f))}}},{key:"zoomPlot",value:function(e){var t=p.timeline,n=t.zoomDeltaFactor,r=t.minTimeRange,i=t.plot.padding,o=this.timeline,a=o.scrobbleCollection,l=o.plotScales.x,s=this.timeline.children.plot,h=e.offsetX,f=e.deltaY,g=l.domain(),d=u(s.getDimensions(),1)[0]-2*i,m=Tt().domain([0,d]).rangeRound(g),b=m(Ki.apply(void 0,[h-i].concat(c(m.domain())))),v=1-f*n,y=(b-g[0])/v,w=(g[1]-b)/v;y+w>=r&&this.updatePlotTimeRange(Math.max(b-y,a.getFirst().timestamp),Math.min(b+w,a.getLast().timestamp))}},{key:"updatePlotTimeRange",value:function(e,t){var n=this.timeline,r=n.scrobbleCollection,i=n.plotScales.x,o=r.findFirst((function(t){return t.timestamp>=e})).index,a=r.findLast((function(e){return e.timestamp<=t})).index;i.domain([e,t]),r.setVisibleIndexRange(o,a),this.resetState(),this.draw(),this.resetUi()}},{key:"handleScrobblePointCreate",value:function(e){this.genrePointRegistry.putItem(e),this.artistPointRegistry.putItem(e)}},{key:"handleWindowResize",value:function(){var e=this;clearTimeout(this.windowResizeTimeoutHandle),this.windowResizeTimeoutHandle=setTimeout((function(){e.resetScales(),e.resetState(),e.draw(),e.resetUi()}),100)}},{key:"handleDocumentKeydown",value:function(e){switch(e.key){case"Escape":return this.handleEscKeydown();case"ArrowDown":return this.selectVerticallyAdjacentScrobble(-1);case"ArrowUp":return this.selectVerticallyAdjacentScrobble(1);case"ArrowLeft":return this.selectHorizontallyAdjacentScrobble(-1);case"ArrowRight":return this.selectHorizontallyAdjacentScrobble(1)}}},{key:"handleEscKeydown",value:function(){this.selectedScrobble=null,this.removePointsHighlight(),this.resetUi()}},{key:"handlePlotMouseDown",value:function(e){0===e.button&&(this.isPlotMouseDown=!0)}},{key:"handlePlotMouseUpOrOut",value:function(){this.isPlotMouseDown=!1}},{key:"handlePlotMouseMove",value:function(e){var t=e.offsetX;this.isPlotMouseDown?this.panPlot(e):this.selectScrobbleUnderMouse(e),this.plotMouseX=t}},{key:"handlePlotWheel",value:function(e){e.preventDefault(),this.zoomPlot(e)}},{key:"handleLegendGenreMouseEnter",value:function(e){this.selectGenre(e)}},{key:"afterRender",value:function(){this.timeline.afterRender(),this.subscribe()}},{key:"renderArtistsLabels",value:function(e){var n=this.timeline.children,r=n.plot,i=n.artistLabelCollection,o=u(r.getDimensions(),1)[0];Object.entries(e).map((function(e){var n=u(e,2);return t({text:n[0]},n[1])})).sort((function(e,t){return t.y-e.y})).forEach((function(e){return i.renderLabel(e,o,!1)}))}}]),e}(),no={},ro=null;function io(e){return no[e]?Promise.resolve(no[e]):fetch(e).then((function(e){return e.json()})).then((function(t){return no[e]=t}))}function oo(e){var n=u(e,3),r=n[0],i=n[1],o=n[2],a=i.map((function(e,n){return t(t({},function(e){var t=u(e,7);return{date:t[0],track:{name:t[1],playcount:t[2]},album:{name:t[3],playcount:t[4]},artist:{name:t[5],playcount:t[6]}}}(e)),{},{index:n,timestamp:(r=e[0],Date.parse(r.replace(" ","T")))});var r})),l=function(e){var t={};e.forEach((function(e){var n=e.artist,r=e.album,i=e.track;t[n.name]||(t[n.name]={albums:{},tracks:{}}),t[n.name].playcount=n.playcount,r.name&&(t[n.name].albums[r.name]=r.playcount),t[n.name].tracks[i.name]=i.playcount}));var n=Object.keys(t).length,r=0,i=0,o=0,a=0;for(var l in t){var s=t[l],u=s.playcount,c=s.albums,h=s.tracks;for(var f in r+=Object.keys(c).length,i+=Object.keys(h).length,u>o&&(o=u),c){var g=c[f];g>a&&(a=g)}}var d=e.length,m=Math.ceil((e[e.length-1].timestamp-e[0].timestamp)/864e5);return{artistCount:n,albumCount:r,trackCount:i,maxArtistPlaycount:o,maxAlbumPlaycount:a,scrobbleCount:d,scrobblePerDayCount:Math.round(10*d/m)/10,getScrobbleTotals:function(e){var n=e.artist,r=e.album,i=e.track,o=t[n.name],a=o.playcount,l=o.albums,s=o.tracks;return{artist:a,album:l[r.name],track:s[i.name]}}}}(a);return{yearList:r,summary:l,scrobbleList:ai(Q(a,o),l.maxAlbumPlaycount)}}function ao(e){var t=new to(e,new Ji(e));return ro&&ro.unsubscribe(),t.beforeRender(),document.body.innerHTML=t.render(),t.afterRender(),t.draw(),ro=t,t}function lo(e){}function so(e){var t;(t=[p.dataUrls.yearList,"".concat(p.dataUrls.yearsBase,"/").concat(e,".json"),p.dataUrls.artistsByGenres],Promise.all(t.map(io))).then(oo).then(ao).then(lo)}new m(a({"":function(){return document.location.hash=p.defaultDataYear},all:so},function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(t,n,r){return t.concat("(".concat(d(n),")"),e[r+1])}),[e[0]]).join("")}(Qi||(Qi=s(["",""])),/\d{4}/),so)).start();
//# sourceMappingURL=bundle.min.js.map

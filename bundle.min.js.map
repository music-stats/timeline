{"version":3,"file":"bundle.min.js","sources":["../node_modules/micro-conductor/src/index.js","../src/app-theme.js","../src/config.js","../node_modules/d3-color/src/define.js","../node_modules/d3-color/src/color.js","../src/dataset/genre.js","../node_modules/d3-array/src/ascending.js","../node_modules/d3-array/src/bisector.js","../node_modules/d3-array/src/bisect.js","../node_modules/d3-array/src/number.js","../node_modules/d3-array/src/ticks.js","../node_modules/d3-scale/src/init.js","../node_modules/d3-interpolate/node_modules/d3-color/src/define.js","../node_modules/d3-interpolate/node_modules/d3-color/src/color.js","../node_modules/d3-interpolate/src/constant.js","../node_modules/d3-interpolate/src/color.js","../node_modules/d3-interpolate/src/rgb.js","../node_modules/d3-interpolate/src/numberArray.js","../node_modules/d3-interpolate/src/array.js","../node_modules/d3-interpolate/src/date.js","../node_modules/d3-interpolate/src/number.js","../node_modules/d3-interpolate/src/object.js","../node_modules/d3-interpolate/src/string.js","../node_modules/d3-interpolate/src/value.js","../node_modules/d3-interpolate/src/round.js","../node_modules/d3-scale/src/number.js","../node_modules/d3-scale/src/continuous.js","../node_modules/d3-scale/src/constant.js","../node_modules/d3-format/src/formatDecimal.js","../node_modules/d3-format/src/exponent.js","../node_modules/d3-format/src/formatSpecifier.js","../node_modules/d3-format/src/formatPrefixAuto.js","../node_modules/d3-format/src/formatRounded.js","../node_modules/d3-format/src/formatTypes.js","../node_modules/d3-format/src/identity.js","../node_modules/d3-format/src/locale.js","../node_modules/d3-format/src/defaultLocale.js","../node_modules/d3-format/src/formatGroup.js","../node_modules/d3-format/src/formatNumerals.js","../node_modules/d3-format/src/formatTrim.js","../node_modules/d3-scale/src/tickFormat.js","../node_modules/d3-format/src/precisionPrefix.js","../node_modules/d3-format/src/precisionRound.js","../node_modules/d3-format/src/precisionFixed.js","../node_modules/d3-scale/src/linear.js","../node_modules/d3-time/src/interval.js","../node_modules/d3-time/src/millisecond.js","../node_modules/d3-time/src/duration.js","../node_modules/d3-time/src/second.js","../node_modules/d3-time/src/minute.js","../node_modules/d3-time/src/hour.js","../node_modules/d3-time/src/day.js","../node_modules/d3-time/src/week.js","../node_modules/d3-time/src/month.js","../node_modules/d3-time/src/year.js","../node_modules/d3-time/src/utcMinute.js","../node_modules/d3-time/src/utcHour.js","../node_modules/d3-time/src/utcDay.js","../node_modules/d3-time/src/utcWeek.js","../node_modules/d3-time/src/utcMonth.js","../node_modules/d3-time/src/utcYear.js","../node_modules/d3-time/src/ticks.js","../node_modules/d3-time-format/src/locale.js","../node_modules/d3-time-format/src/defaultLocale.js","../node_modules/d3-scale/src/time.js","../node_modules/d3-scale/src/nice.js","../node_modules/d3-scale/src/sequential.js","../src/dataset/color.js","../src/utils/date.js","../src/utils/string.js","../node_modules/htm/dist/htm.module.js","../src/lib/html/index.js","../src/stores/Collection.js","../src/stores/PointBuffer.js","../src/components/Plot.js","../src/utils/decorator.js","../src/components/PlotInteractive.js","../src/components/TimeAxisLabel.js","../node_modules/classnames/index.js","../src/components/YearNavigation.js","../src/components/InfoBox.js","../src/components/ExternalLinks.js","../src/components/Legend.js","../src/components/LegendInteractive.js","../src/components/ArtistLabelCollection.js","../src/containers/Timeline.js","../src/utils/number.js","../src/stores/Registry.js","../src/containers/TimelineInteractive.js","../src/app.js","../src/dataset/scrobble.js","../src/dataset/summary.js"],"sourcesContent":["function getPatternPart(key) {\n  if (key instanceof RegExp) {\n    return key.source;\n  }\n\n  if (key === null || key === undefined) {\n    return '.*';\n  }\n\n  return key;\n}\n\n// @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#Tagged_templates\nexport function parse(strings, ...keys) {\n  return keys.reduce(\n    (patternParts, key, index) => patternParts.concat(\n      `(${getPatternPart(key)})`,\n      strings[index + 1],\n    ),\n    [strings[0]],\n  ).join('');\n}\n\nexport default class Router {\n  constructor(routes, context) {\n    this.routes = routes || {};\n    this.context = context || this;\n    this.notFound = null;\n    this.navigate = this.navigate.bind(this);\n  }\n\n  // removes \"#\" from the beginning and \"/\"s from the end\n  static normalize(hash) {\n    return hash.replace(/^#|\\/*$/g, '');\n  }\n\n  start(toNavigate = true) {\n    window.addEventListener('hashchange', this.navigate);\n\n    if (toNavigate) {\n      this.navigate();\n    }\n  }\n\n  stop() {\n    window.removeEventListener('hashchange', this.navigate);\n  }\n\n  navigate() {\n    const normalizedHash = this.constructor.normalize(window.location.hash);\n\n    for (const route in this.routes) {\n      const matches = normalizedHash.match(new RegExp(`^${route}$`));\n\n      if (matches) {\n        return this.routes[route].apply(this.context, matches);\n      }\n    }\n\n    if (typeof this.notFound === 'function') {\n      return this.notFound.call(this.context, normalizedHash);\n    }\n  }\n}\n","// mimics \"app-theme.css\" for canvas context\nexport default {\n  black: '#000',\n  darkGreyBlue: '#283038',\n  darkGrey1: '#343434',\n  darkGrey2: '#484848',\n  darkGrey3: '#686868',\n  grey1: '#888888',\n  grey2: '#a8a8a8',\n  lightGrey1: '#c8c8c8',\n  lightGrey2: '#d8d8d8',\n  lightGrey3: '#f0f0f0',\n  lightGrey4: '#f8f8f8',\n  lightBlue: '#1d91c0',\n  white: '#fff',\n};\n","import cssColors from './app-theme';\n\nexport default {\n  debug: '__buildEnv__' !== 'production',\n\n  defaultDataYear: '2022',\n\n  dataUrls: {\n    yearList: 'data/years.json',\n    yearsBase: 'data/years',\n    artistsByGenres: 'data/artists-by-genres.json',\n  },\n\n  links: {\n    lastfm: {\n      url: 'https://www.last.fm/user/markhovskiy/',\n      text: 'markhovskiy',\n    },\n\n    github: {\n      url: 'https://github.com/music-stats/timeline/',\n      text: 'music-stats/timeline',\n    },\n\n    twitter: {\n      url: 'https://twitter.com/oleksmarkh/',\n      text: '@oleksmarkh',\n    },\n  },\n\n  timeline: {\n    zoomDeltaFactor: 0.01,\n    minTimeRange: 24 * 60 * 60 * 1000, // 1 day\n\n    plot: {\n      padding: 12,\n      backgroundColor: cssColors.darkGreyBlue,\n    },\n\n    point: {\n      size: 3,\n      maxMargin: 1,\n      selectedColor: cssColors.white,\n      colorValueFactors: {\n        other: {\n          saturation: 0.5,\n          lightness: 0.6,\n        },\n        genre: {\n          saturation: 1.1,\n          lightness: 1,\n        },\n        artistLabel: {\n          saturation: 1.4,\n          lightness: 1.6,\n        },\n        artist: {\n          saturation: 1.4,\n          lightness: 1.8,\n        },\n      },\n    },\n\n    labels: {\n      areaPadding: 4,\n      margin: 1,\n      highlightedHeight: 16, // not used for label styling, only for limiting plot Y-scale\n      highlightedColor: cssColors.white,\n    },\n\n    timeAxis: {\n      width: 2,\n      tickLabelCount: 40,\n      timeFullColor: cssColors.darkGrey2,\n      timeRangeColor: cssColors.darkGrey3,\n    },\n\n    legend: {\n      height: 150, // the longest genre label should fit\n    },\n\n    // grey\n    unknownGenreColorRange: ['#525252', '#bdbdbd'],\n  },\n\n  genreGroups: {\n    'Classical': {\n      // light grey\n      colorRange: ['#bdbdbd', '#f0f0f0'],\n\n      genres: [\n        'Classical',\n        'Tango',\n      ],\n    },\n\n    'Electronic, Pop': {\n      // brown\n      colorRange: ['#cc4c02', '#fec44f'],\n\n      genres: [\n        'Ambient',\n        'Darkwave',\n        'Dream Pop',\n        'Electronic',\n        'Indie Pop',\n        'Industrial',\n        'Pop',\n        'Singer-songwriter',\n        'Trip Hop',\n      ],\n    },\n\n    'Jazzy': {\n      // yellow\n      colorRange: ['#fec44f', '#fff7bc'],\n\n      genres: [\n        'Blues',\n        'Funk',\n        'Hip-hop',\n        'Jazz',\n        'Low Rock',\n        'Reggae',\n        'Rock And Roll',\n        'Rockabilly',\n        'Soul',\n      ],\n    },\n\n    'Folk': {\n      // green\n      colorRange: ['#238b45', '#a1d99b'],\n\n      genres: [\n        'Acoustic',\n        'Bluegrass',\n        'Dark Country',\n        'Dark Folk',\n        'Folk Metal',\n        'Folk Rock',\n        'Folk',\n        'Freak Folk',\n        'Ukrainian Retro',\n      ],\n    },\n\n    'Rock': {\n      // blue\n      colorRange: ['#2171b5', '#9ecae1'],\n\n      genres: [\n        'Alternative Rock',\n        'Classic Rock',\n        'Gothic Rock',\n        'Indie Rock',\n        'Industrial Rock',\n        'Instrumental Virtuoso',\n        'Pop Rock',\n        'Post-rock',\n        'Progressive Rock',\n        'Stoner Rock',\n      ],\n    },\n\n    'Metal': {\n      // violet\n      colorRange: ['#88419d', '#9ebcda'],\n\n      genres: [\n        'Black Metal',\n        'Death Metal',\n        'Deathcore',\n        'Doom Metal',\n        'Gothic Metal',\n        'Groove Metal',\n        'Heavy Metal',\n        'Industrial Metal',\n        'Melodic Black Metal',\n        'Melodic Death Metal',\n        'Metalcore',\n        'Nu Metal',\n        'Post-black',\n        'Power Metal',\n        'Progressive Death Metal',\n        'Progressive Metal',\n        'Sludge Metal',\n        'Symphonic Metal',\n        'Thrash Metal',\n      ],\n    },\n\n    'Punk': {\n      // pink\n      colorRange: ['#ce1256', '#c994c7'],\n\n      genres: [\n        'Grunge',\n        'Hardcore',\n        'Post-hardcore',\n        'Post-punk',\n        'Proto-punk',\n        'Punk Rock',\n        'Screamo',\n        'Ska Punk',\n        'Ska',\n      ],\n    },\n  },\n};\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","import * as d3Color from 'd3-color';\n\nimport config from '../config';\n\nexport function insertGenres(scrobbleList, artistsByGenres) {\n  const {genreGroups} = config;\n  const genreGroupsByGenres = {};\n  const genresByArtists = {};\n\n  for (const genreGroup in genreGroups) {\n    genreGroups[genreGroup].genres.forEach((genre) => genreGroupsByGenres[genre] = genreGroup);\n  }\n\n  for (const genre in artistsByGenres) {\n    artistsByGenres[genre].forEach((artistName) => genresByArtists[artistName] = genre);\n  }\n\n  return scrobbleList.map((scrobble) => {\n    const genre = genresByArtists[scrobble.artist.name];\n    const genreGroup = genreGroupsByGenres[genre];\n\n    return {\n      ...scrobble,\n      ...(genre && {\n        artist: {\n          ...scrobble.artist,\n          genreGroup, // e.g. 'Rock'\n          genre, // e.g. 'Classic Rock'\n        },\n      }),\n    };\n  });\n}\n\nexport function getGenreSortedList(scrobbleList) {\n  const {timeline: {point: {colorValueFactors}}, genreGroups} = config;\n  const genres = {};\n  const genreList = [];\n  const artistPlaycounts = {};\n\n  scrobbleList.forEach(({artist: {name, playcount, genreGroup, genre}}) => {\n    if (!genre) {\n      return;\n    }\n\n    let genreRecord = genres[genre];\n    if (!genreRecord) {\n      genreRecord = {\n        genreGroup,\n        artistCount: 0,\n        playcount: 0,\n      };\n      genres[genre] = genreRecord;\n    }\n\n    if (artistPlaycounts[name]) {\n      genreRecord.playcount = genreRecord.playcount - artistPlaycounts[name] + playcount;\n    } else {\n      genreRecord.artistCount += 1;\n      genreRecord.playcount += playcount;\n    }\n\n    artistPlaycounts[name] = playcount;\n  });\n\n  for (const genre in genres) {\n    const {artistCount, playcount, genreGroup} = genres[genre];\n    const genreGroupConfig = genreGroups[genreGroup];\n\n    if (!genreGroupConfig) {\n      console.warn(`genre not found in the config: ${genre}`);\n      continue;\n    }\n\n    const {colorRange: [baseColor]} = genreGroupConfig;\n    const color = d3Color.hsl(baseColor);\n    const highlightedColor = d3Color.hsl(baseColor);\n\n    color.s *= colorValueFactors.other.saturation;\n    color.l *= colorValueFactors.other.lightness;\n\n    highlightedColor.s *= colorValueFactors.genre.saturation;\n    highlightedColor.l *= colorValueFactors.genre.lightness;\n\n    [\n      color,\n      highlightedColor,\n    ].forEach((c) => {\n      if (c.s > 1) { c.s = 1; }\n      if (c.l > 1) { c.l = 1; }\n    });\n\n    genreList.push({\n      name: genre,\n      group: genreGroup,\n      artistCount,\n      playcount,\n      color,\n      highlightedColor,\n    });\n  }\n\n  return genreList.sort((a, b) => b.playcount - a.playcount);\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function(f) {\n  let delta = f;\n  let compare = f;\n\n  if (f.length === 1) {\n    delta = (d, x) => f(d) - x;\n    compare = ascendingComparator(f);\n  }\n\n  function left(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) < 0) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  function right(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) > 0) hi = mid;\n      else lo = mid + 1;\n    }\n    return lo;\n  }\n\n  function center(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction ascendingComparator(f) {\n  return (d, x) => ascending(f(d), x);\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    let r0 = Math.round(start / step), r1 = Math.round(stop / step);\n    if (r0 * step < start) ++r0;\n    if (r1 * step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) * step;\n  } else {\n    step = -step;\n    let r0 = Math.round(start * step), r1 = Math.round(stop * step);\n    if (r0 / step < start) ++r0;\n    if (r1 / step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = function(date) {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval.js\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","export const durationSecond = 1000;\nexport const durationMinute = durationSecond * 60;\nexport const durationHour = durationMinute * 60;\nexport const durationDay = durationHour * 24;\nexport const durationWeek = durationDay * 7;\nexport const durationMonth = durationDay * 30;\nexport const durationYear = durationDay * 365;\n","import interval from \"./interval.js\";\nimport {durationSecond} from \"./duration.js\";\n\nvar second = interval(function(date) {\n  date.setTime(date - date.getMilliseconds());\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationSecond} from \"./duration.js\";\n\nvar minute = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval.js\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration.js\";\n\nvar hour = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nvar day = interval(\n  date => date.setHours(0, 0, 0, 0),\n  (date, step) => date.setDate(date.getDate() + step),\n  (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay,\n  date => date.getDate() - 1\n);\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval.js\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval.js\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval.js\";\nimport {durationMinute} from \"./duration.js\";\n\nvar utcMinute = interval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;\n","import interval from \"./interval.js\";\nimport {durationHour} from \"./duration.js\";\n\nvar utcHour = interval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nexport default utcHour;\nexport var utcHours = utcHour.range;\n","import interval from \"./interval.js\";\nimport {durationDay} from \"./duration.js\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval.js\";\nimport {durationWeek} from \"./duration.js\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval.js\";\n\nvar utcMonth = interval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;\n","import interval from \"./interval.js\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import {bisector, tickStep} from \"d3-array\";\nimport {durationDay, durationHour, durationMinute, durationMonth, durationSecond, durationWeek, durationYear} from \"./duration.js\";\nimport millisecond from \"./millisecond.js\";\nimport second from \"./second.js\";\nimport minute from \"./minute.js\";\nimport hour from \"./hour.js\";\nimport day from \"./day.js\";\nimport {sunday as week} from \"./week.js\";\nimport month from \"./month.js\";\nimport year from \"./year.js\";\nimport utcMinute from \"./utcMinute.js\";\nimport utcHour from \"./utcHour.js\";\nimport utcDay from \"./utcDay.js\";\nimport {utcSunday as utcWeek} from \"./utcWeek.js\";\nimport utcMonth from \"./utcMonth.js\";\nimport utcYear from \"./utcYear.js\";\n\nfunction ticker(year, month, week, day, hour, minute) {\n\n  const tickIntervals = [\n    [second,  1,      durationSecond],\n    [second,  5,  5 * durationSecond],\n    [second, 15, 15 * durationSecond],\n    [second, 30, 30 * durationSecond],\n    [minute,  1,      durationMinute],\n    [minute,  5,  5 * durationMinute],\n    [minute, 15, 15 * durationMinute],\n    [minute, 30, 30 * durationMinute],\n    [  hour,  1,      durationHour  ],\n    [  hour,  3,  3 * durationHour  ],\n    [  hour,  6,  6 * durationHour  ],\n    [  hour, 12, 12 * durationHour  ],\n    [   day,  1,      durationDay   ],\n    [   day,  2,  2 * durationDay   ],\n    [  week,  1,      durationWeek  ],\n    [ month,  1,      durationMonth ],\n    [ month,  3,  3 * durationMonth ],\n    [  year,  1,      durationYear  ]\n  ];\n\n  function ticks(start, stop, count) {\n    const reverse = stop < start;\n    if (reverse) [start, stop] = [stop, start];\n    const interval = count && typeof count.range === \"function\" ? count : tickInterval(start, stop, count);\n    const ticks = interval ? interval.range(start, +stop + 1) : []; // inclusive stop\n    return reverse ? ticks.reverse() : ticks;\n  }\n\n  function tickInterval(start, stop, count) {\n    const target = Math.abs(stop - start) / count;\n    const i = bisector(([,, step]) => step).right(tickIntervals, target);\n    if (i === tickIntervals.length) return year.every(tickStep(start / durationYear, stop / durationYear, count));\n    if (i === 0) return millisecond.every(Math.max(tickStep(start, stop, count), 1));\n    const [t, step] = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n    return t.every(step);\n  }\n\n  return [ticks, tickInterval];\n}\n\nconst [utcTicks, utcTickInterval] = ticker(utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute);\nconst [timeTicks, timeTickInterval] = ticker(year, month, week, day, hour, minute);\n\nexport {utcTicks, utcTickInterval, timeTicks, timeTickInterval};\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"g\": formatYearISO,\n    \"G\": formatFullYearISO,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"g\": formatUTCYearISO,\n    \"G\": formatUTCFullYearISO,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"g\": parseYear,\n    \"G\": parseFullYear,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  return new Map(names.map((name, i) => [name.toLowerCase(), i]));\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction dISO(d) {\n  var day = d.getDay();\n  return (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  d = dISO(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatYearISO(d, p) {\n  d = dISO(d);\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatFullYearISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction UTCdISO(d) {\n  var day = d.getUTCDay();\n  return (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  d = UTCdISO(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCYearISO(d, p) {\n  d = UTCdISO(d);\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCFullYearISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeTicks, timeTickInterval} from \"d3-time\";\nimport {timeFormat} from \"d3-time-format\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport nice from \"./nice.js\";\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format) {\n  var scale = continuous(),\n      invert = scale.invert,\n      domain = scale.domain;\n\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond\n        : minute(date) < date ? formatSecond\n        : hour(date) < date ? formatMinute\n        : day(date) < date ? formatHour\n        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n        : year(date) < date ? formatMonth\n        : formatYear)(date);\n  }\n\n  scale.invert = function(y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? domain(Array.from(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function(interval) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], interval == null ? 10 : interval);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function(interval) {\n    var d = domain();\n    if (!interval || typeof interval.range !== \"function\") interval = tickInterval(d[0], d[d.length - 1], interval == null ? 10 : interval);\n    return interval ? domain(nice(d, interval)) : scale;\n  };\n\n  scale.copy = function() {\n    return copy(scale, calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format));\n  };\n\n  return scale;\n}\n\nexport default function time() {\n  return initRange.apply(calendar(timeTicks, timeTickInterval, timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\n}\n","export default function nice(domain, interval) {\n  domain = domain.slice();\n\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}\n","import {interpolate, interpolateRound} from \"d3-interpolate\";\nimport {identity} from \"./continuous.js\";\nimport {initInterpolator} from \"./init.js\";\nimport {linearish} from \"./linear.js\";\nimport {loggish} from \"./log.js\";\nimport {symlogish} from \"./symlog.js\";\nimport {powish} from \"./pow.js\";\n\nfunction transformer() {\n  var x0 = 0,\n      x1 = 1,\n      t0,\n      t1,\n      k10,\n      transform,\n      interpolator = identity,\n      clamp = false,\n      unknown;\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : interpolator(k10 === 0 ? 0.5 : (x = (transform(x) - t0) * k10, clamp ? Math.max(0, Math.min(1, x)) : x));\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? ([x0, x1] = _, t0 = transform(x0 = +x0), t1 = transform(x1 = +x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0), scale) : [x0, x1];\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, scale) : clamp;\n  };\n\n  scale.interpolator = function(_) {\n    return arguments.length ? (interpolator = _, scale) : interpolator;\n  };\n\n  function range(interpolate) {\n    return function(_) {\n      var r0, r1;\n      return arguments.length ? ([r0, r1] = _, interpolator = interpolate(r0, r1), scale) : [interpolator(0), interpolator(1)];\n    };\n  }\n\n  scale.range = range(interpolate);\n\n  scale.rangeRound = range(interpolateRound);\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t) {\n    transform = t, t0 = t(x0), t1 = t(x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0);\n    return scale;\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .interpolator(source.interpolator())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport default function sequential() {\n  var scale = linearish(transformer()(identity));\n\n  scale.copy = function() {\n    return copy(scale, sequential());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialLog() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, sequentialLog()).base(scale.base());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSymlog() {\n  var scale = symlogish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialSymlog()).constant(scale.constant());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialPow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialPow()).exponent(scale.exponent());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSqrt() {\n  return sequentialPow.apply(null, arguments).exponent(0.5);\n}\n","import * as d3Scale from 'd3-scale';\nimport * as d3Color from 'd3-color';\n\nimport config from '../config';\n\nexport function insertColors(scrobbleList, maxAlbumPlaycount) {\n  const {timeline: {point: {colorValueFactors}, unknownGenreColorRange}, genreGroups} = config;\n  const createColorScale = (range) => d3Scale.scaleSequential()\n    .domain([1, maxAlbumPlaycount])\n    .range(range);\n  const unknownGenreColorScale = createColorScale(unknownGenreColorRange);\n  const genreGroupColorScales = {};\n\n  Object.entries(genreGroups).forEach(\n    ([genreGroup, {colorRange}]) => genreGroupColorScales[genreGroup] = createColorScale(colorRange),\n  );\n\n  return scrobbleList.map((scrobble) => {\n    const {artist: {genreGroup}, album: {playcount}} = scrobble;\n    const colorScale = genreGroupColorScales[genreGroup] || unknownGenreColorScale;\n    const baseColor = colorScale(playcount);\n\n    const color = d3Color.hsl(baseColor);\n    color.s *= colorValueFactors.other.saturation;\n    color.l *= colorValueFactors.other.lightness;\n\n    const highlightedGenreColor = d3Color.hsl(baseColor);\n    highlightedGenreColor.s *= colorValueFactors.genre.saturation;\n    highlightedGenreColor.l *= colorValueFactors.genre.lightness;\n\n    const highlightedArtistColor = d3Color.hsl(baseColor);\n    highlightedArtistColor.s *= colorValueFactors.artist.saturation;\n    highlightedArtistColor.l *= colorValueFactors.artist.lightness;\n\n    const artistLabelColor = d3Color.hsl(baseColor);\n    artistLabelColor.s *= colorValueFactors.artistLabel.saturation;\n    artistLabelColor.l *= colorValueFactors.artistLabel.lightness;\n\n    [\n      color,\n      highlightedGenreColor,\n      highlightedArtistColor,\n      artistLabelColor,\n    ].forEach((c) => {\n      if (c.s > 1) { c.s = 1; }\n      if (c.l > 1) { c.l = 1; }\n    });\n\n    return {\n      ...scrobble,\n      color,\n      highlightedGenreColor,\n      highlightedArtistColor,\n      artistLabelColor,\n    };\n  });\n}\n","const monthNameList = [\n         'Jan', 'Feb',\n  'Mar', 'Apr', 'May',\n  'Jun', 'Jul', 'Aug',\n  'Sep', 'Oct', 'Nov',\n  'Dec',\n];\n\nexport function dateTimeStringToTimestamp(dateTimeString) {\n  // The \"T\" is getting inserted between \"YYYY-MM-DD\" and \"HH:MM\"\n  // to avoid \"invalid date\" errors in mobile browsers.\n  // @see: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse\n  return Date.parse(dateTimeString.replace(' ', 'T'));\n}\n\nexport function dateTimeStringToDateString(dateTimeString) {\n  // \"YYYY-MM-DD\"\n  return dateTimeString.slice(0, 10);\n}\n\nexport function timestampToDateTimeString(timestamp) {\n  const date = new Date(timestamp);\n  const monthName = monthNameList[date.getMonth()];\n  const [day, hours, mins] = [\n    date.getDate(),\n    date.getHours(),\n    date.getMinutes(),\n  ].map((value) => value.toString().padStart(2, '0'));\n\n  return `${monthName} ${day} ${hours}:${mins}`;\n}\n","export function url(strings, ...keys) {\n  return fillTemplate((value) => encodeURIComponent(value).replace(/%20/g, '+'), strings, ...keys);\n}\n\n// @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#Tagged_templates\nfunction fillTemplate(transform, strings, ...keys) {\n  return keys.reduce(\n    (patternParts, key, index) => patternParts.concat(\n      transform ? transform(key) : String(key),\n      strings[index + 1],\n    ),\n    [strings[0]],\n  ).join('');\n}\n","var n=function(t,s,r,e){var u;s[0]=0;for(var h=1;h<s.length;h++){var p=s[h++],a=s[h]?(s[0]|=p?1:2,r[s[h++]]):s[++h];3===p?e[0]=a:4===p?e[1]=Object.assign(e[1]||{},a):5===p?(e[1]=e[1]||{})[s[++h]]=a:6===p?e[1][s[++h]]+=a+\"\":p?(u=t.apply(a,n(t,a,r,[\"\",null])),e.push(u),a[0]?s[0]|=2:(s[h-2]=0,s[h]=u)):e.push(a)}return e},t=new Map;export default function(s){var r=t.get(this);return r||(r=new Map,t.set(this,r)),(r=n(this,r.get(s)||(r.set(s,r=function(n){for(var t,s,r=1,e=\"\",u=\"\",h=[0],p=function(n){1===r&&(n||(e=e.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,\"\")))?h.push(0,n,e):3===r&&(n||e)?(h.push(3,n,e),r=2):2===r&&\"...\"===e&&n?h.push(4,n,0):2===r&&e&&!n?h.push(5,0,!0,e):r>=5&&((e||!n&&5===r)&&(h.push(r,0,e,s),r=6),n&&(h.push(r,n,0,s),r=6)),e=\"\"},a=0;a<n.length;a++){a&&(1===r&&p(),p(a));for(var l=0;l<n[a].length;l++)t=n[a][l],1===r?\"<\"===t?(p(),h=[h],r=3):e+=t:4===r?\"--\"===e&&\">\"===t?(r=1,e=\"\"):e=t+e[0]:u?t===u?u=\"\":e+=t:'\"'===t||\"'\"===t?u=t:\">\"===t?(p(),r=1):r&&(\"=\"===t?(r=5,s=e,e=\"\"):\"/\"===t&&(r<5||\">\"===n[a][l+1])?(p(),3===r&&(h=h[0]),r=h,(h=h[0]).push(2,0,r),r=0):\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t?(p(),r=2):e+=t),3===r&&\"!--\"===e&&(r=4,h=h[0])}return p(),h}(s)),r),arguments,[])).length>1?r:r[0]}\n","// @see: https://github.com/developit/htm#other-uses\n\nimport htm from 'htm';\nimport vhtml from 'vhtml';\n\nexport default htm.bind(vhtml);\n","export default class Collection {\n  constructor(list = []) {\n    this.list = list;\n    this.firstVisibleIndex = 0;\n    this.lastVisibleIndex = this.list.length - 1;\n  }\n\n  reset() {\n    this.list = [];\n    this.firstVisibleIndex = 0;\n    this.lastVisibleIndex = 0;\n  }\n\n  setVisibleIndexRange(firstVisibleIndex, lastVisibleIndex) {\n    this.firstVisibleIndex = firstVisibleIndex;\n    this.lastVisibleIndex = lastVisibleIndex;\n  }\n\n  push(...items) {\n    return this.list.push(...items);\n  }\n\n  getAll() {\n    return this.list;\n  }\n\n  getFirst() {\n    return this.list[0];\n  }\n\n  getLast() {\n    return this.list[this.list.length - 1];\n  }\n\n  getFirstVisible() {\n    return this.list[this.firstVisibleIndex];\n  }\n\n  getLastVisible() {\n    return this.list[this.lastVisibleIndex];\n  }\n\n  forEachVisible(callback) {\n    for (let i = this.firstVisibleIndex; i <= this.lastVisibleIndex; i += 1) {\n      callback(this.list[i]);\n    }\n  }\n\n  findFirst(filter) {\n    return this.list.find(filter);\n  }\n\n  findLast(filter) {\n    for (let i = this.list.length - 1; i >= 0; i -= 1) {\n      const item = this.list[i];\n\n      if (filter(item)) {\n        return item;\n      }\n    }\n\n    return undefined;\n  }\n\n  getAdjacentVisible(index, shift, filter = () => true) {\n    const stepCondition = shift > 0\n      ? () => index < this.lastVisibleIndex\n      : () => index > this.firstVisibleIndex;\n\n    while (stepCondition()) {\n      index += shift;\n      const adjacentItem = this.list[index];\n\n      if (adjacentItem && filter(adjacentItem)) {\n        return adjacentItem;\n      }\n    }\n\n    return undefined;\n  }\n}\n","export default class PointBuffer {\n  constructor(tolerance) {\n    this.tolerance = tolerance;\n    this.buffer = {};\n  }\n\n  reset() {\n    this.buffer = {};\n  }\n\n  forEachPoint(callback) {\n    for (const yi in this.buffer) {\n      const yiBuffer = this.buffer[yi];\n\n      for (const xj in yiBuffer) {\n        callback(xj, yi, yiBuffer[xj]);\n      }\n    }\n  }\n\n  putPoint({x, y, ...point}) {\n    // y-coord is the first lookup index\n    // because in \".getPoint()\" it's faster to locate \"buffer[y]\" entries (rows)\n    // since there are as many rows as the largest artist playcount value,\n    // which is generally less then it would have been columns (x-coords spread)\n    if (!this.buffer[y]) {\n      this.buffer[y] = {};\n    }\n\n    this.buffer[y][x] = point;\n  }\n\n  getPoint(x, y) {\n    const yBuffer = this.buffer[y];\n\n    return yBuffer\n      ? yBuffer[x]\n      : undefined;\n  }\n\n  getPointWithTolerance(x, y) {\n    const xFrom = x - this.tolerance;\n    const xTo = x + this.tolerance;\n    const yFrom = y - this.tolerance;\n    const yTo = y + this.tolerance;\n\n    for (let yi = yFrom; yi <= yTo; yi += 1) {\n      const yiBuffer = this.buffer[yi];\n\n      if (yiBuffer) {\n        for (let xj = xFrom; xj <= xTo; xj += 1) {\n          const point = yiBuffer[xj];\n\n          if (point) {\n            return point;\n          }\n        }\n      }\n    }\n\n    return undefined;\n  }\n}\n","import html from '../lib/html';\nimport config from '../config';\n\nimport './Plot.css';\n\nexport default class Plot {\n  constructor(props) {\n    this.props = props;\n    this.dimensions = null;\n    this.element = null;\n    this.ctx = null;\n  }\n\n  initializeElement() {\n    this.element = document.getElementById('plot');\n  }\n\n  getDimensions() {\n    return this.dimensions;\n  }\n\n  scale() {\n    const {timeline: {plot: {padding}, legend: {height: legendHeight}}} = config;\n    const dpr = window.devicePixelRatio;\n    const width = window.innerWidth;\n    const height = window.innerHeight - (legendHeight + padding);\n\n    this.dimensions = [width, height];\n\n    Object.assign(\n      this.element,\n      {\n        width: width * dpr,\n        height: height * dpr,\n      },\n    );\n\n    Object.assign(\n      this.element.style,\n      {\n        width: `${width}px`,\n        height: `${height}px`,\n      },\n    );\n\n    this.ctx = this.element.getContext('2d', {alpha: false});\n    this.ctx.scale(dpr, dpr);\n  }\n\n  drawBackground() {\n    const {timeline: {plot: {backgroundColor}}} = config;\n    const [width, height] = this.dimensions;\n\n    this.ctx.fillStyle = backgroundColor;\n    this.ctx.fillRect(0, 0, width, height);\n  }\n\n  drawTimeAxis(leftX, rightX, leftTimeX, rightTimeX) {\n    const {timeline: {plot: {padding}, timeAxis: {width, timeFullColor, timeRangeColor}}} = config;\n    const height = this.dimensions[1];\n    const y = height - padding;\n\n    this.ctx.lineWidth = width;\n\n    this.ctx.strokeStyle = timeFullColor;\n    this.ctx.beginPath();\n    this.ctx.moveTo(leftX, y);\n    this.ctx.lineTo(rightX, y);\n    this.ctx.stroke();\n\n    this.ctx.strokeStyle = timeRangeColor;\n    this.ctx.beginPath();\n    this.ctx.moveTo(leftTimeX, y);\n    this.ctx.lineTo(rightTimeX, y);\n    this.ctx.stroke();\n  }\n\n  drawPoint(x, y, color) {\n    const {timeline: {point: {size: pointSize}}} = config;\n    const {pointHalfSize} = this.props;\n\n    this.ctx.fillStyle = color;\n    this.ctx.fillRect(\n      x - pointHalfSize,\n      y - pointHalfSize,\n      pointSize,\n      pointSize,\n    );\n  }\n\n  afterRender() {\n    this.initializeElement();\n  }\n\n  render() {\n    return html`\n      <canvas\n        id=\"plot\"\n        class=\"Plot\"\n      />\n    `;\n  }\n}\n","export function createProxyMethod(decorator, decorated) {\n  return (method) => (decorator[method] = (...args) => decorated[method].apply(decorated, args));\n}\n","import {createProxyMethod} from '../utils/decorator';\n\nexport default class PlotInteractive {\n  constructor(props, plot) {\n    this.props = props;\n    this.plot = plot;\n\n    [\n      'getDimensions',\n      'scale',\n      'drawBackground',\n      'drawTimeAxis',\n      'drawPoint',\n      'render',\n    ].forEach(createProxyMethod(this, this.plot));\n  }\n\n  subscribe() {\n    const {onMouseDown, onMouseUp, onMouseOut, onMouseMove, onWheel} = this.props;\n    const {element} = this.plot;\n\n    element.addEventListener('mousedown', onMouseDown);\n    element.addEventListener('mouseup', onMouseUp);\n    element.addEventListener('mouseout', onMouseOut);\n    element.addEventListener('mousemove', onMouseMove);\n    element.addEventListener('wheel', onWheel);\n  }\n\n  unsubscribe() {\n    const {onMouseDown, onMouseUp, onMouseOut, onMouseMove, onWheel} = this.props;\n    const {element} = this.plot;\n\n    element.removeEventListener('mousedown', onMouseDown);\n    element.removeEventListener('mouseup', onMouseUp);\n    element.removeEventListener('mouseout', onMouseOut);\n    element.removeEventListener('mousemove', onMouseMove);\n    element.removeEventListener('wheel', onWheel);\n  }\n\n  afterRender() {\n    this.plot.afterRender();\n    this.subscribe();\n  }\n}\n","import html from '../lib/html';\nimport config from '../config';\n\nimport './TimeAxisLabel.css';\n\nexport default class TimeAxisLabel {\n  constructor(props) {\n    this.props = props;\n    this.element = null;\n  }\n\n  initializeElement() {\n    const {\n      timeline: {\n        plot: {padding: plotPadding},\n        timeAxis: {width: timeAxisWidth},\n        legend: {height: legendHeight},\n      },\n    } = config;\n    const {id, isMostTop} = this.props;\n    const height = plotPadding - timeAxisWidth / 2;\n\n    this.element = document.getElementById(id);\n\n    Object.assign(\n      this.element.style,\n      {\n        top: `calc(100% - ${(height + legendHeight + plotPadding)}px)`,\n        lineHeight: `${height}px`,\n      },\n    );\n\n    if (isMostTop) {\n      this.element.classList.add('TimeAxisLabel--most-top');\n    }\n  }\n\n  clear() {\n    this.element.innerText = '';\n  }\n\n  renderText(x, text, areaWidth) {\n    const {timeline: {point: {size: padding}}} = config;\n\n    this.element.innerText = text;\n\n    // text must be rendered (added to DOM) before element dimensions are measured\n    const halfWidth = Math.ceil(this.element.offsetWidth / 2);\n\n    const [left, right] = (() => {\n      // stick to left\n      if (x - halfWidth < padding) {\n        return [`${padding}px`, 'auto'];\n      }\n\n      // stick to right\n      if (x + halfWidth > areaWidth - padding) {\n        return ['auto', `${padding}px`];\n      }\n\n      // center under \"x\"\n      return [`${x - halfWidth}px`, 'auto'];\n    })();\n\n    Object.assign(\n      this.element.style,\n      {\n        left,\n        right,\n      },\n    );\n  }\n\n  afterRender() {\n    this.initializeElement();\n  }\n\n  render() {\n    const {id} = this.props;\n\n    return html`\n      <aside\n        id=${id}\n        class=\"TimeAxisLabel\"\n      />\n    `;\n  }\n}\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\tvar nativeCodeString = '[native code]';\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import classNames from 'classnames';\nimport html from '../lib/html';\n\nimport './YearNavigation.css';\n\nexport default class YearNavigation {\n  constructor(props) {\n    this.props = props;\n  }\n\n  renderYearLink(year) {\n    const {currentYear} = this.props;\n\n    return html`\n      <a\n        class=${classNames(\n          'YearNavigation__year-link',\n          {\n            'YearNavigation__year-link--current': currentYear === year,\n          },\n        )}\n        href=\"#${year}\"\n      >\n        ${year}\n      </a>\n    `;\n  }\n\n  render() {\n    const {yearList} = this.props;\n\n    return html`\n      <nav\n        class=\"YearNavigation list-box list-box--with-bg\"\n      >\n        ${yearList.map(this.renderYearLink, this)}\n      </nav>\n    `;\n  }\n}\n","import html from '../lib/html';\n\nimport config from '../config';\nimport {dateTimeStringToDateString} from '../utils/date';\nimport {url} from '../utils/string';\n\nimport './InfoBox.css';\n\nexport default class InfoBox {\n  constructor(props) {\n    this.props = props;\n\n    this.introMessageElementList = null;\n    this.scrobbleInfoElementList = null;\n\n    this.artistNameElement = null;\n    this.albumNameElement = null;\n    this.trackNameElement = null;\n  }\n\n  initializeElements() {\n    this.introMessageElementList = document.querySelectorAll('.InfoBox__field--intro-message');\n    this.scrobbleInfoElementList = document.querySelectorAll('.InfoBox__field--scrobble-info');\n\n    this.artistNameElement = document.getElementById('info-box-field-artist-name');\n    this.albumNameElement = document.getElementById('info-box-field-album-name');\n    this.trackNameElement = document.getElementById('info-box-field-track-name');\n  }\n\n  showIntroMessage() {\n    this.introMessageElementList.forEach((element) => element.style.display = 'block');\n    this.scrobbleInfoElementList.forEach((element) => element.style.display = 'none');\n  }\n\n  hideIntroMessage() {\n    this.introMessageElementList.forEach((element) => element.style.display = 'none');\n  }\n\n  getLastfmLinks() {\n    const {links} = config;\n    const {dates, summary} = this.props;\n\n    const baseUrl = `${links.lastfm.url}library`;\n    const fromDateString = dateTimeStringToDateString(dates.firstScrobbleDate);\n    const toDateString = dateTimeStringToDateString(dates.lastScrobbleDate);\n    const queryString = `from=${fromDateString}&to=${toDateString}`;\n\n    return {\n      scrobbleListLink: html`\n        <a href=\"${baseUrl}?${queryString}\">${summary.scrobbleCount}</a>\n      `,\n      artistListLink: html`\n        <a href=\"${baseUrl}/artists?${queryString}\">${summary.artistCount}</a>\n      `,\n      albumListLink: html`\n        <a href=\"${baseUrl}/albums?${queryString}\">${summary.albumCount}</a>\n      `,\n      trackListLink: html`\n        <a href=\"${baseUrl}/tracks?${queryString}\">${summary.trackCount}</a>\n      `,\n    };\n  }\n\n  renderScrobbleInfo({artist, album, track}, totals) {\n    const artistUrl = url`https://www.last.fm/music/${artist.name}`;\n    const albumUrl = url`https://www.last.fm/music/${artist.name}/${album.name}`;\n    const trackUrl = url`https://www.last.fm/music/${artist.name}/_/${track.name}`;\n\n    this.artistNameElement.style.display = 'block';\n    this.artistNameElement.innerHTML = html`\n      <span>\n        <a href=${artistUrl}>${artist.name}</a> <small>(${artist.playcount}/${totals.artist})</small>\n      </span>\n    `;\n\n    this.albumNameElement.style.display = album.name\n      ? 'block'\n      : 'none';\n    this.albumNameElement.innerHTML = album.name\n      ? html`\n        <span>\n          <a href=${albumUrl}>${album.name}</a> <small>(${album.playcount}/${totals.album})</small>\n        </span>\n      `\n      : '';\n\n    this.trackNameElement.style.display = 'block';\n    this.trackNameElement.innerHTML = html`\n      <span>\n        <a href=${trackUrl}>${track.name}</a> <small>(${track.playcount}/${totals.track})</small>\n      </span>\n    `;\n  }\n\n  afterRender() {\n    this.initializeElements();\n  }\n\n  render() {\n    const {summary} = this.props;\n    const {\n      scrobbleListLink,\n      artistListLink,\n      albumListLink,\n      trackListLink,\n    } = this.getLastfmLinks();\n\n    return html`\n      <aside\n        class=\"InfoBox list-box list-box--with-rows list-box--with-bg\"\n      >\n        <p\n          class=\"InfoBox__field--intro-message list-box__field\"\n        >\n          ${scrobbleListLink} scrobbles (${summary.scrobblePerDayCount} per day)\n        </p>\n\n        <p\n          class=\"InfoBox__field--intro-message list-box__field\"\n        >\n          ${artistListLink} artists, ${albumListLink} albums, ${trackListLink} tracks\n        </p>\n\n        <p\n          id=\"info-box-field-artist-name\"\n          class=\"InfoBox__field--scrobble-info list-box__field\"\n        />\n\n        <p\n          id=\"info-box-field-album-name\"\n          class=\"InfoBox__field--scrobble-info list-box__field\"\n        />\n\n        <p\n          id=\"info-box-field-track-name\"\n          class=\"InfoBox__field--scrobble-info list-box__field\"\n        />\n      </aside>\n    `;\n  }\n}\n","import html from '../lib/html';\nimport config from '../config';\n\nimport './ExternalLinks.css';\n\nexport default class ExternalLinks {\n  render() {\n    const {links: {github, twitter}} = config;\n\n    return html`\n      <aside\n        class=\"ExternalLinks list-box list-box--with-rows list-box--with-bg\"\n      >\n        <p\n          class=\"ExternalLinks__field list-box__field\"\n        >\n          <a\n            class=\"ExternalLinks__link\"\n            href=${twitter.url}\n          >\n            ${twitter.text}\n          </a>\n        </p>\n\n        <p\n          class=\"ExternalLinks__field list-box__field\"\n        >\n          <a\n            class=\"ExternalLinks__link\"\n            href=${github.url}\n          >\n            ${github.text}\n          </a>\n        </p>\n\n        <p\n          class=\"ExternalLinks__field list-box__field\"\n        >\n          <a\n            class=\"ExternalLinks__link ExternalLinks__link--grid\"\n            href=\"https://supportukrainenow.org/\"\n          >\n            <span>#StandWithUkraine<//>\n\n            <img\n              class=\"ExternalLinks__flag\"\n              src=\"flag-ua-1x1.svg\" alt=\"Flag of Ukraine\"\n            />\n          </a>\n        </p>\n      </aside>\n    `;\n  }\n}\n","import * as d3Scale from 'd3-scale';\nimport html from '../lib/html';\n\nimport config from '../config';\nimport {getGenreSortedList} from '../dataset/genre';\n\nimport './Legend.css';\n\nexport default class Legend {\n  constructor(props) {\n    this.props = props;\n    this.element = null;\n    this.genreElementCollection = [];\n    this.genreList = getGenreSortedList(props.scrobbleList);\n    this.heightScale = this.getHeightScale();\n  }\n\n  initializeElements() {\n    this.element = document.getElementById('legend');\n    this.genreElementCollection = this.element.getElementsByClassName('Legend__genre');\n  }\n\n  getHeightScale() {\n    const {timeline: {legend: {height}}} = config;\n    const maxPlaycount = Math.max(...this.genreList.map(({playcount}) => playcount));\n\n    return d3Scale.scaleLinear()\n      .domain([0, maxPlaycount])\n      .range([0, height]);\n  }\n\n  afterRender() {\n    this.initializeElements();\n    requestAnimationFrame(this.setGenreElementsHeight.bind(this));\n  }\n\n  setGenreElementsHeight() {\n    for (let i = 0; i < this.genreElementCollection.length; i += 1) {\n      const genreElement = this.genreElementCollection[i];\n      const {playcount} = this.genreList[i];\n      const height = Math.max(this.heightScale(playcount), 1);\n\n      genreElement.style.height = `${height}px`;\n    }\n  }\n\n  renderGenre({name, artistCount, playcount, color}) {\n    const {scrobbleList} = this.props;\n    const title = [\n      `${artistCount} artist${artistCount > 1 ? 's' : ''}`,\n      `${playcount} scrobble${playcount > 1 ? 's' : ''} (${(100 * playcount / scrobbleList.length).toFixed(1)}%)`,\n    ].join(', ');\n\n    return html`\n      <section\n        class=\"Legend__genre\"\n        style=\"background-color: ${color}\"\n        title=${title}\n      >\n        <span\n          class=\"Legend__genre-caption\"\n        >\n          ${name}\n        </span>\n      </section>\n    `;\n  }\n\n  render() {\n    return html`\n      <nav\n        id=\"legend\"\n        class=\"Legend\"\n      >\n        ${this.genreList.map(this.renderGenre, this)}\n      </nav>\n    `;\n  }\n}\n","import {createProxyMethod} from '../utils/decorator';\n\nexport default class LegendInteractive {\n  constructor(props, legend) {\n    this.props = props;\n    this.legend = legend;\n    this.highlightedGenreIndex = null;\n    this.eventListeners = {};\n\n    createProxyMethod(this, this.legend)('render');\n  }\n\n  subscribe() {\n    const {onGenreMouseEnter} = this.props;\n    const {genreElementCollection, genreList} = this.legend;\n\n    for (let i = 0; i < genreElementCollection.length; i += 1) {\n      const genreElement = genreElementCollection[i];\n      const {name} = genreList[i];\n      const onMouseEnter = () => onGenreMouseEnter(name);\n\n      this.eventListeners[name] = onMouseEnter;\n      genreElement.addEventListener('mouseenter', onMouseEnter);\n    }\n  }\n\n  unsubscribe() {\n    const {genreElementCollection, genreList} = this.legend;\n\n    for (let i = 0; i < genreElementCollection.length; i += 1) {\n      const genreElement = genreElementCollection[i];\n      const {name} = genreList[i];\n\n      genreElement.removeEventListener('mouseenter', this.eventListeners[name]);\n    }\n  }\n\n  highlightGenre(genre) {\n    const {genreElementCollection, genreList} = this.legend;\n    const genreIndex = genreList.findIndex(({name}) => name === genre);\n    const genreElement = genreElementCollection[genreIndex];\n    const {highlightedColor} = genreList[genreIndex];\n\n    genreElement.classList.add('Legend__genre--highlighted');\n    genreElement.style.backgroundColor = highlightedColor;\n\n    this.highlightedGenreIndex = genreIndex;\n  }\n\n  removeGenreHighlight() {\n    if (this.highlightedGenreIndex !== null) {\n      const {genreElementCollection, genreList} = this.legend;\n      const genreElement = genreElementCollection[this.highlightedGenreIndex];\n      const {color} = genreList[this.highlightedGenreIndex];\n\n      genreElement.classList.remove('Legend__genre--highlighted');\n      genreElement.style.backgroundColor = color;\n\n      this.highlightedGenreIndex = null;\n    }\n  }\n\n  afterRender() {\n    this.legend.afterRender();\n    this.subscribe();\n  }\n}\n","import html from '../lib/html';\nimport config from '../config';\n\nimport './ArtistLabelCollection.css';\n\nexport default class ArtistLabelCollection {\n  constructor() {\n    this.element = null;\n    this.highlightedLabelElement = null;\n    this.bboxList = [];\n  }\n\n  initializeElements() {\n    this.element = document.getElementById('artist-labels');\n  }\n\n  removeAllLabels() {\n    this.element.innerHTML = '';\n    this.highlightedLabelElement = null;\n    this.bboxList = [];\n  }\n\n  getLabelMinX(x, width, areaWidth) {\n    const {timeline: {labels: {areaPadding}}} = config;\n    const halfWidth = Math.ceil(width / 2);\n\n    // stick to left\n    if (x - halfWidth < areaPadding) {\n      return areaPadding;\n    }\n\n    // stick to right\n    if (x + halfWidth > areaWidth - areaPadding) {\n      return areaWidth - areaPadding - width;\n    }\n\n    // center at \"x\"\n    return x - halfWidth;\n  }\n\n  getLabelMinY(minX, maxX, y, height) {\n    const {timeline: {point: {size: pointSize}, labels: {margin}}} = config;\n\n    // filtering out bounding boxes that don't collide by X\n    const bboxListVertical = this.bboxList\n      .filter((bbox) => !(\n        minX > bbox.maxX + margin ||\n        maxX < bbox.minX - margin\n      ))\n      .sort((a, b) => b.minY - a.minY);\n\n    let maxY = y - pointSize;\n    let minY = maxY - height;\n\n    // checking if each bbox collides by Y and shifting up by its height when it does\n    for (const bbox of bboxListVertical) {\n      if (!(\n        maxY < bbox.minY - margin ||\n        minY > bbox.maxY + margin\n      )) {\n        maxY = bbox.minY - margin;\n        minY = maxY - height;\n      }\n    }\n\n    return minY;\n  }\n\n  renderLabel({x, y, text, scrobble: {artistLabelColor}}, areaWidth, isHighlighted = false) {\n    const {timeline: {labels: {highlightedColor}}} = config;\n    const labelElement = document.createElement('span');\n    const color = isHighlighted\n      ? highlightedColor\n      : artistLabelColor;\n\n    labelElement.classList.add('ArtistLabelCollection__label');\n    labelElement.innerText = text;\n\n    if (isHighlighted) {\n      if (this.highlightedLabelElement) {\n        this.highlightedLabelElement.classList.remove('ArtistLabelCollection__label--highlighted');\n      }\n\n      labelElement.classList.add('ArtistLabelCollection__label--highlighted');\n      this.highlightedLabelElement = labelElement;\n    }\n\n    this.element.appendChild(labelElement);\n\n    // text must be rendered (added to DOM) before element dimensions are measured\n    const {offsetWidth, offsetHeight} = labelElement;\n\n    const minX = this.getLabelMinX(x, offsetWidth, areaWidth);\n    const maxX = minX + offsetWidth;\n    const minY = this.getLabelMinY(minX, maxX, y, offsetHeight);\n    const maxY = minY + offsetHeight;\n\n    this.bboxList.push({\n      minX,\n      minY,\n      maxX,\n      maxY,\n    });\n\n    Object.assign(\n      labelElement.style,\n      {\n        top: `${minY}px`,\n        left: `${minX}px`,\n        color,\n      },\n    );\n  }\n\n  afterRender() {\n    this.initializeElements();\n  }\n\n  render() {\n    const {timeline: {plot: {padding: plotPadding}, legend: {height: legendHeight}}} = config;\n\n    return html`\n      <aside\n        id=\"artist-labels\"\n        class=\"ArtistLabelCollection\"\n        style=\"bottom: ${legendHeight + plotPadding}px\"\n      />\n    `;\n  }\n}\n","import * as d3Scale from 'd3-scale';\nimport html from '../lib/html';\n\nimport config from '../config';\n\nimport Collection from '../stores/Collection';\nimport PointBuffer from '../stores/PointBuffer';\n\nimport Plot from '../components/Plot';\nimport PlotInteractive from '../components/PlotInteractive';\nimport TimeAxisLabel from '../components/TimeAxisLabel';\nimport YearNavigation from '../components/YearNavigation';\nimport InfoBox from '../components/InfoBox';\nimport ExternalLinks from '../components/ExternalLinks';\nimport Legend from '../components/Legend';\nimport LegendInteractive from '../components/LegendInteractive';\nimport ArtistLabelCollection from '../components/ArtistLabelCollection';\n\nexport default class Timeline {\n  constructor(props) {\n    const {timeline: {point: {size: scrobbleSize}}} = config;\n    const {scrobbleList} = props;\n\n    this.props = props;\n    this.children = {};\n\n    this.scrobbleHalfSize = Math.ceil(scrobbleSize / 2);\n\n    this.scrobbleCollection = new Collection(scrobbleList);\n    this.pointBuffer = new PointBuffer(this.scrobbleHalfSize);\n\n    // to be initialized after render, since it relies on plot dimensions\n    this.plotScales = {};\n  }\n\n  initializeChildrenComponents() {\n    const {timeline: {timeAxis: {tickLabelCount}}} = config;\n    const {\n      summary,\n      yearList,\n      scrobbleList,\n      onPlotMouseDown,\n      onPlotMouseUp,\n      onPlotMouseOut,\n      onPlotMouseMove,\n      onPlotWheel,\n      onLegendGenreMouseEnter,\n    } = this.props;\n\n    this.children.plot = new PlotInteractive(\n      {\n        onMouseDown: onPlotMouseDown,\n        onMouseUp: onPlotMouseUp,\n        onMouseOut: onPlotMouseOut,\n        onMouseMove: onPlotMouseMove,\n        onWheel: onPlotWheel,\n      },\n      new Plot({\n        pointHalfSize: this.scrobbleHalfSize,\n      }),\n    );\n\n    this.children.yearNavigation = new YearNavigation({\n      currentYear: document.location.hash.slice(1),\n      yearList,\n    });\n\n    this.children.infoBox = new InfoBox({\n      dates: {\n        firstScrobbleDate: this.scrobbleCollection.getFirst().date,\n        lastScrobbleDate: this.scrobbleCollection.getLast().date,\n      },\n      summary,\n    });\n\n    this.children.externalLinks = new ExternalLinks();\n\n    this.children.selectedScrobbleTimeLabel = new TimeAxisLabel({\n      id: 'selected-scrobble-time-label',\n      isMostTop: true,\n    });\n\n    for (let index = 0; index < tickLabelCount; index += 1) {\n      this.children[`timeTickLabel${index}`] = new TimeAxisLabel({\n        id: `time-tick-label--${index}`,\n      });\n    }\n\n    this.children.legend = new LegendInteractive(\n      {\n        onGenreMouseEnter: onLegendGenreMouseEnter,\n      },\n      new Legend({\n        scrobbleList,\n      }),\n    );\n\n    this.children.artistLabelCollection = new ArtistLabelCollection();\n  }\n\n  getPlotScales() {\n    const {\n      timeline: {\n        plot: {padding: plotPadding},\n        point: {size: scrobbleSize, maxMargin: scrobbleMaxMargin},\n        timeAxis: {width: timeAxisWidth},\n        labels: {areaPadding: labelAreaPadding, highlightedHeight: highlightedLabelHeight},\n      },\n    } = config;\n\n    const {summary} = this.props;\n    const {plot} = this.children;\n    const [width, height] = plot.getDimensions();\n\n    // plot height calculation is ensuring equal vertical gaps between points\n    const plotBottom = height - plotPadding - timeAxisWidth / 2 - scrobbleSize;\n    const plotMaxHeight = plotBottom - labelAreaPadding - highlightedLabelHeight - scrobbleSize;\n    let scrobbleMargin = scrobbleMaxMargin;\n    let plotHeight = plotMaxHeight;\n    while (scrobbleMargin >= 0) {\n      const plotHeightNext = (summary.maxArtistPlaycount - 1) * (scrobbleSize + scrobbleMargin);\n\n      if (plotHeightNext > plotMaxHeight) {\n        scrobbleMargin -= 1;\n      } else {\n        plotHeight = plotHeightNext;\n        break;\n      }\n    }\n    const plotTop = plotBottom - plotHeight;\n    const plotLeft = plotPadding;\n    const plotRight = width - plotPadding;\n\n    const fullTimeRangeScale = d3Scale.scaleTime()\n      .domain([\n        this.scrobbleCollection.getFirst().timestamp,\n        this.scrobbleCollection.getLast().timestamp,\n      ])\n      .rangeRound([plotLeft, plotRight]);\n\n    const timeRangeScale = d3Scale.scaleTime()\n      .domain([\n        this.scrobbleCollection.getFirstVisible().timestamp,\n        this.scrobbleCollection.getLastVisible().timestamp,\n      ])\n      .rangeRound([plotLeft, plotRight]);\n\n    const artistPlaycountScale = d3Scale.scaleLinear()\n      .domain([1, summary.maxArtistPlaycount])\n      .rangeRound([plotBottom, plotTop]);\n\n    return {\n      timeAxis: fullTimeRangeScale,\n      x: timeRangeScale,\n      y: artistPlaycountScale,\n    };\n  }\n\n  createScrobblePoint(scrobble) {\n    const {timestamp, artist} = scrobble;\n\n    return {\n      x: this.plotScales.x(timestamp),\n      y: this.plotScales.y(artist.playcount),\n      scrobble,\n    };\n  }\n\n  draw() {\n    const {timeline: {timeAxis: {tickLabelCount}}} = config;\n    const {onScrobblePointCreate} = this.props;\n    const {timeAxis: fullTimeRangeScale, x: timeRangeScale} = this.plotScales;\n    const {plot} = this.children;\n    const plotWidth = plot.getDimensions()[0];\n\n    const [leftDate, rightDate] = timeRangeScale.domain();\n    const [leftX, rightX] = timeRangeScale.range();\n    const leftTimeX = fullTimeRangeScale(leftDate);\n    const rightTimeX = fullTimeRangeScale(rightDate);\n\n    const tickList = timeRangeScale.ticks(plotWidth > 600 ? 12 : 4);\n    const tickFormat = timeRangeScale.tickFormat();\n\n    plot.drawBackground();\n\n    this.scrobbleCollection.forEachVisible((scrobble) => {\n      const point = this.createScrobblePoint(scrobble);\n\n      // Points with same coords are getting overridden in the buffer and drawn outside of this loop.\n      // This allows to avoid flickering during zooming, because newer points always win.\n      this.pointBuffer.putPoint(point);\n\n      // However, the \"onScrobblePointCreate()\" callback is called on every point,\n      // regardless if it remains in the buffer.\n      // This allows to store them elsewhere for accessing on user interaction\n      // (e.g. highlighting all points with a given artist).\n      onScrobblePointCreate(point);\n    });\n\n    this.pointBuffer.forEachPoint((x, y, {scrobble: {color}}) => plot.drawPoint(x, y, color));\n\n    plot.drawTimeAxis(leftX, rightX, leftTimeX, rightTimeX);\n\n    tickList.forEach((tick, index) => {\n      this.children[`timeTickLabel${index}`].renderText(timeRangeScale(tick), tickFormat(tick), plotWidth);\n    });\n\n    for (let index = tickList.length; index < tickLabelCount; index += 1) {\n      this.children[`timeTickLabel${index}`].clear();\n    }\n  }\n\n  // things needed for the first render\n  beforeRender() {\n    this.initializeChildrenComponents();\n  }\n\n  // things to initialize after the first render\n  afterRender() {\n    const {plot} = this.children;\n\n    Object.values(this.children).forEach((child) => {\n      if (typeof child.afterRender === 'function') {\n        child.afterRender();\n      }\n    });\n\n    plot.scale();\n    this.plotScales = this.getPlotScales();\n  }\n\n  render() {\n    return html`\n      <main>\n        ${Object.values(this.children).map((child) => child.render())}\n      </main>\n    `;\n  }\n}\n","export function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n","export default class Registry {\n  constructor(getKey) {\n    this.getKey = getKey;\n    this.registry = {};\n  }\n\n  reset() {\n    this.registry = {};\n  }\n\n  putItem(item) {\n    const key = this.getKey(item);\n\n    if (!key) {\n      return;\n    }\n\n    if (!this.registry[key]) {\n      this.registry[key] = [];\n    }\n\n    this.registry[key].push(item);\n  }\n\n  getItemList(key) {\n    return this.registry[key] || [];\n  }\n\n  filter(filter) {\n    const registry = {};\n\n    for (const key in this.registry) {\n      const itemList = this.registry[key];\n\n      if (filter(itemList)) {\n        registry[key] = itemList;\n      }\n    }\n\n    return registry;\n  }\n}\n","import * as d3Scale from 'd3-scale';\n\nimport config from '../config';\nimport {createProxyMethod} from '../utils/decorator';\nimport {clamp} from '../utils/number';\nimport {timestampToDateTimeString} from '../utils/date';\n\nimport Collection from '../stores/Collection';\nimport Registry from '../stores/Registry';\n\nexport default class TimelineInteractive {\n  constructor(props, timeline) {\n    this.props = props;\n    this.timeline = timeline;\n\n    this.selectedScrobble = null;\n    this.pointCollectionHighlighted = new Collection();\n    this.genrePointRegistry = new Registry(({scrobble: {artist: {genre}}}) => genre);\n    this.artistPointRegistry = new Registry(({scrobble: {artist: {name}}}) => name);\n    this.isPlotMouseDown = false;\n    this.plotMouseX = null;\n\n    Object.assign(\n      this.timeline.props,\n      {\n        onScrobblePointCreate: this.handleScrobblePointCreate.bind(this),\n        onPlotMouseDown: this.handlePlotMouseDown.bind(this),\n        onPlotMouseUp: this.handlePlotMouseUpOrOut.bind(this),\n        onPlotMouseOut: this.handlePlotMouseUpOrOut.bind(this),\n        onPlotMouseMove: this.handlePlotMouseMove.bind(this),\n        onPlotWheel: this.handlePlotWheel.bind(this),\n        onLegendGenreMouseEnter: this.handleLegendGenreMouseEnter.bind(this),\n      },\n    );\n\n    [\n      'draw',\n      'beforeRender',\n      'render',\n    ].forEach(createProxyMethod(this, this.timeline));\n\n    this.handleWindowResize = this.handleWindowResize.bind(this);\n    this.handleDocumentKeydown = this.handleDocumentKeydown.bind(this);\n  }\n\n  subscribe() {\n    window.addEventListener('resize', this.handleWindowResize);\n    document.addEventListener('keydown', this.handleDocumentKeydown);\n  }\n\n  unsubscribe() {\n    Object.values(this.timeline.children).forEach((child) => {\n      if (typeof child.unsubscribe === 'function') {\n        child.unsubscribe();\n      }\n    });\n\n    window.removeEventListener('resize', this.handleWindowResize);\n    document.removeEventListener('keydown', this.handleDocumentKeydown);\n  }\n\n  resetScales() {\n    const {plot} = this.timeline.children;\n\n    plot.scale();\n    this.timeline.plotScales = this.timeline.getPlotScales();\n  }\n\n  resetState() {\n    const {pointBuffer} = this.timeline;\n\n    pointBuffer.reset();\n    this.genrePointRegistry.reset();\n    this.artistPointRegistry.reset();\n    this.pointCollectionHighlighted.reset();\n    this.selectedScrobble = null;\n  }\n\n  resetUi() {\n    const {infoBox, selectedScrobbleTimeLabel, legend, artistLabelCollection} = this.timeline.children;\n\n    infoBox.showIntroMessage();\n    selectedScrobbleTimeLabel.clear();\n    legend.removeGenreHighlight();\n    artistLabelCollection.removeAllLabels();\n  }\n\n  highlightGenre(genre, artistNameToSkip = null) {\n    const {plot} = this.timeline.children;\n    const lastPoints = {};\n\n    this.genrePointRegistry.getItemList(genre).forEach((point) => {\n      const {x, y, scrobble: {artist: {name: artistName}, highlightedGenreColor}} = point;\n\n      if (artistName !== artistNameToSkip) {\n        this.pointCollectionHighlighted.push({x, y});\n        lastPoints[artistName] = point;\n        plot.drawPoint(x, y, highlightedGenreColor);\n      }\n    });\n\n    return lastPoints;\n  }\n\n  highlightArtist({index, artist, track}) {\n    const {timeline: {point: {selectedColor: selectedTrackColor}}} = config;\n    const {plot, selectedScrobbleTimeLabel} = this.timeline.children;\n    const [plotWidth] = plot.getDimensions();\n    const sameTrackPointList = [];\n    let lastPoint = null;\n\n    this.artistPointRegistry.getItemList(artist.name).forEach((point) => {\n      const {\n        x,\n        y,\n        scrobble: {\n          index: scrobbleGlobalIndex,\n          timestamp,\n          track: {name},\n          highlightedArtistColor,\n        },\n      } = point;\n\n      this.pointCollectionHighlighted.push({x, y});\n      lastPoint = point;\n\n      // skipping same track scrobbles, those will be rendered after the main loop (to appear on top)\n      if (name === track.name) {\n        sameTrackPointList.push({x, y});\n      } else {\n        plot.drawPoint(x, y, highlightedArtistColor);\n      }\n\n      if (scrobbleGlobalIndex === index) {\n        selectedScrobbleTimeLabel.renderText(x, timestampToDateTimeString(timestamp), plotWidth);\n      }\n    });\n\n    sameTrackPointList.forEach(({x, y}) => plot.drawPoint(x, y, selectedTrackColor));\n\n    return lastPoint;\n  }\n\n  removePointsHighlight() {\n    const {pointBuffer} = this.timeline;\n    const {plot} = this.timeline.children;\n\n    this.pointCollectionHighlighted.getAll().forEach(\n      ({x, y}) => plot.drawPoint(x, y, pointBuffer.getPoint(x, y).scrobble.color),\n    );\n    this.pointCollectionHighlighted.reset();\n  }\n\n  selectGenre(genre) {\n    const {legend} = this.timeline.children;\n\n    // clean old\n    this.selectedScrobble = null;\n    this.removePointsHighlight();\n    this.resetUi();\n\n    // show new\n    this.renderArtistsLabels(this.highlightGenre(genre));\n    legend.highlightGenre(genre);\n  }\n\n  selectScrobble(scrobble) {\n    const {summary} = this.props;\n    const {plot, infoBox, legend, artistLabelCollection} = this.timeline.children;\n    const [plotWidth] = plot.getDimensions();\n    const {artist} = scrobble;\n    const isNewArtist = !(this.selectedScrobble && this.selectedScrobble.artist.name === artist.name);\n    let otherArtistsLastScrobblePoints = {};\n\n    this.selectedScrobble = scrobble;\n    this.removePointsHighlight();\n    infoBox.hideIntroMessage();\n\n    // there's no need to re-render genre-related labels if selected artist didn't change\n    if (isNewArtist) {\n      legend.removeGenreHighlight();\n      artistLabelCollection.removeAllLabels();\n    }\n\n    if (artist.genre) {\n      otherArtistsLastScrobblePoints = this.highlightGenre(artist.genre, artist.name);\n\n      if (isNewArtist) {\n        legend.highlightGenre(artist.genre);\n      }\n    }\n\n    // artist scrobbles are rendered on top of genre scrobbles\n    const artistLastScrobblePoint = this.highlightArtist(scrobble);\n\n    // artist label is inserted before other artists labels\n    if (isNewArtist) {\n      artistLabelCollection.renderLabel({text: artist.name, ...artistLastScrobblePoint}, plotWidth, true);\n      this.renderArtistsLabels(otherArtistsLastScrobblePoints);\n    }\n\n    infoBox.renderScrobbleInfo(scrobble, summary.getScrobbleTotals(scrobble));\n  }\n\n  selectVerticallyAdjacentScrobble(shift) {\n    const {scrobbleCollection} = this.timeline;\n\n    if (this.selectedScrobble) {\n      const adjacentScrobble = scrobbleCollection.getAdjacentVisible(this.selectedScrobble.index, shift);\n\n      if (adjacentScrobble) {\n        this.selectScrobble(adjacentScrobble);\n      }\n    }\n  }\n\n  selectHorizontallyAdjacentScrobble(shift) {\n    const {scrobbleCollection} = this.timeline;\n\n    if (this.selectedScrobble) {\n      const filter = ({artist: {playcount}}) => playcount === this.selectedScrobble.artist.playcount;\n      const adjacentScrobble = scrobbleCollection.getAdjacentVisible(this.selectedScrobble.index, shift, filter);\n\n      if (adjacentScrobble) {\n        this.selectScrobble(adjacentScrobble);\n      }\n    }\n  }\n\n  selectScrobbleUnderMouse(event) {\n    const {pointBuffer} = this.timeline;\n    const {offsetX: x, offsetY: y} = event;\n    const point = pointBuffer.getPointWithTolerance(x, y);\n\n    if (point && point.scrobble !== this.selectedScrobble) {\n      this.selectScrobble(point.scrobble);\n    }\n  }\n\n  panPlot(event) {\n    const {scrobbleCollection, plotScales: {x: timeRangeScale}} = this.timeline;\n    const {offsetX: x} = event;\n    const {timestamp: minTimestamp} = scrobbleCollection.getFirst();\n    const {timestamp: maxTimestamp} = scrobbleCollection.getLast();\n    const [leftTimestamp, rightTimestamp] = timeRangeScale.domain().map((date) => Date.parse(date));\n\n    if (rightTimestamp - leftTimestamp >= maxTimestamp - minTimestamp) {\n      return;\n    }\n\n    let timestampDiff = timeRangeScale.invert(this.plotMouseX) - timeRangeScale.invert(x);\n\n    if (!timestampDiff) {\n      return;\n    }\n\n    if (rightTimestamp + timestampDiff > maxTimestamp) {\n      timestampDiff = maxTimestamp - rightTimestamp;\n    } else if (leftTimestamp + timestampDiff < minTimestamp) {\n      timestampDiff = minTimestamp - leftTimestamp;\n    }\n\n    if (timestampDiff) {\n      this.updatePlotTimeRange(\n        leftTimestamp + timestampDiff,\n        rightTimestamp + timestampDiff,\n      );\n    }\n  }\n\n  zoomPlot(event) {\n    const {timeline: {zoomDeltaFactor, minTimeRange, plot: {padding: plotPadding}}} = config;\n    const {scrobbleCollection, plotScales: {x: timeRangeScale}} = this.timeline;\n    const {plot} = this.timeline.children;\n    const {offsetX, deltaY} = event;\n    const timeRangeZoomed = timeRangeScale.domain();\n\n    const [plotWidth] = plot.getDimensions();\n    const plotWidthPadded = plotWidth - 2 * plotPadding;\n\n    const timeScale = d3Scale.scaleLinear()\n      .domain([0, plotWidthPadded])\n      .rangeRound(timeRangeZoomed);\n\n    const xTimestamp = timeScale(clamp(offsetX - plotPadding, ...timeScale.domain()));\n    const zoomFactor = 1 - deltaY * zoomDeltaFactor;\n    const leftTimeDiff = (xTimestamp - timeRangeZoomed[0]) / zoomFactor;\n    const rightTimeDiff = (timeRangeZoomed[1] - xTimestamp) / zoomFactor;\n\n    if (leftTimeDiff + rightTimeDiff >= minTimeRange) {\n      this.updatePlotTimeRange(\n        Math.max(\n          xTimestamp - leftTimeDiff,\n          scrobbleCollection.getFirst().timestamp,\n        ),\n        Math.min(\n          xTimestamp + rightTimeDiff,\n          scrobbleCollection.getLast().timestamp,\n        ),\n      );\n    }\n  }\n\n  updatePlotTimeRange(leftTimestamp, rightTimestamp) {\n    const {scrobbleCollection, plotScales: {x: timeRangeScale}} = this.timeline;\n    const {index: leftIndex} = scrobbleCollection.findFirst(({timestamp}) => timestamp >= leftTimestamp);\n    const {index: rightIndex} = scrobbleCollection.findLast(({timestamp}) => timestamp <= rightTimestamp);\n\n    timeRangeScale.domain([\n      leftTimestamp,\n      rightTimestamp,\n    ]);\n\n    scrobbleCollection.setVisibleIndexRange(\n      leftIndex,\n      rightIndex,\n    );\n\n    this.resetState();\n    this.draw();\n    this.resetUi();\n  }\n\n  handleScrobblePointCreate(point) {\n    this.genrePointRegistry.putItem(point);\n    this.artistPointRegistry.putItem(point);\n  }\n\n  handleWindowResize() {\n    // A timeout handle is used for throttling and dealing with mobile device rotation.\n    // On some mobile browsers, the \"resize\" event is triggered before window dimensions are changed.\n    clearTimeout(this.windowResizeTimeoutHandle);\n\n    this.windowResizeTimeoutHandle = setTimeout(\n      () => {\n        this.resetScales();\n        this.resetState();\n        this.draw();\n        this.resetUi();\n      },\n      100,\n    );\n  }\n\n  handleDocumentKeydown(event) {\n    switch (event.key) {\n      case 'Escape': return this.handleEscKeydown();\n      case 'ArrowDown': return this.selectVerticallyAdjacentScrobble(-1);\n      case 'ArrowUp': return this.selectVerticallyAdjacentScrobble(1);\n      case 'ArrowLeft': return this.selectHorizontallyAdjacentScrobble(-1);\n      case 'ArrowRight': return this.selectHorizontallyAdjacentScrobble(1);\n    }\n  }\n\n  handleEscKeydown() {\n    this.selectedScrobble = null;\n    this.removePointsHighlight();\n    this.resetUi();\n  }\n\n  handlePlotMouseDown(event) {\n    const {button} = event;\n\n    // main button (usually the left button)\n    if (button === 0) {\n      this.isPlotMouseDown = true;\n    }\n  }\n\n  handlePlotMouseUpOrOut() {\n    this.isPlotMouseDown = false;\n  }\n\n  handlePlotMouseMove(event) {\n    const {offsetX} = event;\n\n    if (this.isPlotMouseDown) {\n      this.panPlot(event);\n    } else {\n      this.selectScrobbleUnderMouse(event);\n    }\n\n    this.plotMouseX = offsetX;\n  }\n\n  handlePlotWheel(event) {\n    event.preventDefault();\n    this.zoomPlot(event);\n  }\n\n  handleLegendGenreMouseEnter(genre) {\n    this.selectGenre(genre);\n  }\n\n  afterRender() {\n    this.timeline.afterRender();\n    this.subscribe();\n  }\n\n  renderArtistsLabels(points) {\n    const {plot, artistLabelCollection} = this.timeline.children;\n    const [plotWidth] = plot.getDimensions();\n\n    // points are sorted by Y coord (i.e. artist total playcount),\n    // so labels are also sorted and are getting placed closer to their points\n    Object.entries(points)\n      .map(([text, point]) => ({text, ...point}))\n      .sort((a, b) => b.y - a.y)\n      .forEach((point) => artistLabelCollection.renderLabel(point, plotWidth, false));\n  }\n}\n","import Router, {parse} from 'micro-conductor';\n\nimport config from './config';\n\nimport getSummary from './dataset/summary';\nimport {insertGenres} from './dataset/genre';\nimport {insertColors} from './dataset/color';\nimport {uncompress} from './dataset/scrobble';\n\nimport {dateTimeStringToTimestamp} from './utils/date';\nimport {url} from './utils/string';\n\nimport Timeline from './containers/Timeline';\nimport TimelineInteractive from './containers/TimelineInteractive';\n\nimport './app.css';\nimport './app-theme.css';\n\nconst dataCache = {};\nlet currentTimeline = null;\n\nfunction retrieveAll(urlList) {\n  return Promise.all(urlList.map(retrieve));\n}\n\nfunction retrieve(url) {\n  if (dataCache[url]) {\n    return Promise.resolve(dataCache[url]);\n  }\n\n  return fetch(url)\n    .then((response) => response.json())\n    .then((data) => dataCache[url] = data);\n}\n\nfunction transform([yearList, scrobbleListOriginal, artistsByGenres]) {\n  const scrobbleList = scrobbleListOriginal.map((compressedScrobble, index) => ({\n    ...uncompress(compressedScrobble),\n    index,\n    timestamp: dateTimeStringToTimestamp(compressedScrobble[0]),\n  }));\n  const summary = getSummary(scrobbleList);\n\n  return {\n    yearList,\n    summary,\n    scrobbleList: insertColors(\n      insertGenres(scrobbleList, artistsByGenres),\n      summary.maxAlbumPlaycount,\n    ),\n  };\n}\n\nfunction render(props) {\n  const timeline = new TimelineInteractive(props, new Timeline(props));\n\n  if (currentTimeline) {\n    currentTimeline.unsubscribe();\n  }\n\n  timeline.beforeRender();\n  document.body.innerHTML = timeline.render();\n  timeline.afterRender();\n  timeline.draw();\n\n  currentTimeline = timeline;\n\n  return timeline;\n}\n\nfunction logMissingGenreArtists(timeline) {\n  if (!config.debug) {\n    return;\n  }\n\n  Object.entries(\n    timeline.artistPointRegistry\n      .filter((itemList) => !('genre' in itemList[0].scrobble.artist)),\n  )\n    .filter((entry) => entry[1].length > 1)\n    .sort((a, b) => b[1].length - a[1].length)\n    .map(([artistName, artistScrobbleList]) => console.log(\n      artistScrobbleList.length,\n      artistName,\n      url`https://www.last.fm/music/${artistName}`,\n    ));\n}\n\nfunction createTimeline(year) {\n  retrieveAll([\n    config.dataUrls.yearList,\n    `${config.dataUrls.yearsBase}/${year}.json`,\n    config.dataUrls.artistsByGenres,\n  ])\n    .then(transform)\n    .then(render)\n    .then(logMissingGenreArtists);\n}\n\nconst router = new Router({\n  '': () => document.location.hash = config.defaultDataYear,\n  'all': createTimeline,\n  [parse`${/\\d{4}/}`]: createTimeline,\n});\n\nrouter.start();\n","export function uncompress([\n  date,\n  trackName,\n  trackPlaycount,\n  albumName,\n  albumPlaycount,\n  artistName,\n  artistPlaycount,\n]) {\n  return {\n    date,\n    track: {\n      name: trackName,\n      playcount: trackPlaycount,\n    },\n    album: {\n      name: albumName,\n      playcount: albumPlaycount,\n    },\n    artist: {\n      name: artistName,\n      playcount: artistPlaycount,\n    },\n  };\n}\n","export default function getSummary(scrobbleList) {\n  const registry = {};\n\n  scrobbleList.forEach(({artist, album, track}) => {\n    if (!registry[artist.name]) {\n      // The same track can appear on different albums, so track playcount values are not nested into albums.\n      // It matches aggregation logic in \"music-stats/scripts/src/ETL/transformers/aggregate.ts\".\n      registry[artist.name] = {\n        albums: {},\n        tracks: {},\n      };\n    }\n\n    registry[artist.name].playcount = artist.playcount;\n\n    // album name could be empty\n    if (album.name) {\n      registry[artist.name].albums[album.name] = album.playcount;\n    }\n\n    registry[artist.name].tracks[track.name] = track.playcount;\n  });\n\n  const artistCount = Object.keys(registry).length;\n  let albumCount = 0;\n  let trackCount = 0;\n  let maxArtistPlaycount = 0;\n  let maxAlbumPlaycount = 0;\n\n  for (const artistName in registry) {\n    const {playcount, albums, tracks} = registry[artistName];\n\n    albumCount += Object.keys(albums).length;\n    trackCount += Object.keys(tracks).length;\n\n    if (playcount > maxArtistPlaycount) {\n      maxArtistPlaycount = playcount;\n    }\n\n    for (const albumName in albums) {\n      const albumPlaycount = albums[albumName];\n\n      if (albumPlaycount > maxAlbumPlaycount) {\n        maxAlbumPlaycount = albumPlaycount;\n      }\n    }\n  }\n\n  const scrobbleCount = scrobbleList.length;\n  const msInDay = 24 * 60 * 60 * 1000;\n  const dayCount = Math.ceil((scrobbleList[scrobbleList.length - 1].timestamp - scrobbleList[0].timestamp) / msInDay);\n  const scrobblePerDayCount = Math.round(10 * scrobbleCount / dayCount) / 10;\n\n  return {\n    artistCount,\n    albumCount,\n    trackCount,\n    maxArtistPlaycount,\n    maxAlbumPlaycount,\n    scrobbleCount,\n    scrobblePerDayCount,\n\n    getScrobbleTotals: ({artist, album, track}) => {\n      const {playcount, albums, tracks} = registry[artist.name];\n\n      return {\n        artist: playcount,\n        album: albums[album.name],\n        track: tracks[track.name],\n      };\n    },\n  };\n}\n"],"names":["getPatternPart","key","RegExp","source","Router","routes","context","_classCallCheck","this","notFound","navigate","bind","toNavigate","window","addEventListener","removeEventListener","normalizedHash","constructor","normalize","location","hash","route","matches","match","concat","apply","call","value","replace","cssColors","config","debug","defaultDataYear","dataUrls","yearList","yearsBase","artistsByGenres","links","lastfm","url","text","github","twitter","timeline","zoomDeltaFactor","minTimeRange","plot","padding","backgroundColor","point","size","maxMargin","selectedColor","colorValueFactors","other","saturation","lightness","genre","artistLabel","artist","labels","areaPadding","margin","highlightedHeight","highlightedColor","timeAxis","width","tickLabelCount","timeFullColor","timeRangeColor","legend","height","unknownGenreColorRange","genreGroups","Classical","colorRange","genres","Jazzy","Folk","Rock","Metal","Punk","define$1","factory","prototype","extend","parent","definition","Object","create","Color","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","format","m","l","trim","toLowerCase","exec","length","parseInt","rgbn","Rgb","rgba","hsla","hasOwnProperty","NaN","n","r","g","b","a","rgbConvert","o","opacity","rgb_formatHex","hex","rgb_formatRgb","clampa","clampi","isNaN","Math","max","min","round","toString","h","s","Hsl","hslConvert","hsl","arguments","clamph","clampt","hsl2rgb","m1","m2","insertGenres","scrobbleList","genreGroupsByGenres","genresByArtists","_loop","genreGroup","forEach","_loop2","artistName","map","scrobble","name","_objectSpread","ascending","bisector","f","delta","compare","left","x","lo","hi","mid","d","ascendingComparator","center","i","right","define","copy","channels","assign","displayable","formatHex8","formatHsl","brighter","k","pow","darker","clamp","bisectRight","bisect","e10","sqrt","e5","e2","tickIncrement","start","stop","count","step","power","floor","log","LN10","error","tickStep","step0","abs","step1","initRange","domain","range","initInterpolator","interpolator","constant","gamma","y","nogamma","t","exponential","linear","rgbGamma","end","colorRgb","numberArray","c","slice","genericArray","nb","na","Array","date$1","Date","setTime","interpolateNumber","object","_typeof","reA","reB","string","am","bm","bs","bi","lastIndex","q","index","push","number","one","zero","join","interpolate","date","ArrayBuffer","isView","DataView","isArray","valueOf","interpolateRound","unit","identity","bimap","d0","d1","r0","r1","polymap","j","reverse","target","unknown","transformer","transform","untransform","piecewise","output","input","interpolateValue","rescale","clamper","scale","invert","_","from","rangeRound","u","continuous","formatDecimalParts","p","toExponential","indexOf","coefficient","exponent","prefixExponent","re","formatSpecifier","specifier","Error","FormatSpecifier","fill","align","sign","symbol","comma","precision","type","undefined","formatRounded","formatTypes","toFixed","toLocaleString","e","toPrecision","X","toUpperCase","locale","formatPrefix","prefixes","formatLocale$1","grouping","thousands","group","Number","substring","currencyPrefix","currency","currencySuffix","decimal","numerals","formatNumerals","String","percent","minus","nan","newFormat","prefix","test","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","out","i1","i0","formatTrim","charCodeAt","Infinity","tickFormat","precisionPrefix","precisionRound","precisionFixed","linearish","ticks","isFinite","nice","prestep","maxIter","ceil","formatLocale","t0","t1","newInterval","floori","offseti","field","interval","offset","previous","filter","every","millisecond","millisecond$1","second","getMilliseconds","getUTCSeconds","utcSecond","minute","getSeconds","durationSecond","getMinutes","timeMinute","hour","durationMinute","getHours","timeHour","day","setHours","setDate","getDate","getTimezoneOffset","durationHour","timeDay","weekday","getDay","durationDay","sunday","monday","tuesday","wednesday","thursday","friday","saturday","month","setMonth","getMonth","getFullYear","timeMonth","year","setFullYear","timeYear","utcMinute","setUTCSeconds","getUTCMinutes","utcMinute$1","utcHour","setUTCMinutes","getUTCHours","utcHour$1","utcDay","setUTCHours","setUTCDate","getUTCDate","utcDay$1","utcWeekday","getUTCDay","utcSunday","utcMonday","utcTuesday","utcWednesday","utcThursday","utcFriday","utcSaturday","utcMonth","setUTCMonth","getUTCMonth","getUTCFullYear","utcMonth$1","utcYear","setUTCFullYear","utcYear$1","ticker","week","tickIntervals","tickInterval","_ref2","_slicedToArray","_tickIntervals","_ref","_ticker2","utcWeek","_ticker4","timeTicks","timeTickInterval","localDate","H","M","S","L","utcDate","UTC","newDate","timeFormat","pads","numberRe","percentRe","requoteRe","pad","requote","formatRe","names","formatLookup","Map","parseWeekdayNumberSunday","w","parseWeekdayNumberMonday","parseWeekNumberSunday","U","parseWeekNumberISO","V","parseWeekNumberMonday","W","parseFullYear","parseYear","parseZone","Z","parseQuarter","parseMonthNumber","parseDayOfMonth","parseDayOfYear","parseHour24","parseMinutes","parseSeconds","parseMilliseconds","parseMicroseconds","parseLiteralPercent","parseUnixTimestamp","Q","parseUnixTimestampSeconds","formatDayOfMonth","formatHour24","formatHour12","formatDayOfYear","formatMilliseconds","formatMicroseconds","formatMonthNumber","formatMinutes","formatSeconds","formatWeekdayNumberMonday","formatWeekNumberSunday","timeSunday","dISO","timeThursday","formatWeekNumberISO","formatWeekdayNumberSunday","formatWeekNumberMonday","timeMonday","formatYear","formatYearISO","formatFullYear","formatFullYearISO","formatZone","z","formatUTCDayOfMonth","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","getUTCMilliseconds","formatUTCMicroseconds","formatUTCMonthNumber","formatUTCMinutes","formatUTCSeconds","formatUTCWeekdayNumberMonday","dow","formatUTCWeekNumberSunday","UTCdISO","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCYearISO","formatUTCFullYear","formatUTCFullYearISO","formatUTCZone","formatLiteralPercent","formatUnixTimestamp","formatUnixTimestampSeconds","calendar","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatWeek","formatMonth","x0","x1","time","timeWeek","timeSecond","k10","sequential","insertColors","maxAlbumPlaycount","_config$timeline","createColorScale","d3Scale","unknownGenreColorScale","genreGroupColorScales","entries","playcount","album","baseColor","d3Color","highlightedGenreColor","highlightedArtistColor","artistLabelColor","locale_dateTime","dateTime","locale_date","locale_time","locale_periods","periods","locale_weekdays","days","locale_shortWeekdays","shortDays","locale_months","months","locale_shortMonths","shortMonths","periodRe","periodLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","A","B","G","I","Y","utcFormats","parses","get","parseSpecifier","charAt","newParse","parse","utcFormat","utcParse","defaultLocale","monthNameList","dateTimeStringToDateString","dateTimeString","strings","_len","keys","_key","fillTemplate","encodeURIComponent","_len2","_key2","reduce","patternParts","html","set","Collection","list","firstVisibleIndex","lastVisibleIndex","_this$list","callback","find","item","shift","_this","stepCondition","adjacentItem","PointBuffer","tolerance","buffer","yi","yiBuffer","xj","_objectWithoutProperties","_excluded","yBuffer","xFrom","xTo","yFrom","yTo","Plot","props","dimensions","element","ctx","document","getElementById","legendHeight","dpr","devicePixelRatio","innerWidth","innerHeight","style","getContext","alpha","_this$dimensions","fillStyle","fillRect","leftX","rightX","leftTimeX","rightTimeX","_config$timeline2","_config$timeline2$tim","lineWidth","strokeStyle","beginPath","moveTo","lineTo","stroke","pointSize","pointHalfSize","initializeElement","_templateObject","_taggedTemplateLiteral","createProxyMethod","decorator","decorated","method","args","PlotInteractive","_this$props","onMouseDown","onMouseUp","onMouseOut","onMouseMove","onWheel","_this$props2","afterRender","subscribe","TimeAxisLabel","plotPadding","timeAxisWidth","id","isMostTop","top","lineHeight","classList","add","innerText","areaWidth","halfWidth","offsetWidth","hasOwn","classNames","classes","arg","argType","inner","includes","module","exports","default","YearNavigation","currentYear","renderYearLink","InfoBox","introMessageElementList","scrobbleInfoElementList","artistNameElement","albumNameElement","trackNameElement","querySelectorAll","display","dates","summary","baseUrl","fromDateString","firstScrobbleDate","toDateString","lastScrobbleDate","queryString","scrobbleListLink","scrobbleCount","artistListLink","_templateObject2","artistCount","albumListLink","_templateObject3","albumCount","trackListLink","trackCount","totals","track","artistUrl","albumUrl","trackUrl","innerHTML","_templateObject8","_templateObject9","_templateObject10","initializeElements","_this$getLastfmLinks","getLastfmLinks","_templateObject11","scrobblePerDayCount","ExternalLinks","Legend","genreElementCollection","genreList","artistPlaycounts","_ref$artist","genreRecord","genreGroupConfig","console","warn","sort","getGenreSortedList","heightScale","getHeightScale","getElementsByClassName","maxPlaycount","_toConsumableArray","requestAnimationFrame","setGenreElementsHeight","genreElement","title","renderGenre","LegendInteractive","highlightedGenreIndex","eventListeners","onGenreMouseEnter","_this$legend","onMouseEnter","_this$legend2","_this$legend3","genreIndex","findIndex","_this$legend4","remove","ArtistLabelCollection","highlightedLabelElement","bboxList","minX","maxX","_step","bboxListVertical","bbox","minY","maxY","_iterator","_createForOfIteratorHelper","done","err","isHighlighted","labelElement","createElement","appendChild","offsetHeight","getLabelMinX","getLabelMinY","Timeline","scrobbleSize","children","scrobbleHalfSize","scrobbleCollection","pointBuffer","plotScales","onPlotMouseDown","onPlotMouseUp","onPlotMouseOut","onPlotMouseMove","onPlotWheel","onLegendGenreMouseEnter","yearNavigation","infoBox","getFirst","getLast","externalLinks","selectedScrobbleTimeLabel","artistLabelCollection","_config$timeline$poin","scrobbleMaxMargin","_config$timeline$labe","labelAreaPadding","highlightedLabelHeight","_plot$getDimensions2","getDimensions","plotBottom","plotMaxHeight","scrobbleMargin","plotHeight","plotHeightNext","maxArtistPlaycount","plotTop","plotLeft","plotRight","timestamp","getFirstVisible","getLastVisible","onScrobblePointCreate","_this$plotScales","fullTimeRangeScale","timeRangeScale","plotWidth","_timeRangeScale$domai2","leftDate","rightDate","_timeRangeScale$range2","tickList","drawBackground","forEachVisible","createScrobblePoint","putPoint","forEachPoint","drawPoint","drawTimeAxis","tick","renderText","clear","initializeChildrenComponents","values","child","getPlotScales","render","Registry","getKey","registry","itemList","TimelineInteractive","selectedScrobble","pointCollectionHighlighted","genrePointRegistry","artistPointRegistry","isPlotMouseDown","plotMouseX","handleScrobblePointCreate","handlePlotMouseDown","handlePlotMouseUpOrOut","handlePlotMouseMove","handlePlotWheel","handleLegendGenreMouseEnter","handleWindowResize","handleDocumentKeydown","unsubscribe","reset","_this$timeline$childr","showIntroMessage","removeGenreHighlight","removeAllLabels","artistNameToSkip","lastPoints","getItemList","_point$scrobble","_ref3","_this2","selectedTrackColor","_this$timeline$childr2","sameTrackPointList","lastPoint","scrobbleGlobalIndex","_point$scrobble2","monthName","_map2","padStart","hours","mins","timestampToDateTimeString","_ref4","getAll","_ref5","getPoint","removePointsHighlight","resetUi","renderArtistsLabels","highlightGenre","_this$timeline$childr3","isNewArtist","otherArtistsLastScrobblePoints","hideIntroMessage","artistLastScrobblePoint","highlightArtist","renderLabel","renderScrobbleInfo","getScrobbleTotals","adjacentScrobble","getAdjacentVisible","selectScrobble","_this3","_ref6","event","offsetX","offsetY","getPointWithTolerance","_this$timeline","minTimestamp","maxTimestamp","_timeRangeScale$domai","leftTimestamp","rightTimestamp","timestampDiff","updatePlotTimeRange","_this$timeline2","deltaY","timeRangeZoomed","plotWidthPadded","timeScale","xTimestamp","zoomFactor","leftTimeDiff","rightTimeDiff","_this$timeline3","leftIndex","findFirst","_ref7","rightIndex","findLast","_ref8","setVisibleIndexRange","resetState","draw","putItem","_this4","clearTimeout","windowResizeTimeoutHandle","setTimeout","resetScales","handleEscKeydown","selectVerticallyAdjacentScrobble","selectHorizontallyAdjacentScrobble","button","panPlot","selectScrobbleUnderMouse","preventDefault","zoomPlot","selectGenre","points","_this$timeline$childr4","_ref9","_ref10","dataCache","currentTimeline","retrieve","Promise","resolve","fetch","then","response","json","data","scrobbleListOriginal","compressedScrobble","uncompress","albums","tracks","albumName","albumPlaycount","dayCount","_registry$artist$name","getSummary","beforeRender","body","logMissingGenreArtists","createTimeline","urlList","all","_defineProperty"],"mappings":"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"}